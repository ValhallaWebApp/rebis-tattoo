<div class="day-wrap">
  <div class="day-head">
    <div class="title">
      <mat-icon>today</mat-icon>
      {{ date | date:'fullDate':'':'it-IT' }}
    </div>
    <div class="hint">Operatività: crea/modifica qui (drag/resize puoi aggiungerli dopo).</div>
  </div>

  <div class="day-grid">
    <div class="time-col">
      <div class="time-cell head"></div>
      <div class="time-cell" *ngFor="let t of timeRows()">
        {{ t.label }}
      </div>
    </div>

    <div class="artists-cols">
      <div class="artist-col" *ngFor="let a of artists">
        <div class="artist-head">
          <div class="name">{{ a.name }}</div>
        </div>

        <div class="slot" *ngFor="let t of timeRows()" (click)="onClickSlot(a.id, t.minutes)">
          <button mat-icon-button class="plus" aria-label="nuovo">
            <mat-icon>add</mat-icon>
          </button>
        </div>

        <div class="events">
          <button
            class="event"
            *ngFor="let ev of eventsForArtist(a.id)"
            (click)="editEvent.emit(ev)"
          >
            <div class="event-top">
              <span class="type" [class.session]="ev.type==='session'">{{ ev.type }}</span>
              <span class="time">{{ formatTime(ev.start) }}–{{ formatTime(ev.end) }}</span>
            </div>
            <div class="event-title">{{ ev.notes || ev.title || 'Dettagli' }}</div>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
