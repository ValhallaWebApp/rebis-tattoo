<section class="about-page">
  <!-- HERO -->
  <header class="about-hero">
    <div class="eyebrow">Rebis Tattoo</div>
    <h1>CHI SIAMO</h1>

    <p class="intro">
      In Rebis Tattoo ogni tatuaggio è una narrazione visiva. La nostra missione è creare arte
      che rifletta la tua identità, con attenzione, professionalità e un tocco personale.
    </p>
  </header>

  <!-- TEAM -->
  <section class="about-team">
    <div class="team-header">
      <div>
        <h2>Il team</h2>
        <p class="team-intro">
          Rebis Tattoo nasce da una visione precisa: pochi progetti, curati davvero.
          Lo studio è guidato direttamente dalla titolare, che segue ogni fase del tatuaggio
          dalla consulenza alla guarigione.
        </p>
      </div>
    </div>

    <!-- HERO TITOLARE: SARA (STATICA) -->
    <mat-card class="team-card team-hero">
      <div class="hero-media">
        <img class="hero-avatar" src="{{heroImageUrl}}" [alt]="sara.name" loading="lazy" />
        <div class="hero-badge">TITOLARE</div>
      </div>

      <div class="hero-meta">
        <h3>{{ sara.name }}</h3>
        <div class="role">{{ sara.roleLabel }}</div>
        <p class="bio">{{ sara.bio }}</p>

        <div class="hero-actions">
          <a class="ghost-btn" routerLink="/portfolio">Vedi lavori</a>
          <a class="primary-btn" routerLink="/bookings">Prenota</a>
        </div>
      </div>
    </mat-card>

    <!-- SPOTLIGHT -->
    <section class="team-spotlight" *ngIf="team?.length; else noTeam">
      <div class="spotlight-head">
        <h2>Artisti</h2>
        <p>Seleziona un artista per vedere i dettagli.</p>
      </div>

      <div class="spotlight-layout">
        <!-- LEFT: CAROUSEL -->
        <div class="spotlight-left">
          <div
            class="focus-carousel"
            (pointerdown)="onPointerDown($event)"
            (pointermove)="onPointerMove($event)"
            (pointerup)="onPointerUp($event)"
            (pointercancel)="onPointerUp($event)"
            (pointerleave)="onPointerUp($event)"
          >
            <button class="nav-btn prev" type="button" aria-label="Artista precedente" (click)="prev()">‹</button>

            <div class="stage">
              <div
                class="card"
                *ngFor="let m of team; let i = index; trackBy: trackById"
                [class.is-active]="i === activeIndex"
                [class.is-left]="isLeft(i)"
                [class.is-right]="isRight(i)"
                [class.is-hidden]="isHidden(i)"
                [style.transform]="getTransform(i)"
                [style.opacity]="getOpacity(i)"
                [style.zIndex]="getZIndex(i)"
                (click)="setActive(i)"
              >
                <div class="thumb">
                  <img [src]="getPhoto(m)" [alt]="m.name" loading="lazy" />
                  <div class="thumb-overlay"></div>
                </div>

                <div class="mini">
                  <div class="name">{{ m.name }}</div>
                  <div class="role">{{ roleLabel(m.role) }}</div>
                </div>
              </div>
            </div>

            <button class="nav-btn next" type="button" aria-label="Artista successivo" (click)="next()">›</button>
          </div>

          <div class="counter">
            <span>{{ activeIndex + 1 }}</span>/<span>{{ team.length }}</span>
          </div>
        </div>

        <!-- RIGHT: DETAILS -->
        <div class="spotlight-right" *ngIf="active as a">
          <mat-card class="detail-card">
            <div class="detail-top">
              <div class="detail-title">
                <h3>{{ a.name }}</h3>
                <span class="detail-role">{{ roleLabel(a.role) }}</span>
              </div>

              <div class="actions">
                <a class="ghost-btn" routerLink="/portfolio">Vedi lavori</a>
                <a class="primary-btn" routerLink="/bookings">Prenota</a>
              </div>
            </div>

            <p class="detail-bio">
              {{ a.bio || 'Bio in arrivo. Intanto, dai un’occhiata ai lavori in portfolio.' }}
            </p>

            <div class="chips" *ngIf="a.role">
              <span class="chip">{{ roleLabel(a.role) }}</span>
              <span class="chip" *ngIf="a.role === 'guest'">Disponibilità limitata</span>
            </div>
          </mat-card>
        </div>
      </div>
    </section>

    <ng-template #noTeam>
      <p class="empty">Nessun artista disponibile al momento.</p>
    </ng-template>
  </section>
</section>
