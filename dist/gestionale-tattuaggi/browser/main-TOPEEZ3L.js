import{a as ze}from"./chunk-5AHM4ZS4.js";import{a as An}from"./chunk-IJLOSLJF.js";import{a as Vn}from"./chunk-Y7I3BHLN.js";import"./chunk-ZNZTZ3HB.js";import{b as Pn,g as wn,i as R,j as Fn}from"./chunk-2YJ7PE73.js";import{a as Ne}from"./chunk-FXPXM24L.js";import{A as yn,D as On,G as Sn,H as kn,K as rt,L as In,O as En,Q as ne,R as Tn,S as lt,U as Dn,w as Mn,x as xn}from"./chunk-RWUD3VOV.js";import{A as Ee,Ba as ue,C as ge,Ca as fe,D as Te,Da as K,E as H,Fa as mn,Ka as dn,La as pn,Ma as gn,Q as Gt,R as Wt,Ra as un,S as qt,T as A,U as L,V as De,W as Fe,Xa as fn,Y as Q,Ya as _n,Za as hn,_a as vn,ab as Cn,ba as Ht,bb as bn,c as Vt,ca as Qt,d as At,da as Yt,db as Ae,e as Bt,ea as Zt,eb as Be,fa as Jt,g as zt,ga as Kt,h as q,i as ke,ia as Xt,ib as w,j as Nt,k as Lt,ka as en,l as Rt,m as ce,n as k,o as me,oa as tn,p as de,pa as nn,qa as on,r as $t,sa as an,t as jt,ta as rn,u as pe,ua as ln,v as Ut,wa as Ve,x as Ie,xa as sn,za as cn}from"./chunk-6RZNEBAJ.js";import{$c as It,Ac as z,Ba as Z,Bb as p,Bc as wt,C as _e,Ca as f,Cc as St,D as ye,Da as _,Ec as W,Gb as m,Hb as Mt,Ib as ve,La as N,Ma as ft,Nc as kt,Pb as o,Qb as a,Rb as M,Sb as I,Tb as E,Ua as _t,Ub as xt,Vb as x,Vc as we,Yb as u,_b as d,a as ot,b as at,cc as yt,e as oe,ec as Ce,fb as te,fc as be,gc as Me,gd as J,h as dt,ha as pt,hd as V,id as D,ja as Y,jb as l,jc as j,kb as b,l as xe,lb as ht,lc as s,ma as gt,mc as h,md as Et,nb as vt,nc as v,nd as Se,oa as he,oc as Ot,pa as ae,pb as Ct,pd as Tt,qc as re,qd as Dt,rc as le,sb as bt,sc as se,sd as Ft,ta as y,td as P,uc as O,vc as Oe,w as ee,wa as ut,wc as Pt,xc as Pe,zc as T}from"./chunk-JF75SBGN.js";function Gn(i,t){i&1&&(o(0,"mat-error"),s(1,"L'email \xE8 obbligatoria"),a())}function Wn(i,t){i&1&&(o(0,"mat-error"),s(1,"Inserisci un indirizzo email valido"),a())}function qn(i,t){i&1&&(o(0,"mat-error"),s(1,"La password \xE8 obbligatoria"),a())}function Hn(i,t){i&1&&(o(0,"mat-error"),s(1,"Minimo 6 caratteri"),a())}function Qn(i,t){if(i&1&&(o(0,"div",18)(1,"mat-icon",19),s(2,"error"),a(),o(3,"span"),s(4),a()()),i&2){let e=d();l(4),h(e.errorMessage)}}function Yn(i,t){if(i&1&&(I(0),s(1),E()),i&2){let e=d();l(),v(" ",e.isLoginMode?"Accedi":"Registrati"," ")}}function Zn(i,t){i&1&&M(0,"mat-progress-spinner",20)}var Le=class i{constructor(t,e,n){this.authService=t;this.fb=e;this.router=n;this.loginForm=this.fb.group({email:["",[k.required,k.email]],password:["",[k.required,k.minLength(6)]],rememberMe:[!0]})}loginForm;isLoginMode=!0;errorMessage="";isLoading=!1;toggleMode(){this.isLoginMode=!this.isLoginMode,this.errorMessage=""}onSubmit(){return oe(this,null,function*(){if(this.loginForm.invalid||this.isLoading)return;let{email:t,password:e,rememberMe:n}=this.loginForm.value,r=localStorage.getItem("pre-log")||"/home";this.isLoading=!0,this.errorMessage="";try{this.isLoginMode?yield this.authService.login(t,e):yield this.authService.register(t,e),yield this.router.navigateByUrl(r),localStorage.removeItem("pre-log")}catch(c){let g=c?.code||c?.message||"unknown";this.errorMessage=this.getErrorMessage(g),console.error("Auth error:",c)}finally{this.isLoading=!1}})}getErrorMessage(t){switch(t){case"auth/user-not-found":return"Utente non trovato.";case"auth/wrong-password":return"Password errata.";case"auth/email-already-in-use":return"Email gi\xE0 registrata.";case"auth/invalid-email":return"Email non valida.";case"auth/weak-password":return"Password troppo debole.";case"profile/not-found":return"Profilo non trovato. Contatta il supporto oppure riprova pi\xF9 tardi.";default:return"Errore sconosciuto. Riprova."}}static \u0275fac=function(e){return new(e||i)(b(R),b(ge),b(q))};static \u0275cmp=y({type:i,selectors:[["app-login"]],standalone:!0,features:[O],decls:36,vars:12,consts:[["loadingTpl",""],[1,"login-wrapper"],[1,"login-card","mat-elevation-z8"],[1,"card-header"],[1,"header-icon"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matPrefix",""],["matInput","","formControlName","email","type","email","autocomplete","email"],[4,"ngIf"],["matInput","","formControlName","password","type","password","autocomplete","current-password"],[1,"row","between","center"],["formControlName","rememberMe"],["mat-button","","type","button",1,"linklike"],["class","global-error",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],[4,"ngIf","ngIfElse"],["mat-button","","color","accent",1,"toggle-btn",3,"click"],[1,"global-error"],["color","warn"],["mode","indeterminate","diameter","22"]],template:function(e,n){if(e&1){let r=x();o(0,"div",1)(1,"mat-card",2)(2,"div",3)(3,"h2"),s(4),a(),o(5,"mat-icon",4),s(6),a()(),o(7,"form",5),u("ngSubmit",function(){return f(r),_(n.onSubmit())}),o(8,"mat-form-field",6)(9,"mat-label"),s(10,"Email"),a(),o(11,"mat-icon",7),s(12,"mail"),a(),M(13,"input",8),p(14,Gn,2,0,"mat-error",9)(15,Wn,2,0,"mat-error",9),a(),o(16,"mat-form-field",6)(17,"mat-label"),s(18,"Password"),a(),o(19,"mat-icon",7),s(20,"lock"),a(),M(21,"input",10),p(22,qn,2,0,"mat-error",9)(23,Hn,2,0,"mat-error",9),a(),o(24,"div",11)(25,"mat-checkbox",12),s(26,"Ricordami"),a(),o(27,"button",13),s(28,"Password dimenticata?"),a()(),p(29,Qn,5,1,"div",14),o(30,"button",15),p(31,Yn,2,1,"ng-container",16),a(),p(32,Zn,1,0,"ng-template",null,0,W),a(),o(34,"button",17),u("click",function(){return f(r),_(n.toggleMode())}),s(35),a()()()}if(e&2){let r,c,g,C,S=j(33);l(4),h(n.isLoginMode?"Accedi":"Crea un account"),l(2),v(" ",n.isLoginMode?"login":"person_add"," "),l(),m("formGroup",n.loginForm),l(7),m("ngIf",(r=n.loginForm.get("email"))==null?null:r.hasError("required")),l(),m("ngIf",(c=n.loginForm.get("email"))==null?null:c.hasError("email")),l(7),m("ngIf",(g=n.loginForm.get("password"))==null?null:g.hasError("required")),l(),m("ngIf",(C=n.loginForm.get("password"))==null?null:C.hasError("minlength")),l(6),m("ngIf",n.errorMessage),l(),m("disabled",n.loginForm.invalid||n.isLoading),l(),m("ngIf",!n.isLoading)("ngIfElse",S),l(4),v(" ",n.isLoginMode?"Non hai un account? Registrati":"Hai gi\xE0 un account? Accedi"," ")}},dependencies:[w,A,L,fe,ue,Ve,sn,cn,K,fn,Gt,P,D,Wt,H,pe,ce,me,de,Ie,Ee],styles:[".login-wrapper[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(145deg,#121212,#1f1f1f);padding:16px}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:24px;background-color:#fff;border-radius:12px}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:600}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{font-size:32px;color:#3f51b5}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.global-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#d32f2f;font-size:14px;margin:-8px 0 8px}.row[_ngcontent-%COMP%]{display:flex;gap:12px}.center[_ngcontent-%COMP%]{align-items:center}.between[_ngcontent-%COMP%]{justify-content:space-between}.linklike[_ngcontent-%COMP%]{text-transform:none;padding:0 8px}.toggle-btn[_ngcontent-%COMP%]{margin-top:12px;text-align:center;width:100%}"]})};var Kn=(i,t)=>({nbt:i,nbb:t});function Xn(i,t){if(i&1&&(o(0,"div",5),M(1,"img",6),o(2,"h3"),s(3),a(),o(4,"p"),s(5),a()()),i&2){let e=t.$implicit,n=t.index;m("ngClass",Pe(5,Kn,n<3,n>=3)),l(),m("src",e.icon,te)("alt",e.title+" icon"),l(2),h(e.title),l(2),h(e.desc)}}var Ue=class i{constructor(t){this.lang=t}services=[{icon:"/home/icon-01-80x80.png",title:"Tatuaggi",desc:"Combiniamo tecniche moderne e tradizionali per un risultato di alta qualit\xE0."},{icon:"/home/icon-07-80x80.png",title:"Tatuaggi Fine Line",desc:"Tatuaggi realizzati con linee sottili e dettagli delicati, ideali per chi cerca un design elegante e meno invasivo."},{icon:"/home/icon-03-80x80.png",title:"Copertura tatuaggi",desc:"Hai vecchi tatuaggi che non ti piacciono pi\xF9? Li copriremo con soluzioni artistiche."},{icon:"/home/icon-04-80x80.png",title:"Design personalizzato",desc:"Niente \xE8 pi\xF9 stimolante che creare un design pensato solo per la tua pelle."},{icon:"/home/icon-05-80x80.png",title:"Trucco permanente",desc:"Una tecnica cosmetica che utilizza tatuaggi per realizzare make-up a lunga durata sul viso."},{icon:"/home/icon-custom-02.png",title:"Tatuaggi su misura",desc:"Ogni pelle \xE8 unica. Creiamo disegni esclusivi che rispecchiano la tua storia e il tuo stile."}];accordionServices=[{title:"Tatuaggio Permanente",price:"49\u20AC",content:"Il tipo di tatuaggio pi\xF9 comune, con pigmenti organici per un risultato duraturo.",images:[{src:"/ink/man-1.webp",alt:"Tatuaggio permanente 1"},{src:"/ink/woman-2.webp",alt:"Tatuaggio permanente 2"},{src:"/ink/woman-3.webp",alt:"Tatuaggio permanente 3"}],link:"/services/permanent"},{title:"Tatuaggio Temporaneo",content:"Tatuaggi non permanenti per eventi o esperienze temporanee."},{title:"Sketch e Progettazione",content:"Disegni preparatori personalizzati per ogni cliente."},{title:"Copertura e Correzione",content:"Soluzioni artistiche per coprire o correggere vecchi tatuaggi."},{title:"Rimozione Tatuaggi",content:"Trattamenti per la rimozione parziale o completa."}];static \u0275fac=function(e){return new(e||i)(b(ze))};static \u0275cmp=y({type:i,selectors:[["app-service-list"]],standalone:!0,features:[O],decls:7,vars:3,consts:[[1,"services-container"],[1,"services-title"],[1,"services-subtitle"],[1,"services-grid"],["class","service-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"service-card",3,"ngClass"],[3,"src","alt"]],template:function(e,n){e&1&&(o(0,"section",0)(1,"h2",1),s(2),a(),o(3,"p",2),s(4),a(),o(5,"div",3),p(6,Xn,6,8,"div",4),a()()),e&2&&(l(2),v(" ",n.lang.t("home.services.title")," "),l(2),v(" ",n.lang.t("home.services.subtitle")," "),l(2),m("ngForOf",n.services))},dependencies:[P,J,V,w],styles:[".services-container[_ngcontent-%COMP%]{padding:8vh 0;color:#0a0a0a;text-align:center}.services-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#000;margin-top:2rem;font-family:Barlow Semi Condensed,sans-serif}.services-subtitle[_ngcontent-%COMP%]{font-size:1rem;margin:0 auto 2rem;max-width:900px;color:#444;font-family:Barlow Semi Condensed,sans-serif}.services-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:0}@media (max-width: 768px){.services-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}@media (min-width: 768px){.services-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.service-card[_ngcontent-%COMP%]{padding:2.5rem 1.5rem;border:1px solid #e0e0e0;transition:box-shadow .3s ease;background:#fff;min-width:300px;font-family:Barlow Semi Condensed,sans-serif}.service-card.nbt[_ngcontent-%COMP%]{border-top:none}.service-card.nbb[_ngcontent-%COMP%]{border-bottom:none}.service-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #0000001a}.service-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;margin-bottom:1rem}.service-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:.5rem;color:#0a0a0a}.service-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#555}"]})};var ei=(i,t)=>({artistId:i,hour:t});function ti(i,t){if(i&1&&(o(0,"div",9)(1,"div",10),M(2,"img",11),o(3,"span"),s(4),a()()()),i&2){let e=t.$implicit,n=d(2);l(2),m("src",n.artistPhotoMap[e]||"/assets/avatar-default.png",te)("alt",n.artistMap[e]||e),l(2),h(n.artistMap[e]||"Artista")}}function ni(i,t){if(i&1&&(o(0,"div",9),xt(1,13),a()),i&2){let e=t.$implicit,n=d().$implicit;d(2);let r=j(2);l(),m("ngTemplateOutlet",r)("ngTemplateOutletContext",Pe(2,ei,e,n))}}function ii(i,t){if(i&1&&(o(0,"div",12)(1,"div",5)(2,"span"),s(3),a()(),p(4,ni,2,5,"div",6),a()),i&2){let e=t.$implicit,n=d(2);l(3),h(e),l(),m("ngForOf",n.artistIds)}}function oi(i,t){if(i&1&&(o(0,"div",3)(1,"div",4),M(2,"div",5),p(3,ti,5,3,"div",6),a(),o(4,"div",7),p(5,ii,5,2,"div",8),a()()),i&2){let e=d();l(3),m("ngForOf",e.artistIds),l(2),m("ngForOf",e.hours)}}function ai(i,t){if(i&1){let e=x();I(0),o(1,"button",15),u("click",function(){let r=f(e).ngIf,c=d(2);return _(c.handleEventClick(r))}),o(2,"span",16),s(3),a(),o(4,"span",17),s(5),a()(),E()}if(i&2){let e=t.ngIf,n=d().hour;l(3),h(n),l(2),h(e.title)}}function ri(i,t){if(i&1){let e=x();o(0,"button",18),u("click",function(){f(e);let r=d(),c=r.artistId,g=r.hour,C=d();return _(C.handleEmptySlotClick(g,c))}),o(1,"mat-icon"),s(2,"add"),a()()}if(i&2){let e=d(2);m("disabled",e.role!=="client"&&e.role!=="admin")}}function li(i,t){if(i&1&&p(0,ai,6,2,"ng-container",14)(1,ri,3,1,"ng-template",null,1,W),i&2){let e=t.artistId,n=t.hour,r=j(2),c=d();m("ngIf",c.getEventForSlot(e,n))("ngIfElse",r)}}var Ge=class i{date=null;events=[];artistMap={};artistPhotoMap={};role="client";createFromSlot=new N;eventDropped=new N;hours=["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00"];artistIds=[];dayEvents=[];ngOnChanges(t){this.artistIds=Object.keys(this.artistMap||{}),console.log("[DayView] artistIds \u2192",this.artistIds);let e=this.date?this.toISODate(this.date):null;this.dayEvents=(this.events||[]).filter(n=>!e||n.date===e)}toISODate(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0");return`${e}-${n}-${r}`}getEventForSlot(t,e){return this.dayEvents&&this.dayEvents.find(n=>n.artistId!==t?!1:n.start.slice(11,16)===e)||null}handleEmptySlotClick(t,e){this.date&&this.createFromSlot.emit({date:this.toISODate(this.date),time:t,artistId:e})}handleEventClick(t){console.log("Evento cliccato",t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-day-view"]],inputs:{date:"date",events:"events",artistMap:"artistMap",artistPhotoMap:"artistPhotoMap",role:"role"},outputs:{createFromSlot:"createFromSlot",eventDropped:"eventDropped"},standalone:!0,features:[Z,O],decls:3,vars:1,consts:[["slotTpl",""],["emptySlot",""],["class","day-view",4,"ngIf"],[1,"day-view"],[1,"day-header"],[1,"time-col"],["class","artist-col",4,"ngFor","ngForOf"],[1,"day-body"],["class","hour-row",4,"ngFor","ngForOf"],[1,"artist-col"],[1,"artist-header"],[3,"src","alt"],[1,"hour-row"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf","ngIfElse"],["mat-stroked-button","",1,"event-pill",3,"click"],[1,"event-time"],[1,"event-title"],["mat-icon-button","","matTooltip","Nuova prenotazione",1,"empty-slot",3,"click","disabled"]],template:function(e,n){e&1&&p(0,oi,6,2,"div",2)(1,li,3,2,"ng-template",null,0,W),e&2&&m("ngIf",n.date)},dependencies:[P,V,D,Et,w,A,L,Q],styles:['@charset "UTF-8";.day-view[_ngcontent-%COMP%]{background:var(--cal-card-bg);color:var(--cal-text);border-radius:16px;padding:.75rem;font-size:.85rem}.day-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px repeat(auto-fit,minmax(140px,1fr));column-gap:.5rem;margin-bottom:.5rem}.time-col[_ngcontent-%COMP%]{font-size:.75rem;text-align:right;padding-right:.5rem;color:var(--cal-text-muted)}.artist-col[_ngcontent-%COMP%]{padding:0 .25rem}.artist-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.45rem;padding:.25rem .45rem;border-radius:999px;background:#00000005;border:1px solid var(--cal-border)}.artist-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26px;height:26px;border-radius:50%;object-fit:cover;border:1px solid var(--cal-border)}.artist-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.78rem;white-space:nowrap}.day-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.hour-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px repeat(auto-fit,minmax(140px,1fr));column-gap:.5rem;min-height:40px;height:var(--cal-row-height);max-height:var(--cal-row-height)}.artist-col[_ngcontent-%COMP%]{padding:0;display:flex;align-items:stretch}.empty-slot[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:10px;border:1px dashed var(--cal-slot-border);background:var(--cal-slot-bg);display:flex;align-items:center;justify-content:center;cursor:pointer}.empty-slot[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;opacity:.4}.empty-slot[_ngcontent-%COMP%]:hover{background:var(--cal-slot-hover);border-style:solid}.event-pill[_ngcontent-%COMP%]{width:100%;border-radius:12px;padding:.25rem .55rem;border:1px solid var(--cal-event-border);background:var(--cal-event-bg);color:var(--cal-event-text);display:inline-flex;align-items:center;gap:.35rem;font-size:.78rem}.event-pill[_ngcontent-%COMP%]   .event-time[_ngcontent-%COMP%]{font-weight:600}.event-pill[_ngcontent-%COMP%]   .event-title[_ngcontent-%COMP%]{opacity:.9;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.event-pill.my-booking[_ngcontent-%COMP%]{border-color:var(--cal-my-event-border);background:var(--cal-my-event-bg)}@media (max-width: 768px){.day-header[_ngcontent-%COMP%], .hour-row[_ngcontent-%COMP%]{grid-template-columns:60px minmax(0,1fr)}.artist-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}']})};var si=i=>({"my-booking":i});function ci(i,t){if(i&1&&(o(0,"div",6)(1,"div",7),s(2),a(),o(3,"div",8),s(4),a()()),i&2){let e=t.$implicit;l(2),v(" ",e.label," "),l(2),v(" ",e.dayNumber," ")}}function mi(i,t){if(i&1&&(I(0),o(1,"div",14)(2,"span",15),s(3),a(),o(4,"span",16),s(5),a()(),E()),i&2){let e=t.$implicit,n=d(2).$implicit,r=d();l(),m("ngClass",Pt(3,si,r.isMine(e))),l(2),h(n),l(2),v(" ",e.title||"Appuntamento"," ")}}function di(i,t){if(i&1){let e=x();o(0,"div",12),u("click",function(){let r=f(e).$implicit,c=d().$implicit,g=d();return _(g.onSlotClick(r.iso,c))}),p(1,mi,6,5,"ng-container",13),a()}if(i&2){let e=t.$implicit,n=d().$implicit,r=d();l(),m("ngForOf",r.getEventsForSlot(e.iso,n))}}function pi(i,t){if(i&1&&(o(0,"div",9)(1,"div",10),s(2),a(),p(3,di,2,1,"div",11),a()),i&2){let e=t.$implicit,n=d();l(2),v(" ",e," "),l(),m("ngForOf",n.weekDays)}}var We=class i{date=null;events=[];artistMap={};artistPhotoMap={};role="client";eventDropped=new N;createFromSlot=new N;weekDays=[];hours=["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00"];ngOnChanges(t){t.date&&this.buildWeekDays()}buildWeekDays(){let t=this.date?new Date(this.date):new Date,e=t.getDay(),n=(e===0?-6:1)-e,r=new Date(t);r.setDate(t.getDate()+n);let c=[];for(let g=0;g<7;g++){let C=new Date(r);C.setDate(r.getDate()+g);let S=C.toISOString().substring(0,10),F=C.getDate(),G=C.toLocaleDateString("it-IT",{weekday:"short"});c.push({iso:S,label:G,dayNumber:F})}this.weekDays=c}onSlotClick(t,e){this.createFromSlot.emit({date:t,time:e})}getEventsForSlot(t,e){if(!this.events||!t)return[];let[n,r]=e.split(":").map(Number);return this.events.filter(c=>{if(!c.start)return!1;let g=new Date(c.start);return(c.date??c.start.substring(0,10))===t&&g.getHours()===n&&g.getMinutes()===r})}isMine(t){return!!t.metadata&&t.metadata.isMine}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-week-view"]],inputs:{date:"date",events:"events",artistMap:"artistMap",artistPhotoMap:"artistPhotoMap",role:"role"},outputs:{eventDropped:"eventDropped",createFromSlot:"createFromSlot"},standalone:!0,features:[Z,O],decls:6,vars:2,consts:[[1,"week-view"],[1,"week-header"],[1,"hour-col-header"],["class","day-header",4,"ngFor","ngForOf"],[1,"week-body"],["class","hour-row",4,"ngFor","ngForOf"],[1,"day-header"],[1,"day-label"],[1,"day-number"],[1,"hour-row"],[1,"hour-label"],["class","slot-cell",3,"click",4,"ngFor","ngForOf"],[1,"slot-cell",3,"click"],[4,"ngFor","ngForOf"],[1,"event-pill",3,"ngClass"],[1,"time"],[1,"title"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1),M(2,"div",2),p(3,ci,5,2,"div",3),a(),o(4,"div",4),p(5,pi,4,2,"div",5),a()()),e&2&&(l(3),m("ngForOf",n.weekDays),l(2),m("ngForOf",n.hours))},dependencies:[P,J,V],styles:[".week-view[_ngcontent-%COMP%]{background:var(--cal-card-bg);color:var(--cal-text);border-radius:16px;padding:.5rem;font-size:.85rem}.week-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px repeat(7,minmax(0,1fr));align-items:center;margin-bottom:.25rem;column-gap:.5rem}.hour-col-header[_ngcontent-%COMP%]{font-size:.75rem;color:var(--cal-text-muted);text-align:right;padding-right:.5rem}.day-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline;justify-content:space-between;padding:.25rem .35rem;border-radius:8px;background:#00000005}.day-label[_ngcontent-%COMP%]{font-size:.78rem;font-weight:600}.day-number[_ngcontent-%COMP%]{font-size:.8rem;opacity:.8}.week-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;max-height:calc(80vh - 140px);overflow-y:auto}.hour-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px repeat(7,minmax(0,1fr));column-gap:.5rem;height:var(--cal-row-height);max-height:var(--cal-row-height)}.hour-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;padding-right:.5rem;font-size:.75rem;color:var(--cal-text-muted)}.slot-cell[_ngcontent-%COMP%]{border-radius:10px;border:1px dashed var(--cal-slot-border);background:var(--cal-slot-bg);cursor:pointer;padding:2px 4px;display:flex;align-items:center;gap:4px;overflow:hidden}.slot-cell[_ngcontent-%COMP%]:hover{background:var(--cal-slot-hover);border-style:solid}.event-pill[_ngcontent-%COMP%]{border-radius:999px;padding:2px 6px;border:1px solid var(--cal-event-border);background:var(--cal-event-bg);color:var(--cal-event-text);display:inline-flex;align-items:center;gap:4px;font-size:.75rem;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.event-pill[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-weight:600}.event-pill[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{opacity:.9}.event-pill.my-booking[_ngcontent-%COMP%]{border-color:var(--cal-my-event-border);background:var(--cal-my-event-bg)}@media (max-width: 900px){.week-header[_ngcontent-%COMP%], .hour-row[_ngcontent-%COMP%]{grid-template-columns:60px repeat(7,minmax(0,1fr))}}"]})};function gi(i,t){if(i&1&&(o(0,"div",9)(1,"span",10),s(2),a(),o(3,"span",11),s(4),a()()),i&2){let e=t.$implicit;l(2),h(e.start.slice(11,16)),l(2),h(e.title)}}function ui(i,t){if(i&1&&(o(0,"div",12),s(1),a()),i&2){let e=d().$implicit;l(),v(" +",e.events.length-3," altro/i ")}}function fi(i,t){if(i&1){let e=x();o(0,"div",4),u("click",function(){let r=f(e).$implicit,c=d(2);return _(c.handleDayClick(r.iso))}),o(1,"div",5),s(2),a(),o(3,"div",6),p(4,gi,5,2,"div",7),T(5,"slice"),p(6,ui,2,1,"div",8),a()()}if(i&2){let e=t.$implicit;l(2),v(" ",e.label," "),l(2),m("ngForOf",St(5,3,e.events,0,3)),l(2),m("ngIf",e.events.length>3)}}function _i(i,t){if(i&1&&(o(0,"div",1)(1,"div",2),p(2,fi,7,7,"div",3),a()()),i&2){let e=d();l(2),m("ngForOf",e.monthDays)}}var qe=class i{date=null;events=[];artistMap={};artistPhotoMap={};role="client";createFromDay=new N;monthDays=[];ngOnChanges(t){this.buildMonth()}buildMonth(){if(!this.date){this.monthDays=[];return}let t=new Date(this.date),e=t.getFullYear(),n=t.getMonth(),c=(new Date(e,n,1).getDay()||7)-1,C=new Date(e,n+1,0).getDate(),S=[];for(let F=0;F<C;F++){let G=new Date(e,n,F+1),mt=this.toISODate(G),jn=(this.events||[]).filter(Un=>Un.date===mt);S.push({date:G,iso:mt,label:F+1,events:jn})}this.monthDays=S}toISODate(t){let e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0");return`${e}-${n}-${r}`}handleDayClick(t){this.createFromDay.emit({date:t,time:"10:00"})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-month-view"]],inputs:{date:"date",events:"events",artistMap:"artistMap",artistPhotoMap:"artistPhotoMap",role:"role"},outputs:{createFromDay:"createFromDay"},standalone:!0,features:[Z,O],decls:1,vars:1,consts:[["class","month-view",4,"ngIf"],[1,"month-view"],[1,"month-grid"],["class","day-cell",3,"click",4,"ngFor","ngForOf"],[1,"day-cell",3,"click"],[1,"day-label"],[1,"events-mini"],["class","event-dot",4,"ngFor","ngForOf"],["class","more",4,"ngIf"],[1,"event-dot"],[1,"time"],[1,"title"],[1,"more"]],template:function(e,n){e&1&&p(0,_i,3,1,"div",0),e&2&&m("ngIf",n.monthDays.length)},dependencies:[P,V,D,Ft,w],styles:[".month-view[_ngcontent-%COMP%]{background:var(--cal-card-bg);color:var(--cal-text);border-radius:16px;padding:.75rem;font-size:.8rem}.month-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,minmax(0,1fr));gap:4px}.day-cell[_ngcontent-%COMP%]{background:var(--cal-slot-bg);border-radius:10px;padding:.4rem;min-height:70px;border:1px solid var(--cal-border);cursor:pointer;display:flex;flex-direction:column;gap:.25rem;transition:background .15s ease,border-color .15s ease}.day-cell[_ngcontent-%COMP%]:hover{background:var(--cal-slot-hover);border-color:var(--cal-event-border)}.day-label[_ngcontent-%COMP%]{font-size:.78rem;font-weight:600;color:var(--cal-text)}.events-mini[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.event-dot[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.72rem;padding:2px 4px;border-radius:999px;background:var(--cal-event-bg);color:var(--cal-event-text);border:1px solid var(--cal-event-border)}.event-dot[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{opacity:.9}.event-dot[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.event-dot.my-booking[_ngcontent-%COMP%]{border-color:var(--cal-my-event-border);background:var(--cal-my-event-bg)}.more[_ngcontent-%COMP%]{font-size:.7rem;color:var(--cal-text-muted)}@media (max-width: 600px){.month-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,minmax(0,1fr))}}"]})};var He=class i{viewSubject=new xe("week");view$=this.viewSubject.asObservable();dateSubject=new xe(new Date);date$=this.dateSubject.asObservable();eventsSubject=new xe([]);events$=this.eventsSubject.asObservable();title$=ye([this.view$,this.date$]).pipe(_e(([t,e])=>this.buildTitle(t,e)));setView(t){this.viewSubject.next(t)}setDate(t){this.dateSubject.next(t)}setToday(){this.dateSubject.next(new Date)}setEvents(t){this.eventsSubject.next(t??[])}next(){let t=this.viewSubject.value,e=this.dateSubject.value;this.dateSubject.next(this.shiftDate(e,t,1))}prev(){let t=this.viewSubject.value,e=this.dateSubject.value;this.dateSubject.next(this.shiftDate(e,t,-1))}shiftDate(t,e,n){let r=new Date(t);switch(e){case"day":r.setDate(r.getDate()+n);break;case"week":r.setDate(r.getDate()+7*n);break;case"month":r.setMonth(r.getMonth()+n);break}return r}buildTitle(t,e){let n=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],r=e.getDate(),c=n[e.getMonth()],g=e.getFullYear();switch(t){case"day":return`${r} ${c} ${g}`;case"week":{let C=new Date(e),S=new Date(e);S.setDate(S.getDate()+6);let F=S.getDate(),G=n[S.getMonth()];return C.getMonth()===S.getMonth()?`Settimana ${r}\u2013${F} ${c} ${g}`:`Settimana ${r} ${c} \u2013 ${F} ${G} ${g}`}case"month":default:return`${c} ${g}`}}static \u0275fac=function(e){return new(e||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ci=()=>[];function bi(i,t){if(i&1&&(o(0,"mat-button-toggle",18),s(1),a()),i&2){let e=t.$implicit;m("value",e),l(),v(" ",e==="booking"?"Consulenze":"Sessioni"," ")}}function Mi(i,t){if(i&1){let e=x();o(0,"mat-button-toggle-group",16),u("change",function(r){f(e);let c=d();return _(c.onTypeChanged(r.value))}),p(1,bi,2,2,"mat-button-toggle",17),a()}if(i&2){let e=d();m("value",e.selectedType),l(),m("ngForOf",e.bookingTypes||Oe(2,Ci))}}function xi(i,t){if(i&1){let e=x();o(0,"app-day-view",22),T(1,"async"),T(2,"async"),u("eventDropped",function(r){f(e);let c=d(2);return _(c.handleEventDropped(r))})("createFromSlot",function(r){f(e);let c=d(2);return _(c.openCreate(r))}),a()}if(i&2){let e=d(2);m("date",z(1,5,e.date$))("events",z(2,7,e.events$))("artistMap",e.artistMap)("artistPhotoMap",e.artistPhotoMap)("role",e.role)}}function yi(i,t){if(i&1){let e=x();o(0,"app-week-view",22),T(1,"async"),T(2,"async"),u("eventDropped",function(r){f(e);let c=d(2);return _(c.handleEventDropped(r))})("createFromSlot",function(r){f(e);let c=d(2);return _(c.openCreate(r))}),a()}if(i&2){let e=d(2);m("date",z(1,5,e.date$))("events",z(2,7,e.events$))("artistMap",e.artistMap)("artistPhotoMap",e.artistPhotoMap)("role",e.role)}}function Oi(i,t){if(i&1){let e=x();o(0,"app-month-view",23),T(1,"async"),T(2,"async"),u("createFromDay",function(r){f(e);let c=d(2);return _(c.openCreate(r))}),a()}if(i&2){let e=d(2);m("date",z(1,5,e.date$))("events",z(2,7,e.events$))("artistMap",e.artistMap)("artistPhotoMap",e.artistPhotoMap)("role",e.role)}}function Pi(i,t){if(i&1&&(o(0,"div",19),p(1,xi,3,9,"app-day-view",20)(2,yi,3,9,"app-week-view",20)(3,Oi,3,9,"app-month-view",21),a()),i&2){let e=t.ngIf;l(),m("ngIf",e==="day"),l(),m("ngIf",e==="week"),l(),m("ngIf",e==="month")}}function wi(i,t){if(i&1){let e=x();o(0,"mat-drawer-container",24)(1,"mat-drawer",25),se("openedChange",function(r){f(e);let c=d();return le(c.drawerOpen,r)||(c.drawerOpen=r),_(r)}),o(2,"h3"),s(3),a(),o(4,"form",26),u("ngSubmit",function(){f(e);let r=d();return _(r.onSubmitDrawer())}),o(5,"mat-form-field",27)(6,"mat-label"),s(7,"Artista"),a(),M(8,"input",28),a(),o(9,"mat-form-field",27)(10,"mat-label"),s(11,"Data"),a(),M(12,"input",29),a(),o(13,"mat-form-field",27)(14,"mat-label"),s(15,"Ora"),a(),M(16,"input",30),a(),o(17,"mat-form-field",27)(18,"mat-label"),s(19,"Durata (min)"),a(),M(20,"input",31),a(),o(21,"mat-form-field",27)(22,"mat-label"),s(23,"Descrizione"),a(),M(24,"textarea",32),a(),o(25,"div",33)(26,"button",34),u("click",function(){f(e);let r=d();return _(r.closeDrawer())}),s(27," Annulla "),a(),o(28,"button",35),s(29," Salva "),a()()()()()}if(i&2){let e=d();l(),re("opened",e.drawerOpen),l(2),v(" ",e.selectedType==="booking"?"Nuova consulenza":"Nuova sessione"," "),l(),m("formGroup",e.bookingForm)}}var Qe=class i{constructor(t){this.calendarState=t}role="client";bookingTypes=["booking"];events=[];artistMap={};artistPhotoMap={};user=null;selectedType="booking";selectedTypeChange=new N;bookingForm;initialTheme="dark";theme="dark";bookingSubmitted=new N;eventDropped=new N;view$;date$;title$;events$;drawerOpen=!1;ngOnInit(){this.view$=this.calendarState.view$,this.date$=this.calendarState.date$,this.title$=this.calendarState.title$,this.events$=this.calendarState.events$,this.theme=this.initialTheme,this.events&&this.events.length>0&&this.calendarState.setEvents(this.events)}ngOnChanges(t){t.events&&!t.events.firstChange&&this.calendarState.setEvents(this.events||[])}setView(t){this.calendarState.setView(t)}prev(){this.calendarState.prev()}next(){this.calendarState.next()}today(){this.calendarState.setToday()}openCreate(t){this.bookingForm&&(this.drawerOpen=!0,this.bookingForm.reset({type:this.selectedType,artistId:t?.artistId||"",date:t?.date||"",time:t?.time||"",duration:60,description:"",idClient:this.user?.uid??"",idProject:"",price:0,paidAmount:0,metadata:null}))}closeDrawer(){this.drawerOpen=!1}onSubmitDrawer(){if(!this.bookingForm||this.bookingForm.invalid)return;let t=this.bookingForm.value,e={type:t.type??this.selectedType,artistId:t.artistId??t.artist,date:t.date,time:t.time,duration:t.duration??60,description:t.description??"",idClient:t.idClient,idProject:t.idProject,price:t.price,paidAmount:t.paidAmount,metadata:t.metadata};this.bookingSubmitted.emit(e),this.closeDrawer()}onTypeChanged(t){this.selectedType=t,this.selectedTypeChange.emit(t)}setTheme(t){this.theme=t}handleEventDropped(t){this.eventDropped.emit(t)}static \u0275fac=function(e){return new(e||i)(b(He))};static \u0275cmp=y({type:i,selectors:[["app-calendar-v2"]],inputs:{role:"role",bookingTypes:"bookingTypes",events:"events",artistMap:"artistMap",artistPhotoMap:"artistPhotoMap",user:"user",selectedType:"selectedType",bookingForm:"bookingForm",initialTheme:"initialTheme"},outputs:{selectedTypeChange:"selectedTypeChange",bookingSubmitted:"bookingSubmitted",eventDropped:"eventDropped"},standalone:!0,features:[Z,O],decls:34,vars:16,consts:[[1,"calendar-shell",3,"ngClass"],[1,"calendar-toolbar"],[1,"left"],["mat-icon-button","",3,"click"],["mat-stroked-button","",3,"click"],[1,"toolbar-right"],[3,"value","change",4,"ngIf"],[1,"view-toggle",3,"change","value"],["value","day"],["value","week"],["value","month"],[1,"theme-toggle"],["mat-icon-button","","matTooltip","Tema chiaro",3,"click"],["mat-icon-button","","matTooltip","Tema scuro",3,"click"],["class","calendar-content",4,"ngIf"],["class","drawer-container",4,"ngIf"],[3,"change","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"calendar-content"],[3,"date","events","artistMap","artistPhotoMap","role","eventDropped","createFromSlot",4,"ngIf"],[3,"date","events","artistMap","artistPhotoMap","role","createFromDay",4,"ngIf"],[3,"eventDropped","createFromSlot","date","events","artistMap","artistPhotoMap","role"],[3,"createFromDay","date","events","artistMap","artistPhotoMap","role"],[1,"drawer-container"],["position","end","mode","over",1,"drawer-panel",3,"openedChange","opened"],[1,"drawer-form",3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","formControlName","artistId"],["matInput","","formControlName","date"],["matInput","","formControlName","time"],["matInput","","type","number","formControlName","duration"],["matInput","","rows","3","formControlName","description"],[1,"drawer-actions"],["mat-stroked-button","","type","button",3,"click"],["mat-flat-button","","color","primary","type","submit"]],template:function(e,n){e&1&&(o(0,"section",0)(1,"header",1)(2,"div",2)(3,"button",3),u("click",function(){return n.prev()}),o(4,"mat-icon"),s(5,"chevron_left"),a()(),o(6,"button",4),u("click",function(){return n.today()}),s(7," Oggi "),a(),o(8,"button",3),u("click",function(){return n.next()}),o(9,"mat-icon"),s(10,"chevron_right"),a()(),o(11,"h2"),s(12),T(13,"async"),a()(),o(14,"div",5),p(15,Mi,2,3,"mat-button-toggle-group",6),o(16,"mat-button-toggle-group",7),T(17,"async"),u("change",function(c){return n.setView(c.value)}),o(18,"mat-button-toggle",8),s(19,"Giorno"),a(),o(20,"mat-button-toggle",9),s(21,"Settimana"),a(),o(22,"mat-button-toggle",10),s(23,"Mese"),a()(),o(24,"div",11)(25,"button",12),u("click",function(){return n.setTheme("light")}),o(26,"mat-icon"),s(27,"light_mode"),a()(),o(28,"button",13),u("click",function(){return n.setTheme("dark")}),o(29,"mat-icon"),s(30,"dark_mode"),a()()()()(),p(31,Pi,4,3,"div",14),T(32,"async"),p(33,wi,30,3,"mat-drawer-container",15),a()),e&2&&(m("ngClass",n.theme),l(12),h(z(13,10,n.title$)),l(3),m("ngIf",((n.bookingTypes==null?null:n.bookingTypes.length)||0)>1),l(),m("value",z(17,12,n.view$)||"week"),l(9),ve("active",n.theme==="light"),l(3),ve("active",n.theme==="dark"),l(3),m("ngIf",z(32,14,n.view$)),l(2),m("ngIf",n.bookingForm))},dependencies:[P,J,V,D,Se,w,A,L,Q,Ht,Qt,fe,ue,Ve,Cn,bn,H,pe,ce,Ut,me,de,Ie,Ee,Ge,We,qe],styles:['@charset "UTF-8";.calendar-shell[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#121212;display:flex;flex-direction:column;transition:background .25s ease,color .25s ease;--cal-toolbar-height: 64px;--cal-row-height: 40px;--cal-day-cell-min-height: 80px}.calendar-shell.light[_ngcontent-%COMP%]{--cal-bg: #f7f7f7;--cal-card-bg: #ffffff;--cal-border: #e0e0e0;--cal-text: #222222;--cal-text-muted: #666666;--cal-slot-bg: #ffffff;--cal-slot-border: #e0e0e0;--cal-slot-hover: #f2f2f2;--cal-event-bg: #e9f4ff;--cal-event-text: #0d47a1;--cal-event-border: #bbdefb;--cal-my-event-border: #43a047;--cal-my-event-bg: #e8f5e9;background:var(--cal-bg);color:var(--cal-text)}.calendar-shell.light[_ngcontent-%COMP%]   .calendar-toolbar[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid var(--cal-border)}.calendar-shell.light[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--cal-text)}.calendar-shell.light[_ngcontent-%COMP%]   .calendar-content[_ngcontent-%COMP%]{background:var(--cal-bg)}.calendar-shell.light[_ngcontent-%COMP%]   .drawer-panel[_ngcontent-%COMP%]{background:#fff;color:var(--cal-text);border-left:1px solid var(--cal-border)}.calendar-shell.dark[_ngcontent-%COMP%]{--cal-bg: #121212;--cal-card-bg: #181818;--cal-border: #2b2b2b;--cal-text: #f5f5f5;--cal-text-muted: #aaaaaa;--cal-slot-bg: #202020;--cal-slot-border: #2b2b2b;--cal-slot-hover: #262626;--cal-event-bg: #2c2c2c;--cal-event-text: #ffffff;--cal-event-border: #3a3a3a;--cal-my-event-border: #be9045;--cal-my-event-bg: rgba(190, 144, 69, .16);background:var(--cal-bg);color:var(--cal-text)}.calendar-shell.dark[_ngcontent-%COMP%]   .calendar-toolbar[_ngcontent-%COMP%]{background:#181818;border-bottom:1px solid rgba(255,255,255,.06)}.calendar-shell.dark[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--cal-text)}.calendar-shell.dark[_ngcontent-%COMP%]   .calendar-content[_ngcontent-%COMP%]{flex:1 1 auto;padding:1rem;min-height:0;overflow-y:auto}.calendar-shell.dark[_ngcontent-%COMP%]   .drawer-panel[_ngcontent-%COMP%]{background:#181818;color:var(--cal-text);border-left:1px solid rgba(255,255,255,.06)}.calendar-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;gap:1rem}.calendar-toolbar[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.calendar-toolbar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:600;margin:0}.calendar-toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.calendar-toolbar[_ngcontent-%COMP%]   .theme-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#1976d2!important;color:#fff!important}.calendar-content[_ngcontent-%COMP%]{flex:1;padding:1rem}.drawer-container[_ngcontent-%COMP%]{height:0}.drawer-panel[_ngcontent-%COMP%]{width:360px;padding:1.25rem;display:flex;flex-direction:column}.drawer-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-weight:600}.drawer-panel[_ngcontent-%COMP%]   .drawer-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.drawer-panel[_ngcontent-%COMP%]   .drawer-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1rem}@media (max-width: 768px){.calendar-shell[_ngcontent-%COMP%]{max-height:75vh;--cal-row-height: 36px;--cal-day-cell-min-height: 64px}.calendar-toolbar[_ngcontent-%COMP%]{padding:.5rem;flex-direction:column;align-items:flex-start}.calendar-toolbar[_ngcontent-%COMP%]   .toolbar-right[_ngcontent-%COMP%]{width:100%;justify-content:space-between;flex-wrap:wrap}}']})};function ki(i,t){i&1&&(o(0,"h1",3),s(1,"Perch\xE9 \xE8 richiesto un acconto?"),a())}function Ii(i,t){i&1&&(o(0,"div",4)(1,"p"),s(2,"Per garantire la tua prenotazione, chiediamo un acconto simbolico di 50\u202F\u20AC."),a(),o(3,"p"),s(4,"Questo ci consente di riservare l\u2019orario scelto esclusivamente per te."),a()())}function Ei(i,t){if(i&1){let e=x();o(0,"div",5)(1,"button",6),u("click",function(){f(e);let r=d();return _(r.cancel())}),s(2,"Annulla"),a(),o(3,"button",7),u("click",function(){f(e);let r=d();return _(r.next())}),s(4,"Continua"),a()()}}function Ti(i,t){i&1&&(o(0,"h1",3),s(1,"Conferma Acconto \u2013 50\u202F\u20AC"),a())}function Di(i,t){if(i&1&&(o(0,"div",4)(1,"p")(2,"strong"),s(3,"Data:"),a(),s(4),a(),o(5,"p")(6,"strong"),s(7,"Artista:"),a(),s(8),a(),o(9,"p")(10,"strong"),s(11,"Email:"),a(),s(12),a(),o(13,"p"),s(14,"Premendo conferma, simulerai il versamento dell\u2019acconto."),a()()),i&2){let e=d();l(4),Ot(" ",e.data.date," \u2013 ",e.data.time,""),l(4),v(" ",e.data.artist,""),l(4),v(" ",e.data.email,"")}}function Fi(i,t){if(i&1){let e=x();o(0,"div",5)(1,"button",6),u("click",function(){f(e);let r=d();return _(r.back())}),s(2,"Indietro"),a(),o(3,"button",7),u("click",function(){f(e);let r=d();return _(r.confirm())}),s(4,"Conferma e Paga"),a()()}}var Ye=class i{constructor(t,e){this.dialogRef=t;this.data=e}step=1;next(){this.step=2}back(){this.step=1}confirm(){this.dialogRef.close("confirmed")}cancel(){this.dialogRef.close(null)}static \u0275fac=function(e){return new(e||i)(b(tn),b(nn))};static \u0275cmp=y({type:i,selectors:[["app-payment-confirmation-dialog"]],standalone:!0,features:[O],decls:6,vars:6,consts:[["mat-dialog-title","",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","",4,"ngIf"],["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(e,n){e&1&&p(0,ki,2,0,"h1",0)(1,Ii,5,0,"div",1)(2,Ei,5,0,"div",2)(3,Ti,2,0,"h1",0)(4,Di,15,4,"div",1)(5,Fi,5,0,"div",2),e&2&&(m("ngIf",n.step===1),l(),m("ngIf",n.step===1),l(),m("ngIf",n.step===1),l(),m("ngIf",n.step===2),l(),m("ngIf",n.step===2),l(),m("ngIf",n.step===2))},dependencies:[P,D,w,L,an,ln,rn,H],styles:["mat-dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px;font-size:.95rem;line-height:1.4}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px}"]})};var Ai=()=>["booking"],Ze=class i{constructor(t,e,n,r,c,g,C,S){this.bookingService=t;this.staffService=e;this.authService=n;this.snackbar=r;this.dialog=c;this.router=g;this.fb=C;this.sessionService=S;console.log("[BookingList] constructor, formGroup creato"),this.formGroup=this.fb.group({type:["booking",k.required],artistId:["",k.required],date:["",k.required],time:["",k.required],duration:[60,k.required],description:["",k.required],idClient:[""],idProject:[""],price:[0],paidAmount:[0],metadata:[null]})}events=[];artistMap={};artistPhotoMap={};user;formGroup;loading=!0;userEffect=we(()=>{let t=this.authService.userSig();t&&(this.user=t)});ngOnInit(){console.log("[BookingList] ngOnInit, component inizializzato"),this.loading=!0,this.staffService.getAllStaff().subscribe(t=>{this.artistMap=t.reduce((e,n)=>at(ot({},e),{[n.id]:n.name}),{}),this.artistPhotoMap=t.reduce((e,n)=>at(ot({},e),{[n.id]:n.photoUrl||""}),{})}),ye([this.bookingService.getAllBookings(),this.sessionService.getAll()]).subscribe({next:([t,e])=>{let n=(t??[]).map(c=>{let g=new Date(c.start),C=c.duration??30,S=new Date(g.getTime()+C*6e4),F=c.start.split("T")[0],G=c.title??`${this.artistMap[c.idArtist]??"Tattoo"} - consulenza`;return{id:c.id??"",type:"booking",title:G,date:F,start:c.start,end:S.toISOString(),artistId:c.idArtist??"",artistName:this.artistMap[c.idArtist]||"",metadata:{description:c.description??"",isMine:!!(c.idClient&&this.user&&c.idClient===this.user.uid),duration:C,slotCount:Math.ceil(C/30),count:1}}}),r=(e??[]).map(c=>{let g=new Date(c.start),C=new Date(c.end),S=Math.max(1,Math.round((+C-+g)/6e4)),F=c.start.split("T")[0];return{id:c.id??"",type:"session",title:c.title??"Sessione",date:F,start:c.start,end:c.end,artistId:c.idArtist??"",artistName:this.artistMap[c.idArtist]||"",metadata:{description:"Seduta",duration:S,slotCount:Math.ceil(S/30),count:1}}});this.events=[...n,...r].sort((c,g)=>+new Date(c.start)-+new Date(g.start)),this.loading=!1},error:()=>{this.snackbar.open("Errore nel caricamento degli eventi","Chiudi",{duration:4e3}),this.loading=!1}})}onBookingSubmitted(t){return oe(this,null,function*(){try{if(!this.user?.uid){this.snackbar.open("Utente non autenticato.","Chiudi",{duration:2500});return}if(!t?.artistId){this.snackbar.open("Seleziona un artista.","Chiudi",{duration:2500});return}let e=new Date(`${t.date}T${t.time}`),n=e.toISOString(),r=Number.isFinite(t.duration)?t.duration:30,c=new Date(e.getTime()+r*6e4).toISOString(),g=t.date,C={start:n,end:c,idClient:this.user.uid||"",idArtist:t.artistId,title:`${this.user.name??"Cliente"} - Tattoo`,description:t.description??"",eta:null,createAt:new Date().toISOString(),updateAt:new Date().toISOString(),price:Number.isFinite(t.price)?t.price:0,paidAmount:Number.isFinite(t.paidAmount)?t.paidAmount:0};if((yield this.dialog.open(Ye,{width:"420px",data:{date:e.toLocaleDateString("it-IT"),time:t.time,artist:this.artistMap[C.idArtist]??"",email:this.user.email}}).afterClosed().toPromise())!=="confirmed"){this.snackbar.open("Prenotazione annullata.","Chiudi",{duration:2e3});return}let F=yield this.bookingService.addDraft(C),G={id:F,type:"booking",title:C.title,date:g,start:n,end:c,artistId:C.idArtist,artistName:this.artistMap[C.idArtist]??"",metadata:{description:C.description,isMine:C.idClient===this.user.uid,duration:r,slotCount:Math.ceil(r/30),count:1}};this.events=[...this.events,G],this.snackbar.open("Prenotazione salvata con successo!","OK",{duration:3e3}),this.router.navigate(["/bookings",F])}catch(e){console.error("\u274C Errore salvataggio:",e),this.snackbar.open("Errore durante il salvataggio della prenotazione.","Chiudi",{duration:4e3})}})}static \u0275fac=function(e){return new(e||i)(b(Ne),b(Fn),b(R),b(un),b(on),b(q),b(ge),b(Vn))};static \u0275cmp=y({type:i,selectors:[["app-booking-list"]],standalone:!0,features:[O],decls:4,vars:10,consts:[[1,"booking-list-page"],[2,"color","white","padding","4px"],[3,"bookingSubmitted","events","artistMap","artistPhotoMap","user","bookingForm","bookingTypes","role","initialTheme"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"p",1),s(2),a(),o(3,"app-calendar-v2",2),u("bookingSubmitted",function(c){return n.onBookingSubmitted(c)}),a()()),e&2&&(l(2),v(" BookingList \u2013 eventi: ",(n.events==null?null:n.events.length)||0," "),l(),m("events",n.events)("artistMap",n.artistMap)("artistPhotoMap",n.artistPhotoMap)("user",n.user)("bookingForm",n.formGroup)("bookingTypes",Oe(9,Ai))("role","client")("initialTheme","light"))},dependencies:[P,w,H,Qe],styles:['@charset "UTF-8";.booking-list-page[_ngcontent-%COMP%]{padding:1rem;background:#121212;color:#f2f2f2}']})};function zi(i,t){if(i&1&&(o(0,"h3"),s(1),a()),i&2){let e=d().$implicit;l(),v(" ",e.title," ")}}function Ni(i,t){if(i&1&&(o(0,"p"),s(1),a()),i&2){let e=d().$implicit;l(),v(" ",e.caption," ")}}function Li(i,t){if(i&1&&(o(0,"article",25),M(1,"img",26)(2,"div",27),o(3,"div",28),p(4,zi,2,1,"h3",29)(5,Ni,2,1,"p",29),a()()),i&2){let e=t.$implicit;l(),m("src",e.src,te)("alt",e.alt),l(3),m("ngIf",e.title),l(),m("ngIf",e.caption)}}function Ri(i,t){if(i&1){let e=x();o(0,"button",30),u("click",function(){let r=f(e).index,c=d();return _(c.goTo(r))}),o(1,"span",31),s(2),a()()}if(i&2){let e=t.index,n=d();ve("is-active",e===n.activeIndex),l(2),v("Vai alla slide ",e+1,"")}}function $i(i,t){if(i&1&&(o(0,"mat-card",32)(1,"div",33),M(2,"img",26),a(),o(3,"div",34)(4,"span",35),s(5),a(),o(6,"span",36),s(7),a(),o(8,"div",37)(9,"mat-chip-set")(10,"mat-chip"),s(11),a()()()()()),i&2){let e=t.$implicit;l(2),yt("src","/personale/",e.photo,"",te),m("alt",e.name),l(3),h(e.name),l(2),h(e.role),l(4),h(e.style)}}var Je=class i{slides=[{src:"assets/rebis/carousel/carousel-1.jpg",alt:"Tatuatore al lavoro in studio",title:"Studio Rebis",caption:"Luci basse, blackwork e attenzione totale ai dettagli."},{src:"assets/rebis/carousel/carousel-2.jpg",alt:"Dettaglio di un tatuaggio blackwork",title:"Blackwork & Fine Line",caption:"Linee pulite, contrasti netti e progetti su misura."},{src:"assets/rebis/carousel/carousel-3.jpg",alt:"Cliente durante una sessione",title:"Ogni sessione \xE8 unica",caption:"Studiamo posizionamento, forme e guarigione nel tempo."}];team=[{name:"Sara Pushi",role:"Tatuatrice - Titolare",style:"Blackwork \xB7 Fine Line",photo:"1.jpg"},{name:"Michele",role:"Tatuatore",style:"Realismo \xB7 Coperture",photo:"2.jpg"},{name:"Lorenzo",role:"Tatuatore",style:"Ornamentale \xB7 Geometrico",photo:"3.jpg"}];activeIndex=0;autoPlayDelay=5e3;intervalId;isPaused=!1;ngOnInit(){this.startAutoPlay()}ngOnDestroy(){this.stopAutoPlay()}startAutoPlay(){this.stopAutoPlay(),this.intervalId=setInterval(()=>{!this.isPaused&&this.slides.length>1&&this.next()},this.autoPlayDelay)}stopAutoPlay(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}next(){this.activeIndex=(this.activeIndex+1)%this.slides.length}prev(){this.activeIndex=(this.activeIndex-1+this.slides.length)%this.slides.length}goTo(t){this.activeIndex=t,this.restartAutoPlay()}onCarouselEnter(){this.isPaused=!0}onCarouselLeave(){this.isPaused=!1}restartAutoPlay(){this.isPaused=!1,this.startAutoPlay()}getTransform(){return`translateX(-${this.activeIndex*100}%)`}openInstagram(){window.open("https://www.instagram.com/rebis_tattoo","_blank")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-chi-siamo"]],standalone:!0,features:[O],decls:48,vars:5,consts:[[1,"about-page","mat-typography"],[1,"about-hero"],[1,"eyebrow"],[1,"intro"],[1,"highlight"],[1,"cta-row"],["mat-flat-button","","color","primary",1,"btn-primary"],["mat-outlined-button","",1,"btn-ghost"],[1,"about-carousel",3,"mouseenter","mouseleave"],[1,"carousel-inner"],[1,"carousel-track"],["class","carousel-slide",4,"ngFor","ngForOf"],[1,"carousel-actions"],[1,"carousel-dots"],["type","button",3,"is-active","click",4,"ngFor","ngForOf"],[1,"carousel-nav"],["mat-icon-button","","aria-label","Slide precedente",3,"click"],["mat-icon-button","","aria-label","Slide successiva",3,"click"],[1,"about-team"],[1,"team-header"],[1,"team-grid"],["class","team-card",4,"ngFor","ngForOf"],[1,"instagram-callout"],[1,"text"],["mat-flat-button","",1,"btn-ig",3,"click"],[1,"carousel-slide"],["loading","lazy",3,"src","alt"],[1,"slide-gradient"],[1,"slide-content"],[4,"ngIf"],["type","button",3,"click"],[1,"visually-hidden"],[1,"team-card"],[1,"avatar"],[1,"meta"],[1,"name"],[1,"role"],[1,"style-chip"]],template:function(e,n){e&1&&(o(0,"section",0)(1,"header",1)(2,"p",2),s(3,"Studio di tatuaggi \xB7 Sassari"),a(),o(4,"h1"),s(5,"Chi siamo"),a(),o(6,"p",3),s(7," Rebis Tattoo \xE8 uno studio underground dedicato al blackwork, al fine line e ai progetti su misura. Ogni tatuaggio nasce da conversazioni reali, reference condivise e attenzione maniacale ai dettagli. "),a(),o(8,"p",4),s(9," Non facciamo tatuaggi in serie: studiamo posizionamento, forme e guarigione nel tempo per creare qualcosa che abbia senso sul tuo corpo oggi e domani. "),a(),o(10,"div",5)(11,"button",6),s(12," Prenota una consulenza "),a(),o(13,"button",7),s(14," Scopri il nostro processo "),a()()(),o(15,"section",8),u("mouseenter",function(){return n.onCarouselEnter()})("mouseleave",function(){return n.onCarouselLeave()}),o(16,"mat-card")(17,"div",9)(18,"div",10),p(19,Li,6,4,"article",11),a()(),o(20,"div",12)(21,"div",13),p(22,Ri,3,3,"button",14),a(),o(23,"div",15)(24,"button",16),u("click",function(){return n.prev()}),o(25,"mat-icon"),s(26,"chevron_left"),a()(),o(27,"button",17),u("click",function(){return n.next()}),o(28,"mat-icon"),s(29,"chevron_right"),a()()()()()(),o(30,"section",18)(31,"div",19)(32,"div")(33,"h2"),s(34,"Il team"),a()(),o(35,"p"),s(36," Siamo tatuatori con background diversi ma con la stessa ossessione: linee pulite, composizioni studiate e progetti che invecchiano bene sulla pelle. "),a()(),o(37,"div",20),p(38,$i,12,6,"mat-card",21),a()(),o(39,"section",22)(40,"mat-card")(41,"div",23)(42,"strong"),s(43,"Vedi i lavori guariti e le cover pi\xF9 recenti"),a(),M(44,"br"),s(45," Segui il nostro studio su Instagram per vedere il lato reale di ogni progetto. "),a(),o(46,"button",24),u("click",function(){return n.openInstagram()}),s(47," Apri Instagram "),a()()()()),e&2&&(l(18),Mt("transform",n.getTransform()),l(),m("ngForOf",n.slides),l(3),m("ngForOf",n.slides),l(16),m("ngForOf",n.team))},dependencies:[P,V,D,w,A,L,Q,K,Ae,Be],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background:#050508;color:#fff}.about-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:4rem 1.5rem 5rem;display:flex;flex-direction:column;gap:3.5rem}@media (max-width: 768px){.about-page[_ngcontent-%COMP%]{padding:3rem 1.25rem 4.5rem;gap:3rem}}.about-hero[_ngcontent-%COMP%]{max-width:760px;margin:0 auto}.about-hero[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{font-size:.8rem;letter-spacing:.18em;text-transform:uppercase;color:#9ca3af;margin-bottom:.75rem}.about-hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(2.4rem,5.5vw,3.3rem);letter-spacing:.12em;text-transform:uppercase;margin-bottom:1.25rem}.about-hero[_ngcontent-%COMP%]   .intro[_ngcontent-%COMP%]{font-size:1rem;line-height:1.7;color:#9ca3af;margin-bottom:1.5rem}.about-hero[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.6;color:#e5e7eb;border-left:2px solid rgba(229,231,235,.3);padding-left:1rem}.about-hero[_ngcontent-%COMP%]   .cta-row[_ngcontent-%COMP%]{margin-top:2rem;display:flex;flex-wrap:wrap;gap:.75rem}@media (max-width: 640px){.about-hero[_ngcontent-%COMP%]   .cta-row[_ngcontent-%COMP%]{flex-direction:column}}.about-hero[_ngcontent-%COMP%]   .mat-mdc-unelevated-button[_ngcontent-%COMP%], .about-hero[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]{border-radius:999px;padding-inline:1.6rem;font-size:.95rem;font-weight:500}.about-hero[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-image:linear-gradient(135deg,#f56040,#f77737,#c13584,#e1306c,#5851db);background-size:170% 170%;color:#fff!important;border:none}.about-hero[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{filter:brightness(1.02);background-position:90% 10%}.about-hero[_ngcontent-%COMP%]   .btn-ghost[_ngcontent-%COMP%]{border-color:#ffffff0f!important;color:#fff!important;background:#ffffff05}.about-hero[_ngcontent-%COMP%]   .btn-ghost[_ngcontent-%COMP%]:hover{background:#ffffff0f;border-color:#ffffff2e!important}.about-carousel[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#18192a,#101118 55%,#050508);border-radius:1.75rem;border:1px solid rgba(255,255,255,.06);padding:1.25rem 1.25rem 1.5rem}@media (max-width: 640px){.about-carousel[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%]{border-radius:1.3rem;padding:1rem}}.carousel-inner[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:1.25rem}.carousel-track[_ngcontent-%COMP%]{display:flex;width:100%;transition:transform .55s cubic-bezier(.22,.61,.36,1)}.carousel-slide[_ngcontent-%COMP%]{min-width:100%;position:relative;aspect-ratio:16/9;background:#000;overflow:hidden}.carousel-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block;filter:saturate(1.05) contrast(1.1)}.carousel-slide[_ngcontent-%COMP%]   .slide-gradient[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(0deg,rgba(0,0,0,.9),transparent 45%)}.carousel-slide[_ngcontent-%COMP%]   .slide-content[_ngcontent-%COMP%]{position:absolute;left:1.4rem;right:1.4rem;bottom:1.4rem;display:flex;flex-direction:column;gap:.25rem}.carousel-slide[_ngcontent-%COMP%]   .slide-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.carousel-slide[_ngcontent-%COMP%]   .slide-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:#9ca3af;max-width:26rem}.carousel-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:.9rem;gap:.75rem}.carousel-dots[_ngcontent-%COMP%]{display:flex;gap:.45rem}.carousel-dots[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:9px;height:9px;border-radius:999px;border:none;padding:0;background:#ffffff2e;cursor:pointer;transition:background .2s ease,transform .2s ease,width .2s ease}.carousel-dots[_ngcontent-%COMP%]   button.is-active[_ngcontent-%COMP%]{width:22px;background-image:linear-gradient(135deg,#f56040,#f77737,#c13584,#e1306c,#5851db);background-size:200% 200%;transform:translateY(-1px)}.carousel-nav[_ngcontent-%COMP%]{display:flex;gap:.4rem}.carousel-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#00000059;border-radius:999px}.about-team[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;gap:1.5rem;margin-bottom:1.75rem}.about-team[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem;letter-spacing:.12em;text-transform:uppercase}.about-team[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#9ca3af;max-width:380px}@media (max-width: 768px){.about-team[_ngcontent-%COMP%]   .team-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}.about-team[_ngcontent-%COMP%]   .team-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:1.25rem}@media (max-width: 920px){.about-team[_ngcontent-%COMP%]   .team-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (max-width: 640px){.about-team[_ngcontent-%COMP%]   .team-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.about-team[_ngcontent-%COMP%]   .mat-mdc-card.team-card[_ngcontent-%COMP%]{background:#101118;border-radius:1.25rem;border:1px solid rgba(255,255,255,.06);padding:.9rem .9rem 1.1rem;display:flex;flex-direction:column;gap:.55rem;transition:transform .18s ease,box-shadow .18s ease,border-color .18s ease}.about-team[_ngcontent-%COMP%]   .mat-mdc-card.team-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 18px 45px #00000073;border-color:#ffffff1f}.about-team[_ngcontent-%COMP%]   .mat-mdc-card.team-card[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:100%;border-radius:.9rem;overflow:hidden;aspect-ratio:4/5;background:#000}.about-team[_ngcontent-%COMP%]   .mat-mdc-card.team-card[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.about-team[_ngcontent-%COMP%]   .mat-mdc-card.team-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.15rem}.about-team[_ngcontent-%COMP%]   .mat-mdc-card.team-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.about-team[_ngcontent-%COMP%]   .mat-mdc-card.team-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:.85rem;color:#9ca3af}.about-team[_ngcontent-%COMP%]   .mat-mdc-card.team-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .style-chip[_ngcontent-%COMP%]{margin-top:.3rem;align-self:flex-start}.about-team[_ngcontent-%COMP%]   .mat-mdc-card.team-card[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .style-chip[_ngcontent-%COMP%]   .mat-mdc-chip[_ngcontent-%COMP%]{background:#ffffff08;color:#fff;font-size:.78rem;letter-spacing:.12em;text-transform:uppercase}.instagram-callout[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%]{border-radius:1.25rem;border:1px solid rgba(255,255,255,.06);background:radial-gradient(circle at top left,#5851db42,#101118 50%,#050508);padding:1.15rem 1.2rem;display:flex;justify-content:space-between;align-items:center;gap:1.25rem}@media (max-width: 640px){.instagram-callout[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}.instagram-callout[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.9rem;color:#9ca3af}.instagram-callout[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff}.instagram-callout[_ngcontent-%COMP%]   .btn-ig[_ngcontent-%COMP%]{border-radius:999px;background-image:linear-gradient(135deg,#f56040,#f77737,#c13584,#e1306c,#5851db);background-size:180% 180%;color:#fff!important;padding-inline:1.4rem;font-size:.85rem;font-weight:500}.instagram-callout[_ngcontent-%COMP%]   .btn-ig[_ngcontent-%COMP%]:hover{background-position:90% 10%;filter:brightness(1.05)}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}"]})};var Ke=class i{constructor(t,e){this.fb=t;this.lang=e}contactForm;ngOnInit(){this.contactForm=this.fb.group({name:["",[k.required,k.minLength(2)]],email:["",[k.required,k.email]],message:["",[k.required,k.minLength(10)]]})}onSubmit(){this.contactForm.valid?(console.log("Messaggio inviato:",this.contactForm.value),alert("Messaggio inviato con successo!"),this.contactForm.reset()):this.contactForm.markAllAsTouched()}static \u0275fac=function(e){return new(e||i)(b(ge),b(ze))};static \u0275cmp=y({type:i,selectors:[["app-contatti"]],standalone:!0,features:[O],decls:42,vars:16,consts:[[1,"contacts-section"],[1,"contacts-header"],[1,"chatbot-suggestion"],["mat-stroked-button","","color","accent","routerLink","/chatbot"],[1,"contacts-grid"],[1,"info-card"],[1,"cta-consulenza"],["mat-raised-button","","color","accent","routerLink","/bookings"]],template:function(e,n){e&1&&(o(0,"section",0)(1,"div",1)(2,"h1"),s(3),T(4,"uppercase"),a(),o(5,"p"),s(6),a()(),o(7,"div",2)(8,"p"),s(9),a(),o(10,"a",3),s(11),a()(),o(12,"div",4)(13,"mat-card",5)(14,"mat-card-content")(15,"h3"),s(16),a(),o(17,"p")(18,"mat-icon"),s(19,"location_on"),a(),s(20),a(),o(21,"p")(22,"mat-icon"),s(23,"phone"),a(),s(24),a(),o(25,"p")(26,"mat-icon"),s(27,"email"),a(),s(28),a(),o(29,"h3"),s(30),a(),o(31,"p"),s(32),a(),o(33,"p"),s(34),a(),o(35,"p"),s(36),a()(),o(37,"div",6)(38,"h2"),s(39),a(),o(40,"a",7),s(41),a()()()()()),e&2&&(l(3),h(z(4,14,n.lang.t("contact.title"))),l(3),h(n.lang.t("contact.subtitle")),l(3),h(n.lang.t("contact.chatbot.question")),l(2),v(" ",n.lang.t("contact.chatbot.cta")," "),l(5),h(n.lang.t("contact.locationTitle")),l(4),v(" ",n.lang.t("contact.address"),""),l(4),v(" ",n.lang.t("contact.phone"),""),l(4),v(" ",n.lang.t("contact.email"),""),l(2),h(n.lang.t("contact.hoursTitle")),l(2),h(n.lang.t("contact.hours.mondayFriday")),l(2),h(n.lang.t("contact.hours.saturday")),l(2),h(n.lang.t("contact.hours.sunday")),l(3),h(n.lang.t("contact.ctaTitle")),l(2),v(" ",n.lang.t("contact.ctaButton")," "))},dependencies:[w,A,De,K,mn,P,Tt,Te,H,ke],styles:[".contacts-section[_ngcontent-%COMP%]{color:#fff;padding:8vh 1.5rem;font-family:Barlow Semi Condensed,sans-serif}.contacts-section[_ngcontent-%COMP%]   .contacts-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.contacts-section[_ngcontent-%COMP%]   .contacts-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#000;font-size:2.8rem;margin-bottom:.5rem}.contacts-section[_ngcontent-%COMP%]   .contacts-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#787878;font-size:1.1rem}.contacts-section[_ngcontent-%COMP%]   .contacts-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}@media (min-width: 900px){.contacts-section[_ngcontent-%COMP%]   .contacts-grid[_ngcontent-%COMP%]{flex-direction:row}}.contacts-section[_ngcontent-%COMP%]   .contacts-grid[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{background-color:transparent;flex:1;box-shadow:0 6px 24px #0006;border:1px solid black33}.contacts-section[_ngcontent-%COMP%]   .contacts-grid[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.contacts-section[_ngcontent-%COMP%]   .contacts-grid[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.contacts-section[_ngcontent-%COMP%]   .contacts-grid[_ngcontent-%COMP%]   .contact-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-start;background-color:#000;color:#fff;font-weight:700}.contacts-section[_ngcontent-%COMP%]   .contacts-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000;margin-top:0}.contacts-section[_ngcontent-%COMP%]   .contacts-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:.5rem;color:#000}.contacts-section[_ngcontent-%COMP%]   .contacts-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;color:#787878}.cta-consulenza[_ngcontent-%COMP%]{margin-top:3rem;text-align:center;background-color:#111;padding:2rem;border-radius:12px;box-shadow:0 4px 20px #0006}.cta-consulenza[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:1.5rem;font-size:1.6rem}.cta-consulenza[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#fff;color:#000;font-weight:700}.chatbot-suggestion[_ngcontent-%COMP%]{margin-top:2rem;text-align:center;padding:1.5rem;border:1px solid black55;border-radius:12px;background:#ffffff08}.chatbot-suggestion[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#787878;margin-bottom:1rem;font-size:1rem}.chatbot-suggestion[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;border-color:#000}"]})};var Nn=()=>{let i=ae(R),t=ae(q),e=i.userSig();return e?e.role!=="client"&&e.role!=="admin"?t.createUrlTree(["/"]):!0:t.createUrlTree(["/login"])};var Xe=class i{constructor(t,e){this.auth=t;this.router=e}canActivate(){let t=this.auth.userSig();return t?t.role!=="admin"?this.router.createUrlTree(["/access-denied"]):!0:(localStorage.setItem("pre-log","/admin"),this.router.createUrlTree(["/login"]))}static \u0275fac=function(e){return new(e||i)(he(R),he(q))};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ln=[{path:"login",component:Le},{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadChildren:()=>import("./chunk-LSVXEPDV.js").then(i=>i.HomeModule)},{path:"servizi",component:Ue},{path:"progetti",loadChildren:()=>import("./chunk-PIM36RIE.js").then(i=>i.ProjectsModule)},{path:"bookings",component:Ze},{path:"chi-siamo",component:Je},{path:"contatti",component:Ke},{path:"dashboard",loadChildren:()=>import("./chunk-O732JODQ.js").then(i=>i.ClientsModule),canActivate:[Nn]},{path:"admin",loadChildren:()=>import("./chunk-UIDMVXCU.js").then(i=>i.AdminModule),canActivate:[Xe]},{path:"bookings/:id",loadComponent:()=>import("./chunk-SGNGQ5W5.js").then(i=>i.BookingDetailComponent)},{path:"**",redirectTo:"/home"}];var ji="@",Ui=(()=>{class i{constructor(e,n,r,c,g){this.doc=e,this.delegate=n,this.zone=r,this.animationType=c,this.moduleImpl=g,this._rendererFactoryPromise=null,this.scheduler=ae(vt,{optional:!0}),this.loadingSchedulerFn=ae(Gi,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-VUJGHSPF.js").then(r=>r),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(e):n=e(),n.catch(r=>{throw new pt(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:c})=>{this._engine=r(this.animationType,this.doc);let g=new c(this.delegate,this._engine,this.zone);return this.delegate=g,g})}createRenderer(e,n){let r=this.delegate.createRenderer(e,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let c=new ct(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(g=>{let C=g.createRenderer(e,n);c.use(C),this.scheduler?.notify(10)}).catch(g=>{c.use(r)}),c}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(n){ht()}}static{this.\u0275prov=Y({token:i,factory:i.\u0275fac})}}return i})(),ct=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,n,r){this.delegate.insertBefore(t,e,n,r)}removeChild(t,e,n){this.delegate.removeChild(t,e,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,n)),this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,n)),this.delegate.listen(t,e,n)}shouldReplay(t){return this.replay!==null&&t.startsWith(ji)}},Gi=new gt("");function Rn(i="animations"){return bt("NgAsyncAnimations"),ut([{provide:Ct,useFactory:(t,e,n)=>new Ui(t,e,n,i),deps:[It,At,ft]},{provide:_t,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var $n={providers:[kt({eventCoalescing:!0}),Vt(),Nt(Ln,Lt()),Rn(),Mn(()=>xn({projectId:"rebis-tattoo-55816",appId:"1:70352364616:web:24a6df01d24f6b4947647d",databaseURL:"https://rebis-tattoo-55816-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"rebis-tattoo-55816.firebasestorage.app",apiKey:"AIzaSyDFOFTJ9p60YeoVdLGo8ZfuaOOaUpgAP5E",authDomain:"rebis-tattoo-55816.firebaseapp.com",messagingSenderId:"70352364616",measurementId:"G-1HW9SPJ1CN"})),yn(()=>On()),Pn(()=>wn()),kn(()=>In())]};var Wi=["scrollContainer"],qi=["bottomAnchor"];function Hi(i,t){if(i&1){let e=x();o(0,"mat-chip",20),u("click",function(){let r=f(e).$implicit,c=d(3);return _(c.onChipClick(r))})("keydown.enter",function(){let r=f(e).$implicit,c=d(3);return _(c.onChipClick(r))}),s(1),a()}if(i&2){let e=t.$implicit;l(),v(" ",e," ")}}function Qi(i,t){if(i&1&&(o(0,"div",17)(1,"mat-chip-set",18),p(2,Hi,2,1,"mat-chip",19),a()()),i&2){let e=d().$implicit;l(2),m("ngForOf",e.chips)}}function Yi(i,t){if(i&1&&(I(0),o(1,"div",14)(2,"mat-card",15),s(3),a(),p(4,Qi,3,1,"div",16),a(),E()),i&2){let e=t.$implicit,n=t.index,r=d();l(),m("ngClass",e.from),l(),m("ngClass",e.from),l(),v(" ",e.text," "),l(),m("ngIf",e.from==="bot"&&n===r.messages.length-1&&(e.chips==null?null:e.chips.length))}}function Zi(i,t){i&1&&(o(0,"mat-card",21),s(1," \u{1F916} sta scrivendo... "),a())}function Ji(i,t){if(i&1){let e=x();o(0,"button",22),u("click",function(){f(e);let r=d();return _(r.scrollToBottom())}),o(1,"mat-icon"),s(2,"arrow_downward"),a()()}}var et=class i{constructor(t,e,n,r){this.chatService=t;this.auth=e;this.router=n;this.bookingService=r;this.startConversation()}messages=[];inputText="";typing=!1;isUserAtBottom=!0;chatId=null;userId=null;userName;scrollContainer;bottomAnchor;ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){this.bottomAnchor?.nativeElement?.scrollIntoView({behavior:"smooth"})}onScroll(){let t=this.scrollContainer.nativeElement,e=150;this.isUserAtBottom=t.scrollTop+t.clientHeight>=t.scrollHeight-e}trackByIndex=t=>t;addUserMessage(t){this.messages.push({text:t,from:"user"}),this.saveMessage("user",t)}addBotMessage(t,e){this.messages.push({text:t,from:"bot",chips:e?.length?e:null}),this.saveMessage("bot",t,e||void 0)}saveMessage(t,e,n){if(!this.chatId||!this.userId)return;let r={from:t,text:e,timestamp:new Date().toISOString(),chips:n??null};this.chatService.addMessage(this.chatId,r).catch(c=>console.error("saveMessage ERROR",c))}listenToChat(t){this.chatService.getMessages(t).subscribe(e=>{this.messages=e.map(n=>({text:n.text,from:n.from,chips:n.chips||null})),this.scrollToBottom(),this.messages.length===0&&this.addBotMessage("\u{1F7E2} Posso aiutarti con assistenza o guidarti nella prenotazione. Vuoi iniziare?",["Prenotazione guidata","Apri booking","\u2139\uFE0F Info"])})}startConversation(){let t=this.auth.userSig();if(t){this.userId=t.uid,this.userName=t.name||void 0;let e=t.email||t.uid;this.chatService.createOrReuseChatByEmail(e).then(n=>{this.chatId=n,this.listenToChat(n)})}else{let e=prompt("Inserisci la tua email per iniziare la conversazione:");if(!e)return;this.userId=null,this.userName=void 0,this.chatService.createOrReuseChatByEmail(e).then(n=>{this.chatId=n,this.listenToChat(n)})}}sendMessage(){return oe(this,null,function*(){let t=this.inputText.trim();if(!t||!this.chatId)return;this.addUserMessage(t),this.inputText="",this.typing=!0;let e=this.messages.map(r=>({from:r.from,text:r.text,timestamp:new Date().toISOString(),chips:r.chips||void 0})),n=yield this.chatService.replyWithPlan(this.chatId,e);if(this.typing=!1,this.addBotMessage(n.message,n.chips),n.action?.type==="booking-draft"){let r=n.action.draft,c=this.auth.userSig();if(!(c?.email||prompt("Inserisci un'email per confermare la prenotazione:"))||!r?.date||!r?.time||!r?.artistId){this.addBotMessage("\u274C Impossibile completare la prenotazione. Dati insufficienti.");return}try{let C=c?.uid||`anonimo-${this.chatId}`;yield this.bookingService.addDraftFromChat(r,{idClient:C,clientName:this.userName??"Utente Chat"}),this.addBotMessage("\u2705 Prenotazione registrata con successo! Puoi vedere i dettagli nella tua area personale.",["Vai al profilo"])}catch(C){console.error("Errore durante la prenotazione:",C),this.addBotMessage("\u274C Errore durante la prenotazione. Riprova pi\xF9 tardi.")}}})}onChipClick(t){if(t==="Accedi"||t==="Registrati"){this.router.navigate(["/login"]);return}if(t==="Prenotazione guidata"){this.inputText="prenota una consulenza",this.sendMessage();return}if(t==="Apri booking"){this.router.navigate(["/bookings"]);return}if(t==="Vai al profilo"){this.router.navigate(["/account"]);return}this.inputText=t,this.sendMessage()}static \u0275fac=function(e){return new(e||i)(b(An),b(R),b(q),b(Ne))};static \u0275cmp=y({type:i,selectors:[["app-chat-bot"]],viewQuery:function(e,n){if(e&1&&(Ce(Wi,5),Ce(qi,5)),e&2){let r;be(r=Me())&&(n.scrollContainer=r.first),be(r=Me())&&(n.bottomAnchor=r.first)}},standalone:!0,features:[O],decls:21,vars:6,consts:[["scrollContainer",""],["bottomAnchor",""],[1,"chat-wrapper","mat-elevation-z4"],[1,"chat-header"],["color","primary","aria-hidden","true"],[1,"chat-title"],["role","log","aria-live","polite","aria-label","Conversazione con l\u2019assistente",1,"chat-messages",3,"scroll"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","typing","role","status","aria-live","polite",4,"ngIf"],[1,"chat-input",3,"submit"],["appearance","outline",1,"input-field"],["matInput","","name","message","placeholder","Scrivi un messaggio\u2026","aria-label","Scrivi un messaggio","autocomplete","off",3,"ngModelChange","ngModel"],["mat-icon-button","","color","primary","type","submit","aria-label","Invia messaggio",3,"disabled"],["mat-fab","","class","scroll-fab","aria-label","Vai all\u2019ultimo messaggio",3,"click",4,"ngIf"],[3,"ngClass"],[1,"message-card",3,"ngClass"],["class","chips",4,"ngIf"],[1,"chips"],["aria-label","Azioni rapide","role","listbox"],["clickable","","role","option","tabindex","0","matTooltip","Seleziona",3,"click","keydown.enter",4,"ngFor","ngForOf"],["clickable","","role","option","tabindex","0","matTooltip","Seleziona",3,"click","keydown.enter"],["role","status","aria-live","polite",1,"typing"],["mat-fab","","aria-label","Vai all\u2019ultimo messaggio",1,"scroll-fab",3,"click"]],template:function(e,n){if(e&1){let r=x();o(0,"div",2)(1,"div",3)(2,"mat-icon",4),s(3,"smart_toy"),a(),o(4,"span",5),s(5,"Assistente Rebis"),a()(),M(6,"mat-divider"),o(7,"div",6,0),u("scroll",function(){return f(r),_(n.onScroll())}),p(9,Yi,5,4,"ng-container",7)(10,Zi,2,0,"mat-card",8),M(11,"div",null,1),a(),M(13,"mat-divider"),o(14,"form",9),u("submit",function(g){return f(r),n.sendMessage(),_(g.preventDefault())}),o(15,"mat-form-field",10)(16,"input",11),se("ngModelChange",function(g){return f(r),le(n.inputText,g)||(n.inputText=g),_(g)}),a()(),o(17,"button",12)(18,"mat-icon"),s(19,"send"),a()()(),p(20,Ji,3,0,"button",13),a()}e&2&&(l(9),m("ngForOf",n.messages)("ngForTrackBy",n.trackByIndex),l(),m("ngIf",n.typing),l(6),re("ngModel",n.inputText),l(),m("disabled",!n.inputText.trim()),l(3),m("ngIf",!n.isUserAtBottom))},dependencies:[P,J,V,D,Te,pe,ce,me,de,jt,$t,w,A,Q,Fe,Kt,fe,ue,K,Ae,Be],styles:[".chat-wrapper[_ngcontent-%COMP%]{position:relative;min-width:100%;max-width:640px;background:#ffffffbd;color:#eaeaea;border-radius:16px;overflow:hidden}.chat-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 8px;color:#000}.chat-header[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.2px}.chat-messages[_ngcontent-%COMP%]{height:60vh;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:10px;background-color:#000}.chat-messages[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]{max-width:80%;white-space:pre-wrap;line-height:1.35;padding:10px 12px}.chat-messages[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]{margin-left:auto;background:#1f2937;color:#e5e7eb}.chat-messages[_ngcontent-%COMP%]   .bot[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]{margin-right:auto;background:#0b3b2e;color:#e6fff6}.chat-messages[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{display:flex;gap:4px;flex-wrap:wrap;margin:4px 0 0}.chat-messages[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{cursor:pointer;background:#1f2937;color:#e5e7eb}.chat-messages[_ngcontent-%COMP%]   .typing[_ngcontent-%COMP%]{width:fit-content;background:#0b3b2e;color:#e6fff6;padding:3px 5px;border-radius:10px;margin:2px 0 0}.chat-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:4px 6px}.chat-input[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{flex:1}.scroll-fab[_ngcontent-%COMP%]{position:absolute;right:16px;bottom:86px}"]})};function Ki(i,t){i&1&&(o(0,"div",3),M(1,"app-chat-bot"),a())}var tt=class i{isOpen=!1;toggleChat(){this.isOpen=!this.isOpen}closeChat(){this.isOpen=!1}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-chat-bot-popup"]],standalone:!0,features:[O],decls:5,vars:2,consts:[[1,"chat-popup"],["mat-fab","","color","primary",1,"chat-toggle",3,"click"],["class","chat-box",4,"ngIf"],[1,"chat-box"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"button",1),u("click",function(){return n.toggleChat()}),o(2,"mat-icon"),s(3),a()(),p(4,Ki,2,0,"div",2),a()),e&2&&(l(3),h(n.isOpen?"close":"chat"),l(),m("ngIf",n.isOpen))},dependencies:[P,D,et,w,A,Fe],styles:[".chat-popup[_ngcontent-%COMP%]{position:fixed;bottom:16px;right:16px;z-index:1000}.chat-popup[_ngcontent-%COMP%]   .chat-toggle[_ngcontent-%COMP%]{position:relative;z-index:1001}.chat-popup[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]{position:absolute;bottom:70px;right:0;width:90vw;min-height:60vh;max-width:400px;background:#fff;box-shadow:0 4px 12px #00000040;border-radius:12px;overflow:hidden;display:flex;flex-direction:column}"]})};var nt=class i{constructor(t){this.db=t}menu={public:[{label:"Home",route:"/home"},{label:"Servizi",route:"/servizi"},{label:"Progetti",route:"/progetti"},{label:"Bookings",route:"/bookings"},{label:"Chi Siamo",route:"/chi-siamo"},{label:"Contatti",route:"/contatti"}],client:[{label:"Dashboard",route:"/dashboard",roles:["client","admin"],children:[{label:"dashboard",route:"/dashboard/"},{label:"Booking History",route:"/dashboard/booking-history"},{label:"Messaging",route:"/dashboard/messaging"},{label:"Reviews",route:"/dashboard/reviews"},{label:"Invoices",route:"/dashboard/invoices"},{label:"Settings",route:"/dashboard/settings"}]}],admin:[{label:"Admin",route:"/admin",roles:["admin"],children:[{label:"Dashboard",route:"/admin"},{label:"Calendar",route:"/admin/calendar"},{label:"Clients",route:"/admin/clients"},{label:"Billing",route:"/admin/billing"},{label:"Documents",route:"/admin/documents"},{label:"Waitlist",route:"/admin/waitlist"},{label:"Messaging",route:"/admin/messaging"},{label:"Portfolio",route:"/admin/portfolio"},{label:"Servizi",route:"/admin/servizi"},{label:"Staff",route:"/admin/staff"},{label:"Analytics",route:"/admin/analytics"},{label:"Settings",route:"/admin/settings"},{label:"Review List",route:"/admin/review-list"}]}]};getMenuByRole(t){let n=(t==="admin"?["public","client","admin"]:t==="client"?["public","client"]:["public"]).map(r=>{let c=ne(this.db,`menuItems/${r}`);return ee(rt(c)).pipe(_e(g=>{let C=g.val();return C?Array.isArray(C)?C:Object.values(C):[]}))});return new dt(r=>{Promise.all(n.map(c=>c.toPromise())).then(c=>{let g=c.flat();r.next(g),r.complete()}).catch(c=>r.error(c))})}getAllMenus(){let t=ne(this.db,"menuItems");return ee(rt(t)).pipe(_e(e=>e.exists()?e.val():{public:[],client:[],admin:[]}))}addMenuItem(t,e){let n=ne(this.db,`menuItems/${t}`),r=En(n);return ee(lt(r,e))}updateMenuItem(t,e,n){let r=ne(this.db,`menuItems/${t}/${e}`);return ee(Dn(r,n))}uploadDefaultMenu(){let t=ne(this.db,"menuItems");return ee(lt(t,this.menu))}deleteMenuItem(t,e){let n=ne(this.db,`menuItems/${t}/${e}`);return ee(Tn(n))}static \u0275fac=function(e){return new(e||i)(he(Sn))};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})};var eo=["sidenav"];function to(i,t){if(i&1&&(o(0,"a",28),s(1),a()),i&2){let e=t.$implicit;m("routerLink",e.route),l(),v(" ",e.label," ")}}function no(i,t){if(i&1&&(I(0),o(1,"div",24)(2,"button",25),s(3),o(4,"mat-icon"),s(5,"expand_more"),a()(),o(6,"div",26),p(7,to,2,2,"a",27),a()(),E()),i&2){let e=d().$implicit;l(3),v(" ",e.label," "),l(4),m("ngForOf",e.children)}}function io(i,t){if(i&1&&(o(0,"a",29),s(1),a()),i&2){let e=d().$implicit;m("routerLink",e.route),l(),h(e.label)}}function oo(i,t){if(i&1&&(I(0),p(1,no,8,2,"ng-container",17)(2,io,2,2,"ng-template",null,4,W),E()),i&2){let e=t.$implicit,n=j(3);l(),m("ngIf",e.children==null?null:e.children.length)("ngIfElse",n)}}function ao(i,t){if(i&1&&(I(0),o(1,"nav",22),p(2,oo,4,2,"ng-container",23),a(),E()),i&2){let e=t.ngIf;l(2),m("ngForOf",e)}}function ro(i,t){if(i&1&&(o(0,"span",30),s(1),a()),i&2){let e=d();l(),h(e.notifications.length)}}function lo(i,t){if(i&1&&(o(0,"button",32)(1,"mat-icon"),s(2),a(),o(3,"div",33)(4,"p",34),s(5),a(),o(6,"small",35),s(7),T(8,"date"),a()()()),i&2){let e=t.$implicit;l(2),h(e.icon),l(3),h(e.message),l(2),h(wt(8,3,e.date,"short"))}}function so(i,t){if(i&1&&(I(0),p(1,lo,9,6,"button",31),E()),i&2){let e=d();l(),m("ngForOf",e.notifications)}}function co(i,t){i&1&&(o(0,"button",36)(1,"mat-icon"),s(2,"notifications_off"),a(),o(3,"span"),s(4,"Nessuna notifica"),a()())}function mo(i,t){if(i&1){let e=x();I(0),o(1,"a",37),u("click",function(){f(e);let r=d(4);return _(r.closeMenu())}),s(2),a(),E()}if(i&2){let e=t.$implicit;l(),m("routerLink",e.route),l(),v(" ",e.label," ")}}function po(i,t){if(i&1&&(I(0),o(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),s(4),a()(),p(5,mo,3,2,"ng-container",23),a(),E()),i&2){let e=d().$implicit;l(4),h(e.label),l(),m("ngForOf",e.children)}}function go(i,t){if(i&1){let e=x();o(0,"a",37),u("click",function(){f(e);let r=d(3);return _(r.closeMenu())}),s(1),a()}if(i&2){let e=d().$implicit;m("routerLink",e.route),l(),v(" ",e.label," ")}}function uo(i,t){if(i&1&&(I(0),p(1,po,6,2,"ng-container",17)(2,go,2,2,"ng-template",null,5,W),E()),i&2){let e=t.$implicit,n=j(3);l(),m("ngIf",e.children==null?null:e.children.length)("ngIfElse",n)}}function fo(i,t){if(i&1&&(I(0),p(1,uo,4,2,"ng-container",23),E()),i&2){let e=t.ngIf;l(),m("ngForOf",e)}}function _o(i,t){if(i&1){let e=x();I(0),o(1,"button",38),u("click",function(){f(e);let r=d();return _(r.logout())}),o(2,"mat-icon"),s(3,"logout"),a(),s(4," Logout "),a(),E()}}function ho(i,t){i&1&&(o(0,"button",39)(1,"mat-icon"),s(2,"login"),a(),s(3," Login "),a())}var it=class i{constructor(t,e){this.menuService=t;this.auth=e}sidenav;modeSidenav="over";isMenuOpen=!1;userRole="public";navItem$;isLoggedIn=!1;title;notifications=[{message:"Hai una seduta prevista per il 10 luglio alle 15:00.",icon:"event",date:new Date("2025-07-10T15:00:00")},{message:"La tua ultima recensione \xE8 stata approvata!",icon:"check_circle",date:new Date("2025-07-07T09:00:00")},{message:"Hai ricevuto una risposta nel messaggio con lo studio.",icon:"chat",date:new Date("2025-07-06T17:30:00")}];userEffect=we(()=>{let t=this.auth.userSig();console.log(t),t&&this.loadMenu(t.role)});isLoadingMenu=!0;ngOnInit(){this.loadMenu("public")}loadMenu(t){this.navItem$=this.menuService.getMenuByRole(t)}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}closeMenu(){this.isMenuOpen=!1}logout(){this.auth.logout()}static \u0275fac=function(e){return new(e||i)(b(nt),b(R))};static \u0275cmp=y({type:i,selectors:[["app-root"]],viewQuery:function(e,n){if(e&1&&Ce(eo,5),e&2){let r;be(r=Me())&&(n.sidenav=r.first)}},standalone:!0,features:[O],decls:37,vars:14,consts:[["notifMenu","matMenu"],["noNotif",""],["sidenav",""],["loginBtnMobile",""],["noChildren",""],["singleLink",""],[1,"main-toolbar","elevation-z4"],[1,"toolbar-container"],["mat-icon-button","",1,"burger-button",3,"click"],["routerLink","/home",1,"logo-link"],["src","/loghi/logo-white.jpg","alt","REBIS TATTOO",1,"logo-img"],[4,"ngIf"],[1,"toolbar-actions"],["matTooltip","Notifiche recenti",1,"notifications-wrapper",3,"matMenuTriggerFor"],["mat-icon-button",""],["class","badge",4,"ngIf"],[1,"notif-menu"],[4,"ngIf","ngIfElse"],["mat-icon-button","","color","warn","matTooltip","Logout",3,"click"],[1,"sidenav-container"],[1,"mobile-sidenav",3,"openedChange","closed","mode","opened"],[1,"auth-section"],[1,"desktop-nav"],[4,"ngFor","ngForOf"],[1,"dropdown"],["mat-button","",1,"dropdown-toggle"],[1,"dropdown-menu"],["mat-menu-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-menu-item","",3,"routerLink"],["mat-button","",3,"routerLink"],[1,"badge"],["mat-menu-item","",4,"ngFor","ngForOf"],["mat-menu-item",""],[1,"notif-text"],[1,"primary"],[1,"secondary"],["mat-menu-item","","disabled",""],["mat-list-item","",2,"color","whitesmoke!important",3,"click","routerLink"],["mat-stroked-button","","color","warn",1,"logout-btn",3,"click"],["mat-stroked-button","","color","primary","routerLink","/login",1,"login-btn"]],template:function(e,n){if(e&1){let r=x();o(0,"main")(1,"mat-toolbar",6)(2,"div",7)(3,"button",8),u("click",function(){return f(r),_(n.toggleMenu())}),o(4,"mat-icon"),s(5,"menu"),a()(),o(6,"a",9),M(7,"img",10),a(),p(8,ao,3,1,"ng-container",11),T(9,"async"),o(10,"div",12)(11,"div",13)(12,"button",14)(13,"mat-icon"),s(14,"notifications"),a()(),p(15,ro,2,1,"span",15),a(),o(16,"mat-menu",16,0),p(18,so,2,1,"ng-container",17)(19,co,5,0,"ng-template",null,1,W),a(),o(21,"button",18),u("click",function(){return f(r),_(n.logout())}),o(22,"mat-icon"),s(23,"logout"),a()()()()(),o(24,"mat-sidenav-container",19)(25,"mat-sidenav",20,2),se("openedChange",function(g){return f(r),le(n.isMenuOpen,g)||(n.isMenuOpen=g),_(g)}),u("closed",function(){return f(r),_(n.closeMenu())}),o(27,"mat-nav-list"),p(28,fo,2,1,"ng-container",11),T(29,"async"),o(30,"div",21),p(31,_o,5,0,"ng-container",17)(32,ho,4,0,"ng-template",null,3,W),a()()(),o(34,"mat-sidenav-content"),M(35,"app-chat-bot-popup")(36,"router-outlet"),a()()()}if(e&2){let r=j(17),c=j(20),g=j(33);l(8),m("ngIf",z(9,10,n.navItem$)),l(3),m("matMenuTriggerFor",r),l(4),m("ngIf",n.notifications.length>0),l(3),m("ngIf",n.notifications.length>0)("ngIfElse",c),l(7),m("mode",n.modeSidenav),re("opened",n.isMenuOpen),l(3),m("ngIf",z(29,12,n.navItem$)),l(3),m("ngIf",n.isLoggedIn)("ngIfElse",g)}},dependencies:[P,V,D,Se,Dt,Rt,zt,ke,w,qt,A,De,L,Q,Zt,Jt,Yt,en,Xt,pn,dn,gn,_n,hn,vn,tt],styles:[".notifications-wrapper[_ngcontent-%COMP%]{position:relative}.notifications-wrapper[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:red;color:#fff;border-radius:50%;font-size:10px;width:16px;height:16px;display:flex;align-items:center;justify-content:center}.notif-menu[_ngcontent-%COMP%]   .mat-menu-item[_ngcontent-%COMP%]{align-items:flex-start;white-space:normal}.notif-menu[_ngcontent-%COMP%]   .mat-menu-item[_ngcontent-%COMP%]   .notif-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:8px}.notif-menu[_ngcontent-%COMP%]   .mat-menu-item[_ngcontent-%COMP%]   .notif-text[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{font-weight:500}.notif-menu[_ngcontent-%COMP%]   .mat-menu-item[_ngcontent-%COMP%]   .notif-text[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{font-size:11px;color:gray}.main-toolbar[_ngcontent-%COMP%]{background-color:#121212!important;color:#f0f0f0;box-shadow:0 2px 10px #0009}.main-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;height:8vh;padding:0 1.5rem}.main-toolbar[_ngcontent-%COMP%]   .logo-link[_ngcontent-%COMP%]{display:flex;align-items:center}.main-toolbar[_ngcontent-%COMP%]   .logo-link[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%]{height:38px}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{color:#f0f0f0;font-weight:500;transition:color .2s ease}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:hover{color:#c4a62d}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{position:relative}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{z-index:9999;position:absolute;top:120%;left:0;display:flex;flex-direction:column;background-color:#1e1e1e;border:1px solid #333;padding:.4rem 0;min-width:180px;max-height:60vh;overflow-y:scroll;border-radius:6px;opacity:0;pointer-events:none;transform:translateY(10px);transition:all .25s ease}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f0f0f0;padding:.5rem 1.2rem;font-size:.92rem;white-space:nowrap;transition:background .2s}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#2c2c2c;color:#c4a62d}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{opacity:1;pointer-events:auto;transform:translateY(0)}.main-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.main-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:500;transition:all .2s ease}.main-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{border-color:#c4a62d;color:#c4a62d}.main-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background-color:#c4a62d1a}@media (max-width: 1024px){.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%], .main-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]{display:none}.main-toolbar[_ngcontent-%COMP%]   .burger-button[_ngcontent-%COMP%]{display:inline-flex;color:#fff}}.sidenav-container[_ngcontent-%COMP%]{height:92vh;overflow-y:hidden}.mobile-sidenav[_ngcontent-%COMP%]{background-color:#a3a3a3;color:#f1f1f1;width:270px;padding-top:1rem;border-radius:0 0 50% 0%}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]{padding:0}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:.8rem 1.2rem;font-weight:500;font-size:.95rem;color:#f0f0f0!important;transition:background .2s ease}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff0f;color:#c4a62d!important}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{background-color:transparent;box-shadow:none;color:#f0f0f0}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header{padding:0 1rem;font-weight:600;font-size:.95rem;color:#fff!important;background-color:transparent!important}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.5rem 2rem;font-size:.9rem;color:#d4d4d4!important}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#c4a62d!important}.mobile-sidenav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%], .mobile-sidenav[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{width:calc(100% - 2rem);margin:1rem auto 0;border-color:#000;color:#000;font-weight:600}.mobile-sidenav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover, .mobile-sidenav[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background-color:#f7d0381a}main[_ngcontent-%COMP%]{background-color:#000;min-height:100vh}"]})};Bt(it,$n).catch(i=>console.error(i));
