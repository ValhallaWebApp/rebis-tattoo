import{a as ui}from"./chunk-RUJ3H3YP.js";import{a as ye,b as U}from"./chunk-DNVFVQSP.js";import{a as di}from"./chunk-4JQXIQDS.js";import{c as X,d as fi,e as mt}from"./chunk-EOWTFOEZ.js";import{a as pi}from"./chunk-XTR63VDW.js";import{$ as V,B as Bn,Ba as ke,C as Ln,Ca as Ie,D as Ke,F as Wt,Fb as at,Ga as qn,H as _e,Ha as Hn,Ia as Gn,J as Je,Ja as pe,La as Qn,Lb as oi,Mb as ri,Na as Xn,Nb as ai,Ob as si,Ub as li,V as zn,Vb as st,W as Rn,X as Vn,Xb as lt,Y as Wn,Zb as ci,_ as Me,_b as mi,a as kn,aa as Se,b as In,ba as Pe,bc as P,d as Tn,da as jn,db as rt,dc as ct,eb as Kn,fa as Un,fb as Jn,g as Dn,ga as we,gb as Zn,hb as ei,ib as Te,ja as Ze,jb as De,k as Fn,kb as N,ma as et,pa as tt,qa as nt,r as An,ra as it,rb as ti,sa as ne,sb as ni,ta as Oe,tb as ii,ua as Yn,va as A,wa as Ee,x as Xe,xa as H,y as Nn,ya as $n,za as ot}from"./chunk-7AONPZHV.js";import"./chunk-CARY4E7O.js";import{a as vn,b as Cn,c as yn,d as Mn,f as Sn,g as Pn,h as te,i as Ce,j as wn,k as On,l as En}from"./chunk-3PBLYRJ4.js";import{$b as me,Ba as ge,E as Vt,Ea as z,Eb as un,F as tn,Fb as fn,Ga as Le,Ha as ze,Ia as a,Ja as r,Ka as u,La as W,Lb as ce,Ma as j,N as nn,Nb as gn,Oa as T,Ra as _,Sb as hn,Ta as f,Ua as cn,Va as mn,Ya as Re,Yb as _n,Za as Ve,_ as q,_a as We,_b as xn,a as Jt,ac as R,bb as Q,c as ee,ca as l,cb as s,da as F,db as g,ea as on,eb as S,f as Zt,fb as pn,fc as Qe,ga as rn,h as J,hb as qe,i as O,ia as an,ib as He,ic as bn,jb as Ge,la as sn,lb as b,lc as v,m as x,p as en,qb as le,rb as he,sb as dn,ua as d,v as y,vb as Z,w as M,ya as ln,za as m}from"./chunk-I2SBXG73.js";import{l as Rt}from"./chunk-VPSPPOSA.js";import"./chunk-L4TIKYZG.js";import{N as G,X as Kt,k as $e}from"./chunk-Y3XNR5LB.js";import{a as K,b as se,e as L}from"./chunk-ACKELEN3.js";var ao="@",so=(()=>{class n{constructor(e,i,o,c,p){this.doc=e,this.delegate=i,this.zone=o,this.animationType=c,this.moduleImpl=p,this._rendererFactoryPromise=null,this.scheduler=O(rn,{optional:!0}),this.loadingSchedulerFn=O(lo,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-G45JWF33.js").then(o=>o),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(e):i=e(),i.catch(o=>{throw new Jt(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:c})=>{this._engine=o(this.animationType,this.doc);let p=new c(this.delegate,this._engine,this.zone);return this.delegate=p,p})}createRenderer(e,i){let o=this.delegate.createRenderer(e,i);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let c=new jt(o);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(p=>{let h=p.createRenderer(e,i);c.use(h),this.scheduler?.notify(10)}).catch(p=>{c.use(o)}),c}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){on()}}static{this.\u0275prov=ee({token:n,factory:n.\u0275fac})}}return n})(),jt=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,o){this.delegate.insertBefore(t,e,i,o)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,o){this.delegate.setAttribute(t,e,i,o)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,o){this.delegate.setStyle(t,e,i,o)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.shouldReplay(e)&&this.replay.push(o=>o.listen(t,e,i)),this.delegate.listen(t,e,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(ao)}},lo=new Zt("");function gi(n="animations"){return sn("NgAsyncAnimations"),en([{provide:an,useFactory:(t,e,i)=>new so(t,e,i,n),deps:[hn,yn,tn]},{provide:nn,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}function co(n,t){n&1&&(a(0,"mat-error"),s(1,"Nome obbligatorio"),r())}function mo(n,t){n&1&&(a(0,"mat-error"),s(1,"Minimo 2 caratteri"),r())}function po(n,t){if(n&1&&(a(0,"mat-form-field",13)(1,"mat-label"),s(2,"Nome"),r(),a(3,"mat-icon",14),s(4,"person"),r(),u(5,"input",27),d(6,co,2,0,"mat-error",16)(7,mo,2,0,"mat-error",16),r()),n&2){let e=f();l(6),m("ngIf",e.hasError("name","required")),l(),m("ngIf",e.hasError("name","minlength"))}}function uo(n,t){n&1&&(a(0,"mat-error"),s(1,"Email obbligatoria"),r())}function fo(n,t){n&1&&(a(0,"mat-error"),s(1,"Formato email non valido"),r())}function go(n,t){n&1&&(a(0,"mat-error"),s(1,"Password obbligatoria"),r())}function ho(n,t){n&1&&(a(0,"mat-error"),s(1,"Minimo 6 caratteri"),r())}function _o(n,t){n&1&&(a(0,"mat-error"),s(1,"Conferma la password"),r())}function xo(n,t){n&1&&(a(0,"mat-error"),s(1," Le password non coincidono "),r())}function bo(n,t){if(n&1&&(a(0,"mat-form-field",13)(1,"mat-label"),s(2,"Conferma password"),r(),a(3,"mat-icon",14),s(4,"lock_reset"),r(),u(5,"input",28),d(6,_o,2,0,"mat-error",16)(7,xo,2,0,"mat-error",16),r()),n&2){let e,i=f();l(5),m("type",i.hidePassword?"password":"text"),l(),m("ngIf",i.hasError("confirmPassword","required")),l(),m("ngIf",i.loginForm.hasError("passwordMismatch")&&(i.submitted||((e=i.loginForm.get("confirmPassword"))==null?null:e.touched)))}}function vo(n,t){n&1&&(a(0,"mat-checkbox",29),s(1," Accetto informativa privacy e termini di utilizzo "),r())}function Co(n,t){if(n&1&&(a(0,"div",30)(1,"mat-icon"),s(2,"error"),r(),a(3,"span"),s(4),r()()),n&2){let e=f();l(4),g(e.errorMessage)}}function yo(n,t){if(n&1&&(W(0),s(1),j()),n&2){let e=f();l(),S(" ",(e.isLoginMode,"Accedi")," ")}}function Mo(n,t){n&1&&u(0,"mat-progress-spinner",31)}var je=class n{constructor(t,e,i,o){this.authService=t;this.fb=e;this.router=i;this.route=o;this.loginForm=this.fb.group({name:[""],email:["",[V.required,V.email]],password:["",[V.required,V.minLength(6)]],confirmPassword:[""],acceptTerms:[!1],rememberMe:[!0]},{validators:[this.passwordsMatchValidator]})}loginForm;isLoginMode=!0;errorMessage="";isLoading=!1;hidePassword=!0;submitted=!1;ngOnInit(){(this.router.url.includes("/register")||this.router.url.includes("/auth/register")?"register":this.route.snapshot.data?.mode)==="register"&&(this.isLoginMode=!1),this.configureValidatorsByMode()}get emailCtrl(){return this.loginForm.get("email")}get passwordCtrl(){return this.loginForm.get("password")}hasError(t,e){let i=this.loginForm.get(t);return i?i.hasError(e)&&(i.touched||this.submitted):!1}toggleMode(){this.isLoginMode=!this.isLoginMode,this.errorMessage="",this.submitted=!1,this.configureValidatorsByMode(),this.loginForm.markAsPristine(),this.loginForm.markAsUntouched()}onSubmit(){return L(this,null,function*(){if(this.submitted=!0,this.loginForm.invalid||this.isLoading)return;let{name:t,email:e,password:i,rememberMe:o}=this.loginForm.value,c=localStorage.getItem("pre-log")||"/home";this.isLoading=!0,this.errorMessage="";try{if(this.isLoginMode)yield this.authService.login(e,i);else{yield this.authService.register(e,i);let p=String(t??"").trim();p&&(yield this.authService.updateCurrentUserProfile({name:p}))}yield this.router.navigateByUrl(c),localStorage.removeItem("pre-log")}catch(p){let h=p?.code||p?.message||"unknown";this.errorMessage=this.getErrorMessage(h),console.error("Auth error:",p)}finally{this.isLoading=!1}})}getErrorMessage(t){switch(t){case"auth/user-not-found":return"Utente non trovato.";case"auth/wrong-password":return"Password errata.";case"auth/email-already-in-use":return"Email gi\xE0 registrata.";case"auth/invalid-email":return"Email non valida.";case"auth/weak-password":return"Password troppo debole.";case"profile/not-found":return"Profilo non trovato. Contatta il supporto oppure riprova pi\xF9 tardi.";default:return"Errore sconosciuto. Riprova."}}configureValidatorsByMode(){let t=this.loginForm.get("name"),e=this.loginForm.get("confirmPassword"),i=this.loginForm.get("acceptTerms"),o=this.loginForm.get("password");!t||!e||!i||!o||(this.isLoginMode?(t.clearValidators(),e.clearValidators(),i.clearValidators()):(t.setValidators([V.required,V.minLength(2)]),e.setValidators([V.required]),i.setValidators([V.requiredTrue])),o.setValidators([V.required,V.minLength(6)]),t.updateValueAndValidity({emitEvent:!1}),e.updateValueAndValidity({emitEvent:!1}),i.updateValueAndValidity({emitEvent:!1}),o.updateValueAndValidity({emitEvent:!1}),this.loginForm.updateValueAndValidity({emitEvent:!1}))}passwordsMatchValidator=t=>{if(this.isLoginMode)return null;let e=t.get("password")?.value,i=t.get("confirmPassword")?.value;return i?e===i?null:{passwordMismatch:!0}:null};static \u0275fac=function(e){return new(e||n)(F(X),F(tt),F(te),F(Sn))};static \u0275cmp=x({type:n,selectors:[["app-login"]],standalone:!0,features:[b],decls:57,vars:18,consts:[["loadingTpl",""],[1,"auth-shell"],[1,"bg-orb","orb-a"],[1,"bg-orb","orb-b"],[1,"auth-card","mat-elevation-z12"],[1,"brand-panel"],[1,"eyebrow"],[1,"lead"],[1,"chips"],[1,"form-panel"],[1,"head"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline","class","full-width",4,"ngIf"],["appearance","outline",1,"full-width"],["matPrefix",""],["matInput","","formControlName","email","type","email","autocomplete","email"],[4,"ngIf"],["matInput","","formControlName","password","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"row","between","center"],["formControlName","rememberMe"],["mat-button","","type","button","disabled","",1,"ghost-link"],["formControlName","acceptTerms","class","terms-check",4,"ngIf"],["class","global-error",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"cta",3,"disabled"],[4,"ngIf","ngIfElse"],["mat-button","","color","accent",1,"mode-switch",3,"click"],["matInput","","formControlName","name","autocomplete","name"],["matInput","","formControlName","confirmPassword","autocomplete","new-password",3,"type"],["formControlName","acceptTerms",1,"terms-check"],[1,"global-error"],["mode","indeterminate","diameter","22"]],template:function(e,i){if(e&1){let o=T();a(0,"div",1),u(1,"div",2)(2,"div",3),a(3,"mat-card",4)(4,"section",5)(5,"p",6),s(6,"Ingresso pubblico"),r(),a(7,"h1"),s(8,"Accedi"),r(),a(9,"p",7),s(10," Inserisci email e password per entrare. "),r(),a(11,"div",8)(12,"span"),s(13,"Login sicuro"),r(),a(14,"span"),s(15,"Accesso account"),r()()(),a(16,"section",9)(17,"div",10)(18,"h2"),s(19),r(),a(20,"p"),s(21),r()(),a(22,"form",11),_("ngSubmit",function(){return y(o),M(i.onSubmit())}),d(23,po,8,2,"mat-form-field",12),a(24,"mat-form-field",13)(25,"mat-label"),s(26,"Email"),r(),a(27,"mat-icon",14),s(28,"mail"),r(),u(29,"input",15),d(30,uo,2,0,"mat-error",16)(31,fo,2,0,"mat-error",16),r(),a(32,"mat-form-field",13)(33,"mat-label"),s(34,"Password"),r(),a(35,"mat-icon",14),s(36,"lock"),r(),u(37,"input",17),a(38,"button",18),_("click",function(){return y(o),M(i.hidePassword=!i.hidePassword)}),a(39,"mat-icon"),s(40),r()(),d(41,go,2,0,"mat-error",16)(42,ho,2,0,"mat-error",16),r(),d(43,bo,8,3,"mat-form-field",12),a(44,"div",19)(45,"mat-checkbox",20),s(46,"Ricordami"),r(),a(47,"button",21),s(48,"Recupero password"),r()(),d(49,vo,2,0,"mat-checkbox",22)(50,Co,5,1,"div",23),a(51,"button",24),d(52,yo,2,1,"ng-container",25),r(),d(53,Mo,1,0,"ng-template",null,0,Z),r(),a(55,"button",26),_("click",function(){return y(o),M(i.toggleMode())}),s(56),r()()()()}if(e&2){let o=Q(54);l(19),g(i.isLoginMode?"Accedi":"Crea account"),l(2),g(i.isLoginMode?"Inserisci email e password.":"Bastano pochi dati per iniziare."),l(),m("formGroup",i.loginForm),l(),m("ngIf",!i.isLoginMode),l(7),m("ngIf",i.hasError("email","required")),l(),m("ngIf",i.hasError("email","email")),l(6),m("type",i.hidePassword?"password":"text"),l(),ln("aria-label",i.hidePassword?"Mostra password":"Nascondi password"),l(2),g(i.hidePassword?"visibility":"visibility_off"),l(),m("ngIf",i.hasError("password","required")),l(),m("ngIf",i.hasError("password","minlength")),l(),m("ngIf",!i.isLoginMode),l(6),m("ngIf",!i.isLoginMode),l(),m("ngIf",i.errorMessage),l(),m("disabled",i.loginForm.invalid||i.isLoading),l(),m("ngIf",!i.isLoading)("ngIfElse",o),l(4),S(" ",i.isLoginMode?"Vai a registrazione":"Vai a login"," ")}},dependencies:[P,A,H,ke,De,Te,rt,Kn,Zn,ei,N,oi,ne,v,R,Oe,it,we,Me,Se,Pe,Ze,et],styles:["[_nghost-%COMP%]{--auth-bg-a: #0f1115;--auth-bg-b: #171c24;--auth-panel: #ffffff;--auth-panel-muted: #f5f7fb;--auth-ink: #111826;--auth-sub: #5f6878;--auth-line: #d9deea;--auth-primary: #0b5fff;--auth-primary-ink: #ffffff;--auth-danger-bg: #ffe6e6;--auth-danger-ink: #a41111}.auth-shell[_ngcontent-%COMP%]{min-height:100vh;display:grid;place-items:center;padding:24px;background:radial-gradient(circle at 12% 20%,rgba(11,95,255,.18),transparent 40%),radial-gradient(circle at 88% 84%,rgba(29,191,151,.14),transparent 45%),linear-gradient(160deg,var(--auth-bg-a),var(--auth-bg-b));position:relative;overflow:hidden}.bg-orb[_ngcontent-%COMP%]{position:absolute;border-radius:999px;filter:blur(20px);opacity:.35;pointer-events:none}.orb-a[_ngcontent-%COMP%]{width:280px;height:280px;top:8%;right:-80px;background:#1dbf97}.orb-b[_ngcontent-%COMP%]{width:340px;height:340px;bottom:-120px;left:-120px;background:#0b5fff}.auth-card[_ngcontent-%COMP%]{width:min(980px,100%);border-radius:18px;overflow:hidden;display:grid;grid-template-columns:1.05fr 1fr;background:var(--auth-panel);animation:_ngcontent-%COMP%_card-in .24s ease-out}.brand-panel[_ngcontent-%COMP%]{background:var(--auth-panel-muted);padding:40px 34px;border-right:1px solid var(--auth-line)}.eyebrow[_ngcontent-%COMP%]{margin:0;letter-spacing:.08em;text-transform:uppercase;font-size:12px;font-weight:700;color:var(--auth-sub)}.brand-panel[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:10px 0 8px;font-size:clamp(26px,4vw,34px);line-height:1.1;color:var(--auth-ink)}.lead[_ngcontent-%COMP%]{margin:0;color:var(--auth-sub);line-height:1.5}.chips[_ngcontent-%COMP%]{margin-top:24px;display:flex;flex-wrap:wrap;gap:10px}.chips[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;align-items:center;height:30px;padding:0 12px;border-radius:999px;background:#e8eefc;color:#20418c;font-size:12px;font-weight:600}.form-panel[_ngcontent-%COMP%]{padding:34px}.head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:28px;color:var(--auth-ink)}.head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0 0;color:var(--auth-sub)}.login-form[_ngcontent-%COMP%]{margin-top:20px;display:grid;gap:12px}.full-width[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{display:flex;gap:12px}.center[_ngcontent-%COMP%]{align-items:center}.between[_ngcontent-%COMP%]{justify-content:space-between}.ghost-link[_ngcontent-%COMP%]{text-transform:none;opacity:.6}.global-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;border-radius:12px;background:var(--auth-danger-bg);color:var(--auth-danger-ink);padding:10px 12px;font-size:13px}.cta[_ngcontent-%COMP%]{width:100%;min-height:44px;margin-top:2px}.mode-switch[_ngcontent-%COMP%]{margin-top:10px;width:100%;text-transform:none}@keyframes _ngcontent-%COMP%_card-in{0%{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width: 900px){.auth-card[_ngcontent-%COMP%]{grid-template-columns:1fr}.brand-panel[_ngcontent-%COMP%]{border-right:0;border-bottom:1px solid var(--auth-line);padding:24px}.form-panel[_ngcontent-%COMP%]{padding:24px}}@media (max-width: 560px){.auth-shell[_ngcontent-%COMP%]{padding:12px}.brand-panel[_ngcontent-%COMP%], .form-panel[_ngcontent-%COMP%]{padding:18px}}"]})};function So(n,t){if(n&1&&(a(0,"article",9)(1,"div",10)(2,"div",11),u(3,"img",12),r(),a(4,"div",13)(5,"h3"),s(6),r(),a(7,"p"),s(8),r(),a(9,"div",14)(10,"span",15),s(11),r(),a(12,"span",15),s(13),r()()()()()),n&2){let e=t.$implicit,i=f(3);l(3),m("src",i.iconFor(e),q)("alt",i.titleOf(e)+" icon"),l(3),g(i.titleOf(e)),l(2),g(i.descOf(e)),l(3),S(" ",e.prezzoDaConcordare?"Prezzo su richiesta":"\u20AC"+e.prezzo," "),l(2),S(" ",e.durataDaConcordare?"Durata su richiesta":e.durata+" min"," ")}}function Po(n,t){if(n&1&&(a(0,"div",7),d(1,So,14,6,"article",8),r()),n&2){let e=f().ngIf;l(),m("ngForOf",e)}}function wo(n,t){if(n&1&&(W(0),d(1,Po,2,1,"div",6),j()),n&2){let e=t.ngIf;f();let i=Q(9);l(),m("ngIf",e.length)("ngIfElse",i)}}function Oo(n,t){n&1&&(a(0,"div",16)(1,"mat-icon"),s(2,"search_off"),r(),a(3,"div")(4,"strong"),s(5,"Nessun servizio disponibile"),r(),a(6,"div",17),s(7,"Torna a trovarci presto."),r()()())}var ut=class n{constructor(t,e){this.lang=t;this.servicesService=e;this.services$=this.servicesService.getServices().pipe(Kt(i=>(i??[]).filter(o=>o?.visibile!==!1)))}services$;titleOf(t){return String(t?.name??"").trim()||"Servizio"}descOf(t){return String(t?.description??"").trim()}iconFor(t){let e=String(t?.icon??"").trim();if(e)return e;let i=String(t?.categoria??"").trim().toLowerCase(),o=String(t?.name??"").trim().toLowerCase();return i.includes("fine")||o.includes("fine")?"/home/icon-07-80x80.png":i.includes("cover")||o.includes("copertura")?"/home/icon-03-80x80.png":i.includes("design")||o.includes("design")?"/home/icon-04-80x80.png":i.includes("trucco")||o.includes("permanente")?"/home/icon-05-80x80.png":i.includes("su misura")||o.includes("su misura")?"/home/icon-custom-02.png":"/home/icon-01-80x80.png"}static \u0275fac=function(e){return new(e||n)(F(pi),F(di))};static \u0275cmp=x({type:n,selectors:[["app-service-list"]],standalone:!0,features:[b],decls:10,vars:5,consts:[["empty",""],[1,"services"],[1,"services__head"],[1,"services__title"],[1,"services__subtitle"],[4,"ngIf"],["class","services__grid",4,"ngIf","ngIfElse"],[1,"services__grid"],["class","service-card",4,"ngFor","ngForOf"],[1,"service-card"],[1,"preview"],[1,"icon"],["loading","lazy","decoding","async",3,"src","alt"],[1,"content"],[1,"meta"],[1,"pill"],[1,"empty"],[1,"muted"]],template:function(e,i){e&1&&(a(0,"section",1)(1,"header",2)(2,"h2",3),s(3),r(),a(4,"p",4),s(5),r()(),d(6,wo,2,2,"ng-container",5),le(7,"async"),d(8,Oo,8,0,"ng-template",null,0,Z),r()),e&2&&(l(3),g(i.lang.t("home.services.title")),l(2),g(i.lang.t("home.services.subtitle")),l(),m("ngIf",he(7,3,i.services$)))},dependencies:[v,me,R,Qe,P,A],styles:['.services[_ngcontent-%COMP%]{padding:30px 14px 44px;max-width:1200px;margin:0 auto;color:#0b0b0b;position:relative;background:#fff;border-radius:22px}.services[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-6px;top:18px;bottom:18px;width:10px;border-radius:999px;background:#0b0b0b;opacity:.9}.services[_ngcontent-%COMP%]:after{content:"";position:absolute;right:12px;top:64px;width:110px;height:110px;border-radius:50%;border:2px dashed rgba(0,0,0,.25);transform:rotate(-12deg);opacity:.35;pointer-events:none}.services__head[_ngcontent-%COMP%]{padding:10px 4px 16px}.services__title[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:900;letter-spacing:.8px;font-family:Barlow Semi Condensed,sans-serif;text-transform:uppercase}.services__subtitle[_ngcontent-%COMP%]{margin:6px 0 0;opacity:.75;font-size:13px;font-family:Barlow Semi Condensed,sans-serif}.services__grid[_ngcontent-%COMP%]{margin-top:12px;display:grid;grid-template-columns:1fr;gap:12px}.service-card[_ngcontent-%COMP%]:nth-child(1), .service-card[_ngcontent-%COMP%]:nth-child(2){grid-column:span 1}.service-card[_ngcontent-%COMP%]{position:relative;padding:8px;border-radius:18px;background:#fff;border:1px solid rgba(0,0,0,.1);box-shadow:0 12px 26px #00000014;overflow:hidden;transition:transform .18s ease,box-shadow .18s ease,border-color .18s ease}.service-card[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:radial-gradient(220px 220px at -10% -10%,rgba(0,0,0,.06),transparent 60%),radial-gradient(180px 180px at 110% 110%,rgba(0,0,0,.06),transparent 60%);pointer-events:none}.service-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:#0003;box-shadow:0 18px 40px #0000001f}.preview[_ngcontent-%COMP%]{display:grid;grid-template-columns:62px 1fr;gap:12px;align-items:center;padding:12px;border-radius:14px;border:1px dashed rgba(0,0,0,.22);background:#fff}.preview[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:62px;height:62px;border-radius:14px;display:grid;place-items:center;background:#111;border:1px solid rgba(255,255,255,.18);box-shadow:inset 0 0 0 2px #ffffff0f}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26px;height:26px;object-fit:contain;filter:invert(1)}.preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:2px 0 6px;font-size:15px;font-weight:900;color:#111;font-family:Barlow Semi Condensed,sans-serif;text-transform:uppercase;letter-spacing:.4px}.preview[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12.5px;line-height:1.55;color:#2f2f2f;font-family:Barlow Semi Condensed,sans-serif}.meta[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}.pill[_ngcontent-%COMP%]{padding:3px 8px;border-radius:999px;border:1px solid rgba(0,0,0,.12);background:#00000008;font-size:11px;font-weight:800;letter-spacing:.2px}@media (min-width: 700px){.services[_ngcontent-%COMP%]{padding:36px 18px 52px}.services__title[_ngcontent-%COMP%]{font-size:28px}.services__subtitle[_ngcontent-%COMP%]{font-size:14px}.services__grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(220px,1fr))}.service-card[_ngcontent-%COMP%]:nth-child(1), .service-card[_ngcontent-%COMP%]:nth-child(2){grid-column:span 2}}@media (min-width: 1020px){.services__grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(220px,1fr))}.service-card[_ngcontent-%COMP%]:nth-child(1), .service-card[_ngcontent-%COMP%]:nth-child(2){grid-column:span 2}}.empty[_ngcontent-%COMP%]{margin-top:18px;display:flex;gap:12px;align-items:center;padding:18px 16px;border-radius:18px;border:1px dashed rgba(0,0,0,.2);background:#00000008;opacity:.9}.empty[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:38px;height:38px;font-size:38px;opacity:.7}.muted[_ngcontent-%COMP%]{opacity:.7;font-size:12px}']})};var Fe={studioName:"Rebis Tattoo",tagline:"Studio di tatuaggi a Sassari",mission:"In Rebis Tattoo ogni tatuaggio e una narrazione visiva. La nostra missione e creare arte che rifletta la tua identita, con attenzione e professionalita.",teamIntro:"Lo studio e guidato direttamente dalla titolare, che segue ogni fase del tatuaggio dalla consulenza alla guarigione.",ownerName:"Sara Pushi",ownerRoleLabel:"Tatuatrice - Titolare",ownerBio:"Rebis Tattoo nasce da una visione precisa: pochi progetti, curati davvero. Ogni tatuaggio viene seguito personalmente, con attenzione al posizionamento e alla durata nel tempo.",ownerPhotoUrl:"/personale/1.jpg",address:"Via al Carmine 1A, 07100 Sassari (SS)",phoneDisplay:"+39 340 099 8312",email:"sarapushi@rebistattoo.info",instagramUrl:"https://www.instagram.com/rebis_tattoo/",instagramHandle:"@rebis_tattoo"},ft=class n{constructor(t){this.db=t}path="studioProfile/public";getProfile(){return new $e(t=>{let e=_e(this.db,this.path),i=Ke(e,o=>{let c=o.exists()?o.val():{};t.next(this.mergeWithDefault(c))},o=>t.next(Fe));return()=>i()})}mergeWithDefault(t){let e=K(K({},Fe),t||{});for(let i of Object.keys(Fe)){let o=e[i];typeof o!="string"||!o.trim()?e[i]=Fe[i]:e[i]=o.trim()}return e}static \u0275fac=function(e){return new(e||n)(J(Xe))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function ko(n,t){if(n&1&&(a(0,"span",18),s(1),r()),n&2){let e=f();l(),S("Guest: ",e.guestCount,"")}}function Io(n,t){if(n&1&&(a(0,"mat-card",23)(1,"div",24),u(2,"img",4),r(),a(3,"div",25)(4,"h3"),s(5),r(),a(6,"p",26),s(7),r(),a(8,"p",27),s(9),r()(),a(10,"div",28)(11,"a",13),s(12,"Lavori"),r(),a(13,"a",14),s(14,"Prenota"),r()()()),n&2){let e=t.$implicit,i=f(2);l(2),m("src",i.getPhoto(e),q)("alt",e.name),l(3),g(e.name),l(2),g(i.roleLabel(e.role)),l(2),g(e.bio||"Profilo in aggiornamento.")}}function To(n,t){if(n&1&&(a(0,"div",21),d(1,Io,15,5,"mat-card",22),r()),n&2){let e=f();l(),m("ngForOf",e.team)("ngForTrackBy",e.trackById)}}function Do(n,t){n&1&&(a(0,"p",29),s(1,"Nessun artista disponibile al momento."),r())}var gt=class n{staffService=O(ct);studioProfileService=O(ft);staffSub;profileSub;profile=Fe;team=[];activeIndex=0;pointerDownX=null;dragging=!1;ngOnInit(){this.profileSub=this.studioProfileService.getProfile().subscribe(t=>{this.profile=t}),this.staffSub=this.staffService.getAllStaff().subscribe(t=>{let i=(t??[]).filter(o=>o?.isActive!==!1).filter(o=>!this.isOwner(o));this.team=i.sort((o,c)=>{let p=this.roleOrder(o.role),h=this.roleOrder(c.role);return p!==h?p-h:(o.name??"").localeCompare(c.name??"")}),this.team.length===0?this.activeIndex=0:this.activeIndex>this.team.length-1&&(this.activeIndex=0)})}ngOnDestroy(){this.staffSub?.unsubscribe(),this.profileSub?.unsubscribe()}get active(){return this.team?.length?this.team[this.activeIndex]:null}get tattooersCount(){return this.team.filter(t=>t.role==="tatuatore").length+1}get guestCount(){return this.team.filter(t=>t.role==="guest").length}trackById=(t,e)=>e.id??e.name??t;get heroImageUrl(){return this.profile.ownerPhotoUrl||"/personale/1.jpg"}getPhoto(t){return(t.photoUrl??"").trim()||this.heroImageUrl}roleLabel(t){switch(t){case"tatuatore":return"Tatuatore";case"piercer":return"Piercer";case"guest":return"Guest";default:return"Staff"}}prev(){this.team?.length&&(this.activeIndex=(this.activeIndex-1+this.team.length)%this.team.length)}next(){this.team?.length&&(this.activeIndex=(this.activeIndex+1)%this.team.length)}setActive(t){this.team?.length&&(this.activeIndex=t)}isHidden(t){if(!this.team?.length)return!0;let e=this.circularDistance(this.activeIndex,t);return Math.abs(e)>1}isLeft(t){return this.circularDistance(this.activeIndex,t)===-1}isRight(t){return this.circularDistance(this.activeIndex,t)===1}getTransform(t){if(!this.team?.length)return"translateX(0) scale(1)";let e=this.circularDistance(this.activeIndex,t);return`translateX(${e*260}px) scale(${e===0?1:.86})`}getOpacity(t){if(!this.team?.length)return 0;let e=this.circularDistance(this.activeIndex,t);return Math.abs(e)>1?0:e===0?1:.62}getZIndex(t){return this.team?.length?10-Math.abs(this.circularDistance(this.activeIndex,t)):0}onPointerDown(t){this.pointerDownX=t.clientX,this.dragging=!0}onPointerMove(t){!this.dragging||this.pointerDownX==null}onPointerUp(t){if(!this.dragging||this.pointerDownX==null)return;let e=t.clientX-this.pointerDownX,i=45;this.dragging=!1,this.pointerDownX=null,e>i?this.prev():e<-i&&this.next()}isOwner(t){let e=(t?.name??"").toLowerCase().trim(),i=(this.profile.ownerName??"").toLowerCase().trim();return!!i&&e===i}roleOrder(t){switch(t){case"tatuatore":return 1;case"piercer":return 2;case"guest":return 3;default:return 4}}circularDistance(t,e){let i=this.team.length,o=e-t;return o>i/2&&(o-=i),o<-i/2&&(o+=i),o}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-chi-siamo"]],standalone:!0,features:[b],decls:49,vars:17,consts:[["noTeam",""],[1,"about-section"],[1,"about-wrapper"],[1,"about-image"],["loading","lazy",3,"src","alt"],[1,"about-text"],[1,"eyebrow"],[1,"title"],[1,"meta"],[3,"href"],["target","_blank","rel","noopener",3,"href"],[1,"approach-box"],[1,"hero-actions"],["routerLink","/progetti",1,"ghost-btn"],["routerLink","/fast-booking",1,"primary-btn"],[1,"team-section"],[1,"team-head"],[1,"team-badges"],[1,"chip"],["class","chip",4,"ngIf"],["class","team-grid",4,"ngIf","ngIfElse"],[1,"team-grid"],["class","artist-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"artist-card"],[1,"thumb"],[1,"artist-meta"],[1,"role"],[1,"bio"],[1,"actions"],[1,"empty"]],template:function(e,i){if(e&1&&(a(0,"section",1)(1,"div",2)(2,"div",3),u(3,"img",4),r(),a(4,"div",5)(5,"p",6),s(6,"Ingresso pubblico"),r(),a(7,"h1",7),s(8,"Chi siamo"),r(),a(9,"p"),s(10),r(),a(11,"p",8)(12,"a",9),s(13),r(),a(14,"span"),s(15,"\u2022"),r(),a(16,"a",10),s(17),r(),a(18,"span"),s(19,"\u2022"),r(),a(20,"span"),s(21),r()(),a(22,"div",11)(23,"h3"),s(24),r(),a(25,"p"),s(26),r(),a(27,"span"),s(28),r()(),a(29,"div",12)(30,"a",13),s(31,"Vedi lavori"),r(),a(32,"a",14),s(33,"Prenota"),r()()()()(),a(34,"section",15)(35,"div",16)(36,"h2"),s(37,"Team"),r(),a(38,"p"),s(39),r(),a(40,"div",17)(41,"span",18),s(42),r(),a(43,"span",18),s(44),r(),d(45,ko,2,1,"span",19),r()(),d(46,To,2,2,"div",20)(47,Do,2,0,"ng-template",null,0,Z),r()),e&2){let o=Q(48);l(3),m("src",i.heroImageUrl,q)("alt",i.profile.ownerName),l(7),S(" ",i.profile.mission," "),l(2),m("href","mailto:"+i.profile.email,q),l(),g(i.profile.email),l(3),m("href",i.profile.instagramUrl,q),l(),g(i.profile.instagramHandle),l(4),g(i.profile.address),l(3),g(i.profile.ownerName),l(2),g(i.profile.ownerRoleLabel),l(2),g(i.profile.ownerBio),l(11),g(i.profile.teamIntro),l(3),S("Titolare: ",i.profile.ownerName,""),l(2),S("Tatuatori: ",i.tattooersCount,""),l(),m("ngIf",i.guestCount>0),l(),m("ngIf",i.team==null?null:i.team.length)("ngIfElse",o)}},dependencies:[v,me,R,P,N,Ce],styles:["[_nghost-%COMP%]{display:block;background:#000;color:#fff;font-family:Barlow Semi Condensed,sans-serif}.about-section[_ngcontent-%COMP%], .team-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:3.2rem 1.2rem}.about-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1.1fr;gap:2rem;align-items:center}.about-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:460px;display:block;border:2px solid #1f1f1f;padding:10px;background:#000;box-shadow:0 0 20px #1f1f1e2e}.about-text[_ngcontent-%COMP%]{max-width:560px}.eyebrow[_ngcontent-%COMP%]{margin:0 0 .6rem;color:#8f8f8f;text-transform:uppercase;letter-spacing:.14em;font-size:.78rem}.title[_ngcontent-%COMP%]{margin:0 0 1.1rem;text-transform:uppercase;font-size:clamp(1.9rem,3.6vw,2.5rem)}.about-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .95rem;line-height:1.65;color:#a8a8a8}.meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;font-size:.9rem}.meta[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;border-bottom:1px solid #2d2d2d}.approach-box[_ngcontent-%COMP%]{margin-top:.75rem;padding:.8rem .9rem;border:1px solid #2b2b2b;border-radius:8px;background:#0e0e0e}.approach-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem}.approach-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0 .4rem;color:#c5c5c5;font-size:.9rem}.approach-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#a8a8a8;font-size:.88rem;line-height:1.45}.hero-actions[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;gap:.55rem;flex-wrap:wrap}.ghost-btn[_ngcontent-%COMP%], .primary-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;height:38px;padding:0 .9rem;border-radius:999px;text-decoration:none;font-weight:600;font-size:.88rem}.ghost-btn[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.14);color:#fff;background:#ffffff05}.primary-btn[_ngcontent-%COMP%]{border:none;color:#fff;background:linear-gradient(135deg,#f56040,#e1306c,#5851db)}.team-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;text-transform:uppercase;letter-spacing:.12em;font-size:1.3rem}.team-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.6rem 0 0;color:#a8a8a8;line-height:1.6}.team-badges[_ngcontent-%COMP%]{margin-top:.7rem;display:flex;flex-wrap:wrap;gap:.45rem}.chip[_ngcontent-%COMP%]{padding:.34rem .62rem;border-radius:999px;font-size:.76rem;text-transform:uppercase;letter-spacing:.1em;border:1px solid rgba(255,255,255,.12);background:#ffffff08}.team-grid[_ngcontent-%COMP%]{margin-top:1rem;display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:1rem}.artist-card[_ngcontent-%COMP%]{border-radius:16px;border:1px solid rgba(255,255,255,.08);background:#ffffff05;overflow:hidden;color:#fff}.thumb[_ngcontent-%COMP%]{aspect-ratio:4/5;background:#050505}.thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.artist-meta[_ngcontent-%COMP%]{padding:.85rem .9rem .35rem}.artist-meta[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.05rem}.artist-meta[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{margin:.2rem 0 .45rem;color:#c7c7c7;font-size:.88rem}.artist-meta[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]{margin:0;color:#a8a8a8;font-size:.88rem;line-height:1.45}.actions[_ngcontent-%COMP%]{margin:0;padding:.75rem .9rem .95rem}.empty[_ngcontent-%COMP%]{margin-top:1rem;color:#9a9a9a}@media (max-width: 980px){.about-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr}.about-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.team-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (max-width: 640px){.about-section[_ngcontent-%COMP%], .team-section[_ngcontent-%COMP%]{padding:2.2rem .95rem}.team-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function Fo(n,t){n&1&&(a(0,"div",33),s(1," Inserisci un nome valido "),r())}function Ao(n,t){n&1&&(a(0,"div",33),s(1," Inserisci un\u2019email valida "),r())}function No(n,t){n&1&&(a(0,"div",33),s(1," Scrivi almeno 10 caratteri "),r())}var ht=class n{fb=O(tt);contactForm;heroImageUrl="/personale/1.jpg";whatsappNumber="393400998312";address="Via al Carmine 1A, 07100 Sassari (SS)";phoneDisplay="+39 340 099 8312";email="sarapushi@rebistattoo.info";instagramUrl="https://www.instagram.com/rebis_tattoo/";instagramHandle="@rebis_tattoo";ngOnInit(){this.contactForm=this.fb.group({name:["",[V.required,V.minLength(2)]],email:["",[V.required,V.email]],message:["",[V.required,V.minLength(10)]]})}openChat(){}onSubmit(){if(this.contactForm.invalid){this.contactForm.markAllAsTouched();return}console.log("[CONTATTI] submit",this.contactForm.value),this.contactForm.reset(),alert("Messaggio inviato. Ti risponderemo il prima possibile.")}get f(){return this.contactForm.controls}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-contatti"]],standalone:!0,features:[b],decls:69,vars:14,consts:[[1,"rt-contacts"],[1,"rt-hero"],[1,"rt-container"],[1,"rt-title"],[1,"rt-subtitle"],[1,"rt-split"],[1,"rt-paper"],[1,"rt-brand"],[1,"rt-lines"],[1,"rt-line"],[1,"rt-ico"],[1,"rt-text"],[1,"rt-link",3,"href"],[1,"rt-dot"],["target","_blank","rel","noopener",1,"rt-link",3,"href"],[1,"rt-cta"],["routerLink","/fast-booking",1,"rt-btn","rt-btn--primary"],["type","button",1,"rt-btn","rt-btn--accent",3,"click"],[1,"rt-mini"],[1,"rt-formBlock"],[1,"rt-formTitle"],[1,"rt-form",3,"ngSubmit","formGroup"],[1,"rt-grid"],[1,"rt-field"],["type","text","formControlName","name","placeholder","Il tuo nome"],["class","rt-err",4,"ngIf"],["type","email","formControlName","email","placeholder","nome@email.com"],[1,"rt-field","rt-field--full"],["rows","4","formControlName","message","placeholder","Zona, dimensioni, idea..."],[1,"rt-actions"],["type","submit",1,"rt-btn","rt-btn--accent",3,"disabled"],["aria-hidden","true",1,"rt-image"],["alt","Dettaglio tatuaggio Rebis Tattoo",3,"src"],[1,"rt-err"]],template:function(e,i){e&1&&(a(0,"section",0)(1,"header",1)(2,"div",2)(3,"h1",3),s(4,"CONTATTI"),r(),a(5,"p",4),s(6,"Rebis Tattoo \xB7 Studio di tatuaggi a Sassari"),r()()(),a(7,"main",2)(8,"div",5)(9,"section",6)(10,"h2",7),s(11,"REBIS TATTOO"),r(),a(12,"div",8)(13,"div",9)(14,"span",10),s(15,"\u{1F4CD}"),r(),a(16,"span",11),s(17),r()(),a(18,"div",9)(19,"span",10),s(20,"\u{1F4DE}"),r(),a(21,"a",12),s(22),r(),a(23,"span",13),s(24,"\xB7"),r(),a(25,"a",14),s(26," WhatsApp "),r()(),a(27,"div",9)(28,"span",10),s(29,"\u2709\uFE0F"),r(),a(30,"a",12),s(31),r()(),a(32,"div",9)(33,"span",10),s(34,"\u{1F4F7}"),r(),a(35,"a",14),s(36),r()()(),a(37,"div",15)(38,"a",16),s(39," PRENOTA UNA CONSULENZA "),r(),a(40,"button",17),_("click",function(){return i.openChat()}),s(41," APRI LA CHAT "),r()(),a(42,"div",18),s(43," Disponibilit\xE0: su appuntamento (scrivici per confermare) "),r(),a(44,"div",19)(45,"h3",20),s(46,"Oppure scrivici"),r(),a(47,"form",21),_("ngSubmit",function(){return i.onSubmit()}),a(48,"div",22)(49,"div",23)(50,"label"),s(51,"Nome"),r(),u(52,"input",24),d(53,Fo,2,0,"div",25),r(),a(54,"div",23)(55,"label"),s(56,"Email"),r(),u(57,"input",26),d(58,Ao,2,0,"div",25),r(),a(59,"div",27)(60,"label"),s(61,"Messaggio"),r(),u(62,"textarea",28),d(63,No,2,0,"div",25),r()(),a(64,"div",29)(65,"button",30),s(66," INVIA "),r()()()()(),a(67,"aside",31),u(68,"img",32),r()()()()),e&2&&(l(17),g(i.address),l(4),m("href","tel:"+i.phoneDisplay.replaceAll(" ",""),q),l(),S(" ",i.phoneDisplay," "),l(3),m("href","https://wa.me/"+i.whatsappNumber,q),l(5),m("href","mailto:"+i.email,q),l(),g(i.email),l(4),m("href",i.instagramUrl,q),l(),g(i.instagramHandle),l(11),m("formGroup",i.contactForm),l(6),m("ngIf",i.f.name.touched&&i.f.name.invalid),l(5),m("ngIf",i.f.email.touched&&i.f.email.invalid),l(5),m("ngIf",i.f.message.touched&&i.f.message.invalid),l(2),m("disabled",i.contactForm.invalid),l(3),m("src",i.heroImageUrl,q))},dependencies:[v,R,it,we,Me,Se,Pe,Ze,et,Ce],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block}.rt-contacts[_ngcontent-%COMP%]{background:var(--public-surface-muted);color:var(--public-ink)}.rt-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 16px}.rt-hero[_ngcontent-%COMP%]{background:var(--public-primary);color:var(--public-primary-ink);padding:46px 0 26px;border-bottom:1px solid rgba(255,255,255,.08)}.rt-title[_ngcontent-%COMP%]{margin:0;font-size:clamp(34px,4vw,54px);letter-spacing:1px;font-weight:900}.rt-subtitle[_ngcontent-%COMP%]{margin:10px 0 0;color:#f1f1f1b3;font-size:14px}.rt-split[_ngcontent-%COMP%]{margin:22px 0 70px;display:grid;grid-template-columns:1.05fr .95fr;gap:18px}@media (max-width: 900px){.rt-split[_ngcontent-%COMP%]{grid-template-columns:1fr}}.rt-paper[_ngcontent-%COMP%]{background:var(--public-surface);border:1px solid rgba(0,0,0,.12);border-radius:var(--public-radius-lg);box-shadow:var(--public-shadow-soft);padding:26px 22px}.rt-brand[_ngcontent-%COMP%]{margin:0 0 14px;font-size:28px;letter-spacing:1px;font-weight:900}.rt-lines[_ngcontent-%COMP%]{display:grid;gap:12px;margin-bottom:16px}.rt-line[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:10px;font-size:15px}.rt-ico[_ngcontent-%COMP%]{width:20px;opacity:.85}.rt-text[_ngcontent-%COMP%]{color:#000000c7}.rt-link[_ngcontent-%COMP%]{color:var(--public-ink);text-decoration:none;border-bottom:1px solid rgba(0,0,0,.25);padding-bottom:2px;font-weight:700}.rt-link[_ngcontent-%COMP%]:hover{border-color:#000000a6}.rt-dot[_ngcontent-%COMP%]{margin:0 8px;color:#00000059}.rt-cta[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;margin:14px 0 8px}.rt-btn[_ngcontent-%COMP%]{height:44px;padding:0 16px;border-radius:10px;border:1px solid transparent;font-weight:900;letter-spacing:.8px;text-transform:uppercase;cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;text-decoration:none;transition:transform .12s ease,filter .12s ease}.rt-btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.rt-btn[_ngcontent-%COMP%]:disabled{opacity:.55;cursor:not-allowed}.rt-btn--primary[_ngcontent-%COMP%]{background:var(--public-primary);color:var(--public-primary-ink)}.rt-btn--primary[_ngcontent-%COMP%]:hover{filter:brightness(1.05)}.rt-btn--accent[_ngcontent-%COMP%]{background:var(--public-accent);color:var(--public-accent-ink);border-color:#00000038}.rt-btn--accent[_ngcontent-%COMP%]:hover{filter:brightness(1.05)}.rt-mini[_ngcontent-%COMP%]{margin-top:10px;font-size:12px;color:#0009}.rt-formBlock[_ngcontent-%COMP%]{margin-top:18px;border-top:1px solid rgba(0,0,0,.1);padding-top:16px}.rt-formTitle[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;font-weight:900;letter-spacing:.4px}.rt-form[_ngcontent-%COMP%]{display:grid;gap:12px}.rt-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:14px 18px}@media (max-width: 900px){.rt-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.rt-field[_ngcontent-%COMP%]{display:grid;gap:6px}.rt-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:900;letter-spacing:.4px;text-transform:uppercase;color:#0009}.rt-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .rt-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:0;outline:none;background:transparent;border-bottom:1px solid rgba(0,0,0,.22);padding:10px 0;font-size:14px;color:var(--public-ink)}.rt-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .rt-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-bottom-color:#000000bf}.rt-field--full[_ngcontent-%COMP%]{grid-column:1/-1}.rt-err[_ngcontent-%COMP%]{font-size:12px;color:#b00020}.rt-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.rt-image[_ngcontent-%COMP%]{background:var(--public-primary);border-radius:var(--public-radius-lg);overflow:hidden;box-shadow:var(--public-shadow-hard);border:1px solid rgba(0,0,0,.12)}.rt-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;min-height:520px;object-fit:cover;transform:scale(1.02)}@media (max-width: 900px){.rt-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-height:280px}}']})};var bi=(n,t)=>L(void 0,null,function*(){let e=O(X),i=O(te),o=yield e.resolveCurrentUser();return o?o.role!=="client"&&o.role!=="admin"&&o.role!=="staff"?i.createUrlTree(["/"]):!0:(localStorage.setItem("pre-log",t.url||"/dashboard"),i.createUrlTree(["/login"]))});var _t=class n{constructor(t,e){this.auth=t;this.router=e}canActivate(t,e){return L(this,null,function*(){let i=yield this.auth.resolveCurrentUser();return i?i.role!=="admin"&&i.role!=="staff"?this.router.createUrlTree(["/access-denied"]):!0:(localStorage.setItem("pre-log",e.url||"/staff"),this.router.createUrlTree(["/login"]))})}static \u0275fac=function(e){return new(e||n)(J(X),J(te))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var Bo=["*"],xt=class n{constructor(t){this.store=t;this.store.hydrateFromHomeSeed()}title="REBIS TATTOO";static \u0275fac=function(e){return new(e||n)(F(U))};static \u0275cmp=x({type:n,selectors:[["app-fast-booking-layout"]],inputs:{title:"title"},standalone:!0,features:[b],ngContentSelectors:Bo,decls:5,vars:0,consts:[[1,"shell"],[1,"top"],[1,"main"]],template:function(e,i){e&1&&(cn(),a(0,"div",0)(1,"header",1),s(2,"REBIS TATTOO"),r(),a(3,"main",2),mn(4),r()())},dependencies:[v],styles:[".shell[_ngcontent-%COMP%]{min-height:100vh;background:#fff;color:#000;display:flex;flex-direction:column}.top[_ngcontent-%COMP%]{height:56px;display:flex;align-items:center;justify-content:center;border-bottom:1px solid #ededed;font-weight:900;letter-spacing:.12em}.main[_ngcontent-%COMP%]{flex:1}"],changeDetection:0})};var zo=(n,t)=>t.id;function Ro(n,t){n&1&&(a(0,"div",6),u(1,"mat-spinner",8),r())}function Vo(n,t){if(n&1&&u(0,"img",13),n&2){let e=f().$implicit;m("src",e.photoUrl,q)}}function Wo(n,t){n&1&&(a(0,"mat-icon"),s(1,"person"),r())}function jo(n,t){n&1&&(a(0,"span",25)(1,"mat-icon"),s(2,"check"),r()())}function Uo(n,t){n&1&&u(0,"span",26)}function Yo(n,t){if(n&1){let e=T();a(0,"mat-card",10),_("click",function(){let o=y(e).$implicit,c=f(2);return M(c.select(o))}),a(1,"div",11)(2,"div",12),d(3,Vo,1,1,"img",13)(4,Wo,2,0,"mat-icon"),r(),a(5,"div",14)(6,"div",15),s(7),r(),a(8,"div",16)(9,"span",17),s(10,"Realismo / Fine line / Blackwork"),r()(),a(11,"div",18),u(12,"span",19),a(13,"span",20),s(14,"Disponibile oggi"),r(),a(15,"span",21),s(16,"\u2022"),r(),a(17,"span",22),s(18,"\u2605 4.8"),r(),a(19,"span",23),s(20,"(120 recensioni)"),r()()()(),a(21,"div",24),d(22,jo,3,0,"span",25)(23,Uo,1,0,"span",26),r()()}if(n&2){let e=t.$implicit,i=f(2);ge("active",i.selectedId()===e.id),l(3),z(e!=null&&e.photoUrl?3:4),l(4),g(e.name),l(15),z(i.selectedId()===e.id?22:23)}}function $o(n,t){if(n&1&&(a(0,"div",7),Le(1,Yo,24,5,"mat-card",9,zo),r()),n&2){let e=f();l(),ze(e.artists())}}var bt=class n{store=O(U);artists=this.store.artists;loading=this.store.loadingArtists;selectedId=ce(()=>this.store.draft().artistId);select(t){this.store.setArtist(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-step-artist"]],standalone:!0,features:[b],decls:17,vars:1,consts:[[1,"step"],[1,"head"],[1,"h1"],[1,"p"],["aria-label","info consulenza",1,"chips"],["matChipAvatar",""],[1,"center"],[1,"list"],["diameter","32"],["role","button","tabindex","0",1,"artist",3,"active"],["role","button","tabindex","0",1,"artist",3,"click"],[1,"left"],[1,"avatar"],["alt","",3,"src"],[1,"info"],[1,"name"],[1,"meta"],[1,"styles"],[1,"submeta"],[1,"dot"],[1,"avail"],[1,"sep"],[1,"rate"],[1,"muted"],[1,"right"],[1,"badge"],[1,"radio"]],template:function(e,i){e&1&&(a(0,"section",0)(1,"header",1)(2,"h1",2),s(3,"ARTISTA"),r(),a(4,"p",3),s(5,"Scegli un artista per vedere giorni e orari disponibili"),r(),a(6,"mat-chip-set",4)(7,"mat-chip")(8,"mat-icon",5),s(9,"schedule"),r(),s(10," Consulenza 60 min "),r(),a(11,"mat-chip")(12,"mat-icon",5),s(13,"payments"),r(),s(14," Caparra \u20AC50 "),r()()(),d(15,Ro,2,0,"div",6)(16,$o,3,0,"div",7),r()),e&2&&(l(15),z(i.loading()?15:16))},dependencies:[v,Oe,ne,P,A,N,st,li,lt],styles:[".step[_ngcontent-%COMP%]{max-width:860px;margin:0 auto;padding:20px 16px 32px}.head[_ngcontent-%COMP%]{margin-bottom:14px}.h1[_ngcontent-%COMP%]{margin:0 0 6px;font-size:28px;font-weight:900;letter-spacing:.02em}.p[_ngcontent-%COMP%]{margin:0 0 10px;opacity:.75}.chips[_ngcontent-%COMP%]{margin-top:8px}.center[_ngcontent-%COMP%]{display:grid;place-items:center;min-height:240px}.list[_ngcontent-%COMP%]{display:grid;gap:12px}.artist[_ngcontent-%COMP%]{border-radius:16px;padding:14px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:transform .12s ease,box-shadow .12s ease,border-color .12s ease;border:1px solid rgba(0,0,0,.08)}.artist[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.artist.active[_ngcontent-%COMP%]{border:2px solid rgba(25,118,210,.55);box-shadow:0 10px 30px #1976d21a}.left[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;min-width:0}.avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;overflow:hidden;background:#1976d214;display:grid;place-items:center;flex:0 0 auto}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.info[_ngcontent-%COMP%]{min-width:0}.name[_ngcontent-%COMP%]{font-size:18px;font-weight:900;margin-bottom:2px}.meta[_ngcontent-%COMP%]{font-size:13px;opacity:.75;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.submeta[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;margin-top:6px;font-size:12px;opacity:.8;flex-wrap:wrap}.dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#4caf50;display:inline-block}.sep[_ngcontent-%COMP%]{opacity:.5}.muted[_ngcontent-%COMP%]{opacity:.65}.right[_ngcontent-%COMP%]{display:flex;align-items:center}.radio[_ngcontent-%COMP%]{width:18px;height:18px;border-radius:50%;border:2px solid rgba(0,0,0,.2)}.badge[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:50%;background:#1976d21f;display:grid;place-items:center}@media (max-width: 520px){.avatar[_ngcontent-%COMP%]{width:52px;height:52px}.name[_ngcontent-%COMP%]{font-size:17px}}"],changeDetection:0})};var vt=class n{ngOnInit(){console.log("intro")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-step-intro"]],standalone:!0,features:[b],decls:38,vars:0,consts:[[1,"step"],[1,"head"],[1,"title"],[1,"sub"],[1,"card"],[1,"row"],[1,"ico"],[1,"txt"],[1,"k"],[1,"v"],[1,"note"],[1,"hint"]],template:function(e,i){e&1&&(a(0,"section",0)(1,"header",1)(2,"h1",2),s(3," PRENOTA"),u(4,"br"),s(5," LA TUA"),u(6,"br"),s(7," CONSULENZA "),r(),a(8,"p",3),s(9," La consulenza serve a valutare il progetto, definire tempi e costi. L\u2019importo versato verr\xE0 "),a(10,"b"),s(11,"scalato dal prezzo finale"),r(),s(12," del tatuaggio. "),r()(),a(13,"mat-card",4)(14,"div",5)(15,"mat-icon",6),s(16,"schedule"),r(),a(17,"div",7)(18,"div",8),s(19,"Durata"),r(),a(20,"div",9),s(21,"Consulenza 60 min"),r()()(),a(22,"div",5)(23,"mat-icon",6),s(24,"payments"),r(),a(25,"div",7)(26,"div",8),s(27,"Caparra"),r(),a(28,"div",9),s(29,"\u20AC50"),r()()(),u(30,"mat-divider"),a(31,"div",10),s(32," Prenotabili solo consulenze. Le sessioni tattoo vengono pianificate dopo l\u2019approvazione del progetto. "),r()(),a(33,"div",11),s(34," Premi "),a(35,"b"),s(36,"Continua"),r(),s(37," per scegliere l\u2019artista. "),r()())},dependencies:[v,P,A,pe,N],styles:[".step[_ngcontent-%COMP%]{max-width:860px;margin:0 auto;padding:20px 16px 32px}.head[_ngcontent-%COMP%]{margin-bottom:16px}.title[_ngcontent-%COMP%]{margin:0 0 10px;font-size:clamp(34px,4vw,48px);line-height:1.02;font-weight:900;letter-spacing:.02em}.sub[_ngcontent-%COMP%]{margin:0;opacity:.8;line-height:1.5}.card[_ngcontent-%COMP%]{border-radius:16px;padding:14px}.row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;padding:10px 4px}.ico[_ngcontent-%COMP%]{opacity:.7}.txt[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%]{font-size:12px;opacity:.65}.txt[_ngcontent-%COMP%]   .v[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.note[_ngcontent-%COMP%]{padding-top:12px;font-size:13px;opacity:.75;line-height:1.45}.hint[_ngcontent-%COMP%]{margin-top:14px;font-size:12px;opacity:.7}"],changeDetection:0})};var qo=(n,t)=>t.value,Ho=(n,t)=>t.time;function Go(n,t){if(n&1){let e=T();a(0,"button",10),_("click",function(){let o=y(e).$implicit,c=f();return M(c.pickDate(o.value))}),s(1),r()}if(n&2){let e=t.$implicit,i=f();ge("active",i.selectedDate()===e.value),l(),S(" ",e.label," ")}}function Qo(n,t){n&1&&(a(0,"div",8),u(1,"mat-progress-spinner",11),a(2,"span"),s(3,"Carico disponibilit\xE0\u2026"),r()())}function Xo(n,t){if(n&1&&(a(0,"div",12)(1,"mat-icon"),s(2,"error"),r(),a(3,"span"),s(4),r()()),n&2){let e=f(2);l(4),g(e.error())}}function Ko(n,t){n&1&&(a(0,"div",13),s(1," Nessuno slot disponibile per questo giorno. "),r())}function Jo(n,t){if(n&1){let e=T();a(0,"button",15),_("click",function(){let o=y(e).$implicit,c=f(2);return M(c.pickTime(o.time))}),a(1,"mat-icon",16),s(2,"schedule"),r(),s(3),r()}if(n&2){let e=t.$implicit,i=f(2);ge("active",i.draft().time===e.time),l(3),S(" ",e.time," ")}}function Zo(n,t){if(n&1&&(d(0,Xo,5,1,"div",12)(1,Ko,2,0,"div",13),a(2,"div",9),Le(3,Jo,4,3,"button",14,Ho),r()),n&2){let e=f();z(e.error()&&e.selectedDate()?0:-1),l(),z(e.slots().length===0&&e.selectedDate()?1:-1),l(2),ze(e.slots())}}var Ct=class n{store=O(U);draft=this.store.draft;selectedDate=this.store.selectedDate;slots=this.store.slots;loading=this.store.loadingSlots;error=this.store.error;days=ce(()=>{let t=[],e=new Date;for(let i=0;i<7;i++){let o=new Date(e);o.setDate(e.getDate()+i);let c=o.getFullYear(),p=String(o.getMonth()+1).padStart(2,"0"),h=String(o.getDate()).padStart(2,"0"),I=`${c}-${p}-${h}`,w=o.toLocaleDateString("it-IT",{weekday:"short",day:"2-digit",month:"short"});t.push({label:w,value:I})}return t});pickDate(t){this.store.setDate(t)}pickTime(t){let e=this.selectedDate();this.store.setWhen(e,t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-step-when"]],standalone:!0,features:[b],decls:17,vars:1,consts:[[1,"step"],[1,"head"],[1,"h1"],[1,"p"],[1,"card"],[1,"label"],[1,"days"],["mat-stroked-button","",1,"day",3,"active"],[1,"loading"],[1,"times"],["mat-stroked-button","",1,"day",3,"click"],["diameter","22","mode","indeterminate"],[1,"error"],[1,"empty"],["mat-stroked-button","",1,"time",3,"active"],["mat-stroked-button","",1,"time",3,"click"],[1,"ico"]],template:function(e,i){e&1&&(a(0,"section",0)(1,"header",1)(2,"h1",2),s(3,"QUANDO"),r(),a(4,"p",3),s(5,"Seleziona un giorno e poi un orario disponibile per la consulenza."),r()(),a(6,"mat-card",4)(7,"div",5),s(8,"Giorno"),r(),a(9,"div",6),Le(10,Go,2,3,"button",7,qo),r(),u(12,"mat-divider"),a(13,"div",5),s(14,"Orari disponibili"),r(),d(15,Qo,4,0,"div",8)(16,Zo,5,2,"div",9),r()()),e&2&&(l(10),ze(i.days()),l(5),z(i.loading()?15:16))},dependencies:[v,P,A,H,pe,N,ne,Ie,Oe,ci,Ee],styles:[".step[_ngcontent-%COMP%]{max-width:860px;margin:0 auto;padding:20px 16px 32px}.h1[_ngcontent-%COMP%]{margin:0 0 6px;font-size:28px;font-weight:900}.p[_ngcontent-%COMP%]{margin:0 0 12px;opacity:.75}.card[_ngcontent-%COMP%]{border-radius:16px;padding:14px}.label[_ngcontent-%COMP%]{font-size:12px;font-weight:800;opacity:.7;margin:8px 0 10px;letter-spacing:.04em}.days[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:10px}.day[_ngcontent-%COMP%]{border-radius:999px!important;height:38px}.day.active[_ngcontent-%COMP%]{border-color:#1976d28c!important;box-shadow:0 10px 30px #1976d21a}.loading[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;padding:12px 0;opacity:.75}.times[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;padding-top:10px}.time[_ngcontent-%COMP%]{border-radius:12px!important;height:42px}.time.active[_ngcontent-%COMP%]{border-color:#1976d2b3!important;background:#1976d20f}.ico[_ngcontent-%COMP%]{margin-right:6px;opacity:.7}.error[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;padding:10px;border-radius:12px;background:#f4433614;margin-top:10px}.empty[_ngcontent-%COMP%]{padding:12px 0;opacity:.7}"],changeDetection:0})};function er(n,t){n&1&&(a(0,"mat-hint"),s(1,"Nome precompilato dal tuo profilo"),r())}function tr(n,t){n&1&&(a(0,"mat-hint"),s(1,"Contatto associato al tuo account"),r())}var yt=class n{store=O(U);draft=this.store.draft;update(t,e){this.store.draft.update(i=>se(K({},i),{[t]:e}))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-step-details"]],standalone:!0,features:[b],decls:23,vars:7,consts:[[1,"step"],[1,"head"],[1,"h1"],[1,"p"],[1,"card"],["appearance","outline",1,"full"],["matInput","","placeholder","Es. Mario Rossi",3,"input","value","disabled"],[4,"ngIf"],["matInput","","placeholder","email o numero",3,"input","value","disabled"],["matInput","","rows","4","placeholder","Descrivi brevemente l\u2019idea del tatuaggio",3,"input","value"],[1,"privacy"]],template:function(e,i){e&1&&(a(0,"section",0)(1,"header",1)(2,"h1",2),s(3,"I TUOI DATI"),r(),a(4,"p",3),s(5,"Inserisci i dati per completare la richiesta di consulenza."),r()(),a(6,"mat-card",4)(7,"mat-form-field",5)(8,"mat-label"),s(9,"Nome e Cognome"),r(),a(10,"input",6),_("input",function(c){return i.update("name",c.target.value)}),r(),d(11,er,2,0,"mat-hint",7),r(),a(12,"mat-form-field",5)(13,"mat-label"),s(14,"Email o Telefono"),r(),a(15,"input",8),_("input",function(c){return i.update("contact",c.target.value)}),r(),d(16,tr,2,0,"mat-hint",7),r(),a(17,"mat-form-field",5)(18,"mat-label"),s(19,"Descrizione del progetto"),r(),a(20,"textarea",9),_("input",function(c){return i.update("description",c.target.value)}),r()(),a(21,"div",10),s(22," I dati verranno usati solo per la gestione della consulenza. "),r()()()),e&2&&(l(10),m("value",i.draft().name||"")("disabled",i.store.isNameLocked()),l(),m("ngIf",i.store.isNameLocked()),l(4),m("value",i.draft().contact||"")("disabled",i.store.isContactLocked()),l(),m("ngIf",i.store.isContactLocked()),l(4),m("value",i.draft().description||""))},dependencies:[v,R,nt,P,De,Te,rt,Jn,N],styles:[".step[_ngcontent-%COMP%]{max-width:860px;margin:0 auto;padding:20px 16px 32px}.h1[_ngcontent-%COMP%]{margin:0 0 6px;font-size:28px;font-weight:900}.p[_ngcontent-%COMP%]{margin:0 0 12px;opacity:.75}.card[_ngcontent-%COMP%]{border-radius:16px;padding:14px}.full[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.privacy[_ngcontent-%COMP%]{font-size:12px;opacity:.7;padding-top:6px}"],changeDetection:0})};var Mt=class n{store=O(U);d=this.store.draft;deposit=50;whenText=ce(()=>{let t=this.d();return!t.date||!t.time?"\u2014":`${t.date} \xB7 ${t.time}`});contactText=ce(()=>{let t=this.d();return t.contact?t.contact:"\u2014"});descriptionText=ce(()=>{let t=this.d();return t.description?t.description:"\u2014"});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-step-summary"]],standalone:!0,features:[b],decls:50,vars:6,consts:[[1,"step"],[1,"head"],[1,"h1"],[1,"p"],[1,"card"],[1,"row"],[1,"k"],[1,"v"],[1,"block"],[1,"desc"],[1,"price"],[1,"disc"]],template:function(e,i){e&1&&(a(0,"section",0)(1,"header",1)(2,"h1",2),s(3,"RIEPILOGO"),r(),a(4,"p",3),s(5,"Controlla i dati prima di passare al pagamento."),r()(),a(6,"mat-card",4)(7,"div",5)(8,"span",6),s(9,"Tipo"),r(),a(10,"span",7),s(11,"Consulenza"),r()(),a(12,"div",5)(13,"span",6),s(14,"Artista"),r(),a(15,"span",7),s(16),r()(),a(17,"div",5)(18,"span",6),s(19,"Quando"),r(),a(20,"span",7),s(21),r()()(),a(22,"mat-card",4)(23,"div",5)(24,"span",6),s(25,"Nome"),r(),a(26,"span",7),s(27),r()(),a(28,"div",5)(29,"span",6),s(30,"Contatto"),r(),a(31,"span",7),s(32),r()(),u(33,"mat-divider"),a(34,"div",8)(35,"div",6),s(36,"Descrizione"),r(),a(37,"div",9),s(38),r()()(),a(39,"mat-card",10)(40,"div",5)(41,"span",6),s(42,"Importo consulenza"),r(),a(43,"span",7),s(44),r()(),a(45,"div",11),s(46," L\u2019importo verr\xE0 "),a(47,"b"),s(48,"scalato dal prezzo finale"),r(),s(49," in caso di conferma del progetto. "),r()()()),e&2&&(l(16),g(i.d().artistName||"\u2014"),l(5),g(i.whenText()),l(6),g(i.d().name||"\u2014"),l(5),g(i.contactText()),l(6),g(i.descriptionText()),l(6),S("\u20AC",i.deposit,""))},dependencies:[v,P,pe,N],styles:[".step[_ngcontent-%COMP%]{max-width:860px;margin:0 auto;padding:20px 16px 32px}.h1[_ngcontent-%COMP%]{margin:0 0 6px;font-size:28px;font-weight:900}.p[_ngcontent-%COMP%]{margin:0 0 12px;opacity:.75}.card[_ngcontent-%COMP%]{border-radius:16px;padding:14px;margin-bottom:12px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:14px;padding:8px 0}.k[_ngcontent-%COMP%]{font-size:13px;opacity:.7}.v[_ngcontent-%COMP%]{font-size:14px;font-weight:800}.block[_ngcontent-%COMP%]{padding-top:12px}.desc[_ngcontent-%COMP%]{padding-top:8px;opacity:.85;line-height:1.45}.price[_ngcontent-%COMP%]{border-radius:16px;padding:14px}.disc[_ngcontent-%COMP%]{margin-top:10px;font-size:12px;opacity:.75;line-height:1.45}"],changeDetection:0})};var yi="clover",nr=function(t){return t===3?"v3":t},Mi="https://js.stripe.com",ir="".concat(Mi,"/").concat(yi,"/stripe.js"),or=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,rr=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,vi="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",ar=function(t){return or.test(t)||rr.test(t)},sr=function(){for(var t=document.querySelectorAll('script[src^="'.concat(Mi,'"]')),e=0;e<t.length;e++){var i=t[e];if(ar(i.src))return i}return null},Ci=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",i=document.createElement("script");i.src="".concat(ir).concat(e);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},lr=function(t,e){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"8.4.0",startTime:e})},Ue=null,St=null,Pt=null,cr=function(t){return function(e){t(new Error("Failed to load Stripe.js",{cause:e}))}},mr=function(t,e){return function(){window.Stripe?t(window.Stripe):e(new Error("Stripe.js not available"))}},pr=function(t){return Ue!==null?Ue:(Ue=new Promise(function(e,i){if(typeof window>"u"||typeof document>"u"){e(null);return}if(window.Stripe&&t&&console.warn(vi),window.Stripe){e(window.Stripe);return}try{var o=sr();if(o&&t)console.warn(vi);else if(!o)o=Ci(t);else if(o&&Pt!==null&&St!==null){var c;o.removeEventListener("load",Pt),o.removeEventListener("error",St),(c=o.parentNode)===null||c===void 0||c.removeChild(o),o=Ci(t)}Pt=mr(e,i),St=cr(i),o.addEventListener("load",Pt),o.addEventListener("error",St)}catch(p){i(p);return}}),Ue.catch(function(e){return Ue=null,Promise.reject(e)}))},dr=function(t,e,i){if(t===null)return null;var o=e[0],c=o.match(/^pk_test/),p=nr(t.version),h=yi;c&&p!==h&&console.warn("Stripe.js@".concat(p," was loaded on the page, but @stripe/stripe-js@").concat("8.4.0"," expected Stripe.js@").concat(h,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var I=t.apply(void 0,e);return lr(I,i),I},Ye,Si=!1,Pi=function(){return Ye||(Ye=pr(null).catch(function(t){return Ye=null,Promise.reject(t)}),Ye)};Promise.resolve().then(function(){return Pi()}).catch(function(n){Si||console.warn(n)});var wi=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Si=!0;var o=Date.now();return Pi().then(function(c){return dr(c,e,o)})};function ur(n,t){n&1&&u(0,"mat-progress-spinner",4)}function fr(n,t){n&1&&(a(0,"span"),s(1,"Paga ora"),r())}var wt=class n{publishableKey;clientSecret;paymentSuccess=new Vt;paymentError=new Vt;stripePromise;elements;paymentElement;paying=!1;elementReady=!1;ngOnInit(){if(!this.publishableKey||!this.clientSecret){console.error("StripePaymentComponent: publishableKey o clientSecret mancanti"),this.paymentError.emit("Configurazione Stripe non valida.");return}this.stripePromise=wi(this.publishableKey),this.initStripe()}initStripe(){return L(this,null,function*(){try{let t=yield this.stripePromise;if(!t){console.error("Stripe non inizializzato"),this.paymentError.emit("Stripe non disponibile.");return}console.log("Inizializzo Elements con clientSecret:",this.clientSecret),this.elements=t.elements({clientSecret:this.clientSecret}),this.paymentElement=this.elements.create("payment"),this.paymentElement.on("ready",()=>{console.log("Payment Element ready"),this.elementReady=!0}),this.paymentElement.on("loaderror",e=>{console.error("Payment Element loaderror",e),this.paymentError.emit("Errore nel caricamento del modulo di pagamento Stripe.")}),this.paymentElement.mount("#payment-element")}catch(t){console.error("Errore initStripe:",t),this.paymentError.emit(t?.message||"Errore Stripe.")}})}ngOnDestroy(){this.paymentElement?.unmount()}pay(){return L(this,null,function*(){if(!this.elements||!this.stripePromise){this.paymentError.emit("Stripe non inizializzato correttamente.");return}if(!this.elementReady){this.paymentError.emit("Il modulo di pagamento non \xE8 pronto. Riprova tra qualche secondo.");return}this.paying=!0;let t=yield this.stripePromise;if(!t){this.paymentError.emit("Stripe non disponibile."),this.paying=!1;return}let{error:e}=yield this.elements.submit();if(e){console.error("Errore elements.submit():",e),this.paymentError.emit(e.message||"Errore nella validazione del pagamento."),this.paying=!1;return}let{error:i}=yield t.confirmPayment({elements:this.elements,clientSecret:this.clientSecret,redirect:"if_required"});this.paying=!1,i?(console.error("Errore confirmPayment:",i),this.paymentError.emit(i.message||"Pagamento fallito.")):this.paymentSuccess.emit()})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-stripe-payment"]],inputs:{publishableKey:"publishableKey",clientSecret:"clientSecret"},outputs:{paymentSuccess:"paymentSuccess",paymentError:"paymentError"},standalone:!0,features:[b],decls:4,vars:3,consts:[["id","payment-element",1,"payment-element"],["mat-raised-button","","color","primary",3,"click","disabled"],["diameter","18","mode","indeterminate",4,"ngIf"],[4,"ngIf"],["diameter","18","mode","indeterminate"]],template:function(e,i){e&1&&(u(0,"div",0),a(1,"button",1),_("click",function(){return i.pay()}),d(2,ur,1,0,"mat-progress-spinner",2)(3,fr,2,0,"span",3),r()),e&2&&(l(),m("disabled",i.paying),l(),m("ngIf",i.paying),l(),m("ngIf",!i.paying))},dependencies:[v,R,P,H,ne],styles:[".payment-element[_ngcontent-%COMP%]{margin:1.5rem 0}button[_ngcontent-%COMP%]{width:100%}"]})};function gr(n,t){if(n&1&&(a(0,"div",10)(1,"mat-icon"),s(2,"error"),r(),a(3,"span"),s(4),r()()),n&2){let e=f();l(4),g(e.error())}}function hr(n,t){n&1&&s(0," Inizializzazione pagamento... ")}function _r(n,t){n&1&&s(0," Inizia pagamento ")}function xr(n,t){if(n&1){let e=T();a(0,"div",11)(1,"button",14),_("click",function(){y(e);let o=f();return M(o.pay())}),a(2,"mat-icon"),s(3,"lock"),r(),d(4,hr,1,0)(5,_r,1,0),r()()}if(n&2){let e=f();l(),m("disabled",e.paying()||e.confirmingPayment()),l(3),z(e.paying()?4:5)}}function br(n,t){n&1&&(a(0,"div",12),u(1,"mat-progress-spinner",15),a(2,"span"),s(3,"Conferma pagamento in corso, attendi..."),r()())}function vr(n,t){if(n&1){let e=T();a(0,"div",13)(1,"div",16),s(2,"Booking creato: "),a(3,"b"),s(4),r()(),a(5,"app-stripe-payment",17),_("paymentSuccess",function(){y(e);let o=f();return M(o.onStripeSuccess())})("paymentError",function(o){y(e);let c=f();return M(c.onStripeError(o))}),r()()}if(n&2){let e=f();l(4),g(e.bookingId()),l(),m("publishableKey",e.publishableKey)("clientSecret",e.clientSecret())}}var Ot=class n{store=O(U);draft=this.store.draft;paying=this.store.paying;error=this.store.error;bookingId=this.store.bookingId;clientSecret=this.store.paymentClientSecret;depositEuro=this.store.depositEuro;confirmingPayment=this.store.confirmingPayment;publishableKey=ye.stripePublishableKey;pay(){this.store.startPayment()}onStripeSuccess(){this.store.error.set(null),this.store.confirmPaymentSuccess()}onStripeError(t){this.store.error.set(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-step-payment"]],standalone:!0,features:[b],decls:24,vars:5,consts:[[1,"step"],[1,"head"],[1,"h1"],[1,"p"],[1,"card"],[1,"row"],[1,"k"],[1,"v"],[1,"note"],[1,"ico"],[1,"error"],[1,"actions"],[1,"processing"],[1,"stripe-box"],["mat-flat-button","","color","primary",3,"click","disabled"],["diameter","22","mode","indeterminate"],[1,"small"],[3,"paymentSuccess","paymentError","publishableKey","clientSecret"]],template:function(e,i){e&1&&(a(0,"section",0)(1,"header",1)(2,"h1",2),s(3,"PAGAMENTO"),r(),a(4,"p",3),s(5,"Per confermare la consulenza e richiesta una caparra."),r()(),a(6,"mat-card",4)(7,"div",5)(8,"div",6),s(9,"Caparra"),r(),a(10,"div",7),s(11),r()(),a(12,"div",8)(13,"mat-icon",9),s(14,"info"),r(),a(15,"div"),s(16," La caparra verra "),a(17,"b"),s(18,"scalata dal prezzo finale"),r(),s(19," del tatuaggio. "),r()(),d(20,gr,5,1,"div",10)(21,xr,6,2,"div",11)(22,br,4,0,"div",12)(23,vr,6,3,"div",13),r()()),e&2&&(l(11),S("EUR ",i.depositEuro(),""),l(9),z(i.error()?20:-1),l(),z(i.clientSecret()?-1:21),l(),z(i.confirmingPayment()?22:-1),l(),z(i.bookingId()&&i.clientSecret()&&!i.confirmingPayment()?23:-1))},dependencies:[v,P,A,H,N,ne,Ie,Ee,wt],styles:[".step[_ngcontent-%COMP%]{max-width:860px;margin:0 auto;padding:20px 16px 32px}.h1[_ngcontent-%COMP%]{margin:0 0 6px;font-size:28px;font-weight:900}.p[_ngcontent-%COMP%]{margin:0 0 12px;opacity:.75}.card[_ngcontent-%COMP%]{border-radius:16px;padding:14px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0}.k[_ngcontent-%COMP%]{opacity:.7;font-weight:700}.v[_ngcontent-%COMP%]{font-size:18px;font-weight:900}.note[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:10px;align-items:flex-start;padding:10px;border-radius:12px;background:#1976d20f}.ico[_ngcontent-%COMP%]{opacity:.7}.error[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:8px;align-items:center;padding:10px;border-radius:12px;background:#f4433614}.actions[_ngcontent-%COMP%]{margin-top:14px;display:flex;justify-content:flex-end}.processing[_ngcontent-%COMP%]{margin-top:14px;display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;background:#1976d214}.stripe-box[_ngcontent-%COMP%]{margin-top:14px;opacity:.95}.small[_ngcontent-%COMP%]{font-size:12px;margin-bottom:6px}"],changeDetection:0})};function Cr(n,t){if(n&1&&(a(0,"div",7),s(1," Codice prenotazione: "),a(2,"b"),s(3),r()()),n&2){let e=f();l(3),g(e.bookingId())}}var Et=class n{store=O(U);draft=this.store.draft;bookingId=this.store.bookingId;again(){this.store.resetAll()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-step-success"]],standalone:!0,features:[b],decls:24,vars:4,consts:[[1,"step"],[1,"hero"],[1,"badge"],[1,"card"],[1,"row"],[1,"k"],[1,"v"],[1,"code"],[1,"actions"],["mat-stroked-button","",3,"click"]],template:function(e,i){e&1&&(a(0,"section",0)(1,"mat-card",1)(2,"div",2)(3,"mat-icon"),s(4,"check_circle"),r()(),a(5,"h2"),s(6,"Prenotazione confermata"),r(),a(7,"p"),s(8,"Perfetto! La tua consulenza \xE8 stata confermata."),r()(),a(9,"mat-card",3)(10,"div",4)(11,"div",5),s(12,"Artista"),r(),a(13,"div",6),s(14),r()(),a(15,"div",4)(16,"div",5),s(17,"Data"),r(),a(18,"div",6),s(19),r()(),d(20,Cr,4,1,"div",7),r(),a(21,"div",8)(22,"button",9),_("click",function(){return i.again()}),s(23," Prenota un\u2019altra consulenza "),r()()()),e&2&&(l(14),g(i.draft().artistName),l(5),pn("",i.draft().date," \u2022 ",i.draft().time,""),l(),z(i.bookingId()?20:-1))},dependencies:[v,P,A,H,N,Ie,Ee],styles:[".step[_ngcontent-%COMP%]{max-width:860px;margin:0 auto;padding:20px 16px 32px}.hero[_ngcontent-%COMP%]{border-radius:16px;padding:18px 14px;text-align:center;margin-bottom:12px}.badge[_ngcontent-%COMP%]{width:56px;height:56px;margin:0 auto 8px;border-radius:50%;background:#4caf501f;display:grid;place-items:center}.badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:30px;width:30px;height:30px}.card[_ngcontent-%COMP%]{border-radius:16px;padding:14px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0}.k[_ngcontent-%COMP%]{opacity:.7;font-weight:700}.v[_ngcontent-%COMP%]{font-weight:900}.code[_ngcontent-%COMP%]{margin-top:10px;padding:10px;border-radius:12px;background:#0000000a;font-size:13px}.actions[_ngcontent-%COMP%]{margin-top:14px;display:flex;justify-content:center}"],changeDetection:0})};function yr(n,t){n&1&&u(0,"app-step-intro")}function Mr(n,t){n&1&&u(0,"app-step-artist")}function Sr(n,t){n&1&&u(0,"app-step-when")}function Pr(n,t){n&1&&u(0,"app-step-details")}function wr(n,t){n&1&&u(0,"app-step-summary")}function Or(n,t){n&1&&u(0,"app-step-payment")}function Er(n,t){n&1&&u(0,"app-step-success")}var kt=class n{store=O(U);step=this.store.step;progress=this.store.progress;canBack=this.store.canBack;canNext=this.store.canNext;back(){this.store.back()}next(){this.store.next()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-fast-booking-page"]],standalone:!0,features:[b],decls:15,vars:4,consts:[["mode","determinate",3,"value"],[1,"content"],[1,"footer"],["mat-button","",3,"click","disabled"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(e,i){if(e&1&&(a(0,"app-fast-booking-layout"),u(1,"mat-progress-bar",0),a(2,"section",1),d(3,yr,1,0,"app-step-intro")(4,Mr,1,0,"app-step-artist")(5,Sr,1,0,"app-step-when")(6,Pr,1,0,"app-step-details")(7,wr,1,0,"app-step-summary")(8,Or,1,0,"app-step-payment")(9,Er,1,0,"app-step-success"),r(),a(10,"footer",2)(11,"button",3),_("click",function(){return i.back()}),s(12,"Indietro"),r(),a(13,"button",4),_("click",function(){return i.next()}),s(14," Continua "),r()()()),e&2){let o;l(),m("value",i.progress()),l(2),z((o=i.step())==="intro"?3:o==="artist"?4:o==="when"?5:o==="details"?6:o==="summary"?7:o==="payment"?8:o==="success"?9:-1),l(8),m("disabled",!i.canBack()),l(2),m("disabled",!i.canNext())}},dependencies:[v,P,H,mi,xt,bt,vt,Ct,yt,Mt,Ot,Et],styles:[".content[_ngcontent-%COMP%]{padding:18px 16px 110px;max-width:520px;margin:0 auto}.footer[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #ededed;padding:12px 16px;display:flex;gap:10px;align-items:center}.footer.hidden[_ngcontent-%COMP%]{display:none}.ghost[_ngcontent-%COMP%]{border:1px solid #e5e5e5;background:#fff;color:#000;border-radius:12px;padding:12px 14px}.primary[_ngcontent-%COMP%]{flex:1;background:#000!important;color:#fff!important;border-radius:12px;padding:12px 14px}"],changeDetection:0})};var Oi=[{path:"login",component:je},{path:"register",component:je,data:{mode:"register"}},{path:"auth/login",redirectTo:"login",pathMatch:"full"},{path:"auth/register",redirectTo:"register",pathMatch:"full"},{path:"access-denied",loadComponent:()=>import("./chunk-VKSKJ6DI.js").then(n=>n.AccessDeniedComponent)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadChildren:()=>import("./chunk-XPWYXMNW.js").then(n=>n.HomeModule)},{path:"servizi",component:ut},{path:"progetti",loadChildren:()=>import("./chunk-YHL3WJHO.js").then(n=>n.PROJECTS_ROUTES)},{path:"progetto/:idProgetto",loadComponent:()=>import("./chunk-62FY3PNC.js").then(n=>n.ProjectDetailComponent)},{path:"fast-booking",component:kt},{path:"chi-siamo",component:gt},{path:"contatti",component:ht},{path:"dashboard",loadChildren:()=>import("./chunk-LIUPZ7MK.js").then(n=>n.ClientsModule),canActivate:[bi]},{path:"staff",loadChildren:()=>import("./chunk-U7CRTEKH.js").then(n=>n.AdminModule),canActivate:[_t]},{path:"admin",loadChildren:()=>import("./chunk-U7CRTEKH.js").then(n=>n.AdminModule),canActivate:[ui]},{path:"**",redirectTo:"/home"}];var Ei={providers:[un({eventCoalescing:!0}),Cn(),wn(Oi,On()),gi(),{provide:fn,useValue:"it-IT"},Wn(),{provide:Rn,useValue:Vn},{provide:zn,useValue:"it-IT"},kn(()=>In(ye.firebaseConfig)),Tn(()=>Dn()),Fn(()=>An()),Nn(()=>Ln())]};var kr=Math.pow(10,8)*24*60*60*1e3,am=-kr,It=6048e5,ki=864e5;var Ir=3600;var Ii=Ir*24,sm=Ii*7,Tr=Ii*365.2425,Dr=Tr/12,lm=Dr*3,$t=Symbol.for("constructDateFrom");function $(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&$t in n?n[$t](t):n instanceof Date?new n.constructor(t):new Date(t)}function E(n,t){return $(t||n,n)}function Ti(n,t,e){let i=E(n,e?.in);return isNaN(t)?$(e?.in||n,NaN):(t&&i.setDate(i.getDate()+t),i)}var Fr={};function fe(){return Fr}function re(n,t){let e=fe(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,o=E(n,t?.in),c=o.getDay(),p=(c<i?7:0)+c-i;return o.setDate(o.getDate()-p),o.setHours(0,0,0,0),o}function xe(n,t){return re(n,se(K({},t),{weekStartsOn:1}))}function Tt(n,t){let e=E(n,t?.in),i=e.getFullYear(),o=$(e,0);o.setFullYear(i+1,0,4),o.setHours(0,0,0,0);let c=xe(o),p=$(e,0);p.setFullYear(i,0,4),p.setHours(0,0,0,0);let h=xe(p);return e.getTime()>=c.getTime()?i+1:e.getTime()>=h.getTime()?i:i-1}function qt(n){let t=E(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Di(n,...t){let e=$.bind(null,n||t.find(i=>typeof i=="object"));return t.map(e)}function Ht(n,t){let e=E(n,t?.in);return e.setHours(0,0,0,0),e}function Fi(n,t,e){let[i,o]=Di(e?.in,n,t),c=Ht(i),p=Ht(o),h=+c-qt(c),I=+p-qt(p);return Math.round((h-I)/ki)}function Ai(n,t){let e=Tt(n,t),i=$(t?.in||n,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),xe(i)}function Ni(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Bi(n){return!(!Ni(n)&&typeof n!="number"||isNaN(+E(n)))}function Li(n,t){let e=E(n,t?.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}var Ar={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},zi=(n,t,e)=>{let i,o=Ar[n];return typeof o=="string"?i=o:t===1?i=o.one:i=o.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i};function Dt(n){return(t={})=>{let e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}var Nr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Br={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Lr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ri={date:Dt({formats:Nr,defaultWidth:"full"}),time:Dt({formats:Br,defaultWidth:"full"}),dateTime:Dt({formats:Lr,defaultWidth:"full"})};var zr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Vi=(n,t,e,i)=>zr[n];function Ae(n){return(t,e)=>{let i=e?.context?String(e.context):"standalone",o;if(i==="formatting"&&n.formattingValues){let p=n.defaultFormattingWidth||n.defaultWidth,h=e?.width?String(e.width):p;o=n.formattingValues[h]||n.formattingValues[p]}else{let p=n.defaultWidth,h=e?.width?String(e.width):n.defaultWidth;o=n.values[h]||n.values[p]}let c=n.argumentCallback?n.argumentCallback(t):t;return o[c]}}var Rr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Vr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Wr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ur={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Yr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$r=(n,t)=>{let e=Number(n),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},Wi={ordinalNumber:$r,era:Ae({values:Rr,defaultWidth:"wide"}),quarter:Ae({values:Vr,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Ae({values:Wr,defaultWidth:"wide"}),day:Ae({values:jr,defaultWidth:"wide"}),dayPeriod:Ae({values:Ur,defaultWidth:"wide",formattingValues:Yr,defaultFormattingWidth:"wide"})};function Ne(n){return(t,e={})=>{let i=e.width,o=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],c=t.match(o);if(!c)return null;let p=c[0],h=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],I=Array.isArray(h)?Hr(h,k=>k.test(p)):qr(h,k=>k.test(p)),w;w=n.valueCallback?n.valueCallback(I):I,w=e.valueCallback?e.valueCallback(w):w;let B=t.slice(p.length);return{value:w,rest:B}}}function qr(n,t){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function Hr(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function ji(n){return(t,e={})=>{let i=t.match(n.matchPattern);if(!i)return null;let o=i[0],c=t.match(n.parsePattern);if(!c)return null;let p=n.valueCallback?n.valueCallback(c[0]):c[0];p=e.valueCallback?e.valueCallback(p):p;let h=t.slice(o.length);return{value:p,rest:h}}}var Gr=/^(\d+)(th|st|nd|rd)?/i,Qr=/\d+/i,Xr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Kr={any:[/^b/i,/^(a|c)/i]},Jr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Zr={any:[/1/i,/2/i,/3/i,/4/i]},ea={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ta={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},na={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ia={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},oa={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ra={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ui={ordinalNumber:ji({matchPattern:Gr,parsePattern:Qr,valueCallback:n=>parseInt(n,10)}),era:Ne({matchPatterns:Xr,defaultMatchWidth:"wide",parsePatterns:Kr,defaultParseWidth:"any"}),quarter:Ne({matchPatterns:Jr,defaultMatchWidth:"wide",parsePatterns:Zr,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ne({matchPatterns:ea,defaultMatchWidth:"wide",parsePatterns:ta,defaultParseWidth:"any"}),day:Ne({matchPatterns:na,defaultMatchWidth:"wide",parsePatterns:ia,defaultParseWidth:"any"}),dayPeriod:Ne({matchPatterns:oa,defaultMatchWidth:"any",parsePatterns:ra,defaultParseWidth:"any"})};var Gt={code:"en-US",formatDistance:zi,formatLong:Ri,formatRelative:Vi,localize:Wi,match:Ui,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Yi(n,t){let e=E(n,t?.in);return Fi(e,Li(e))+1}function $i(n,t){let e=E(n,t?.in),i=+xe(e)-+Ai(e);return Math.round(i/It)+1}function Ft(n,t){let e=E(n,t?.in),i=e.getFullYear(),o=fe(),c=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,p=$(t?.in||n,0);p.setFullYear(i+1,0,c),p.setHours(0,0,0,0);let h=re(p,t),I=$(t?.in||n,0);I.setFullYear(i,0,c),I.setHours(0,0,0,0);let w=re(I,t);return+e>=+h?i+1:+e>=+w?i:i-1}function qi(n,t){let e=fe(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,o=Ft(n,t),c=$(t?.in||n,0);return c.setFullYear(o,0,i),c.setHours(0,0,0,0),re(c,t)}function Hi(n,t){let e=E(n,t?.in),i=+re(e,t)-+qi(e,t);return Math.round(i/It)+1}function C(n,t){let e=n<0?"-":"",i=Math.abs(n).toString().padStart(t,"0");return e+i}var ae={y(n,t){let e=n.getFullYear(),i=e>0?e:1-e;return C(t==="yy"?i%100:i,t.length)},M(n,t){let e=n.getMonth();return t==="M"?String(e+1):C(e+1,2)},d(n,t){return C(n.getDate(),t.length)},a(n,t){let e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return C(n.getHours()%12||12,t.length)},H(n,t){return C(n.getHours(),t.length)},m(n,t){return C(n.getMinutes(),t.length)},s(n,t){return C(n.getSeconds(),t.length)},S(n,t){let e=t.length,i=n.getMilliseconds(),o=Math.trunc(i*Math.pow(10,e-3));return C(o,t.length)}};var Be={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Qt={G:function(n,t,e){let i=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(i,{width:"abbreviated"});case"GGGGG":return e.era(i,{width:"narrow"});case"GGGG":default:return e.era(i,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){let i=n.getFullYear(),o=i>0?i:1-i;return e.ordinalNumber(o,{unit:"year"})}return ae.y(n,t)},Y:function(n,t,e,i){let o=Ft(n,i),c=o>0?o:1-o;if(t==="YY"){let p=c%100;return C(p,2)}return t==="Yo"?e.ordinalNumber(c,{unit:"year"}):C(c,t.length)},R:function(n,t){let e=Tt(n);return C(e,t.length)},u:function(n,t){let e=n.getFullYear();return C(e,t.length)},Q:function(n,t,e){let i=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return C(i,2);case"Qo":return e.ordinalNumber(i,{unit:"quarter"});case"QQQ":return e.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,t,e){let i=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return C(i,2);case"qo":return e.ordinalNumber(i,{unit:"quarter"});case"qqq":return e.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,t,e){let i=n.getMonth();switch(t){case"M":case"MM":return ae.M(n,t);case"Mo":return e.ordinalNumber(i+1,{unit:"month"});case"MMM":return e.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(i,{width:"wide",context:"formatting"})}},L:function(n,t,e){let i=n.getMonth();switch(t){case"L":return String(i+1);case"LL":return C(i+1,2);case"Lo":return e.ordinalNumber(i+1,{unit:"month"});case"LLL":return e.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(i,{width:"wide",context:"standalone"})}},w:function(n,t,e,i){let o=Hi(n,i);return t==="wo"?e.ordinalNumber(o,{unit:"week"}):C(o,t.length)},I:function(n,t,e){let i=$i(n);return t==="Io"?e.ordinalNumber(i,{unit:"week"}):C(i,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):ae.d(n,t)},D:function(n,t,e){let i=Yi(n);return t==="Do"?e.ordinalNumber(i,{unit:"dayOfYear"}):C(i,t.length)},E:function(n,t,e){let i=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(i,{width:"short",context:"formatting"});case"EEEE":default:return e.day(i,{width:"wide",context:"formatting"})}},e:function(n,t,e,i){let o=n.getDay(),c=(o-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(c);case"ee":return C(c,2);case"eo":return e.ordinalNumber(c,{unit:"day"});case"eee":return e.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(o,{width:"short",context:"formatting"});case"eeee":default:return e.day(o,{width:"wide",context:"formatting"})}},c:function(n,t,e,i){let o=n.getDay(),c=(o-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(c);case"cc":return C(c,t.length);case"co":return e.ordinalNumber(c,{unit:"day"});case"ccc":return e.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(o,{width:"narrow",context:"standalone"});case"cccccc":return e.day(o,{width:"short",context:"standalone"});case"cccc":default:return e.day(o,{width:"wide",context:"standalone"})}},i:function(n,t,e){let i=n.getDay(),o=i===0?7:i;switch(t){case"i":return String(o);case"ii":return C(o,t.length);case"io":return e.ordinalNumber(o,{unit:"day"});case"iii":return e.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(i,{width:"short",context:"formatting"});case"iiii":default:return e.day(i,{width:"wide",context:"formatting"})}},a:function(n,t,e){let o=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(n,t,e){let i=n.getHours(),o;switch(i===12?o=Be.noon:i===0?o=Be.midnight:o=i/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(n,t,e){let i=n.getHours(),o;switch(i>=17?o=Be.evening:i>=12?o=Be.afternoon:i>=4?o=Be.morning:o=Be.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let i=n.getHours()%12;return i===0&&(i=12),e.ordinalNumber(i,{unit:"hour"})}return ae.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):ae.H(n,t)},K:function(n,t,e){let i=n.getHours()%12;return t==="Ko"?e.ordinalNumber(i,{unit:"hour"}):C(i,t.length)},k:function(n,t,e){let i=n.getHours();return i===0&&(i=24),t==="ko"?e.ordinalNumber(i,{unit:"hour"}):C(i,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):ae.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):ae.s(n,t)},S:function(n,t){return ae.S(n,t)},X:function(n,t,e){let i=n.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return Qi(i);case"XXXX":case"XX":return be(i);case"XXXXX":case"XXX":default:return be(i,":")}},x:function(n,t,e){let i=n.getTimezoneOffset();switch(t){case"x":return Qi(i);case"xxxx":case"xx":return be(i);case"xxxxx":case"xxx":default:return be(i,":")}},O:function(n,t,e){let i=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Gi(i,":");case"OOOO":default:return"GMT"+be(i,":")}},z:function(n,t,e){let i=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Gi(i,":");case"zzzz":default:return"GMT"+be(i,":")}},t:function(n,t,e){let i=Math.trunc(+n/1e3);return C(i,t.length)},T:function(n,t,e){return C(+n,t.length)}};function Gi(n,t=""){let e=n>0?"-":"+",i=Math.abs(n),o=Math.trunc(i/60),c=i%60;return c===0?e+String(o):e+String(o)+t+C(c,2)}function Qi(n,t){return n%60===0?(n>0?"-":"+")+C(Math.abs(n)/60,2):be(n,t)}function be(n,t=""){let e=n>0?"-":"+",i=Math.abs(n),o=C(Math.trunc(i/60),2),c=C(i%60,2);return e+o+t+c}var Xi=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ki=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},aa=(n,t)=>{let e=n.match(/(P+)(p+)?/)||[],i=e[1],o=e[2];if(!o)return Xi(n,t);let c;switch(i){case"P":c=t.dateTime({width:"short"});break;case"PP":c=t.dateTime({width:"medium"});break;case"PPP":c=t.dateTime({width:"long"});break;case"PPPP":default:c=t.dateTime({width:"full"});break}return c.replace("{{date}}",Xi(i,t)).replace("{{time}}",Ki(o,t))},Ji={p:Ki,P:aa};var sa=/^D+$/,la=/^Y+$/,ca=["D","DD","YY","YYYY"];function Zi(n){return sa.test(n)}function eo(n){return la.test(n)}function to(n,t,e){let i=ma(n,t,e);if(console.warn(i),ca.includes(n))throw new RangeError(i)}function ma(n,t,e){let i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var pa=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,da=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ua=/^'([^]*?)'?$/,fa=/''/g,ga=/[a-zA-Z]/;function no(n,t,e){let i=fe(),o=e?.locale??i.locale??Gt,c=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,p=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,h=E(n,e?.in);if(!Bi(h))throw new RangeError("Invalid time value");let I=t.match(da).map(B=>{let k=B[0];if(k==="p"||k==="P"){let ve=Ji[k];return ve(B,o.formatLong)}return B}).join("").match(pa).map(B=>{if(B==="''")return{isToken:!1,value:"'"};let k=B[0];if(k==="'")return{isToken:!1,value:ha(B)};if(Qt[k])return{isToken:!0,value:B};if(k.match(ga))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:B}});o.localize.preprocessor&&(I=o.localize.preprocessor(h,I));let w={firstWeekContainsDate:c,weekStartsOn:p,locale:o};return I.map(B=>{if(!B.isToken)return B.value;let k=B.value;(!e?.useAdditionalWeekYearTokens&&eo(k)||!e?.useAdditionalDayOfYearTokens&&Zi(k))&&to(k,t,String(n));let ve=Qt[k[0]];return ve(h,k,o.localize,w)}).join("")}function ha(n){let t=n.match(ua);return t?t[1].replace(fa,"'"):n}var At=class n{constructor(t,e,i,o,c){this.db=t;this.http=e;this.staffService=i;this.bookingService=o;this.authService=c}path="chats";chatPlanUrl="http://localhost:3001/api/chat/plan";createOrReuseChatByEmail(t){return L(this,null,function*(){let e=t.replace(/\./g,"_"),i=_e(this.db,`chatsByEmail/${e}`),o=yield Bn(i);if(o.exists())return o.val().chatId;let c=Wt(_e(this.db,this.path)),p=new Date().toISOString();return yield Je(c,{id:c.key,email:t,createAt:p,status:"aperto"}),yield Je(i,{chatId:c.key}),c.key})}addMessage(t,e){return L(this,null,function*(){let i=Wt(_e(this.db,`${this.path}/${t}/messages`)),o=se(K({},e),{timestamp:new Date().toISOString(),chips:e.chips&&e.chips.length?e.chips:null,id:i.key});yield Je(i,o)})}getMessages(t){return new $e(e=>{let i=_e(this.db,`${this.path}/${t}/messages`),o=Ke(i,c=>{let p=c.val()||{},h=Object.values(p).sort((I,w)=>I.timestamp.localeCompare(w.timestamp));e.next(h)},c=>e.error(c));return()=>o()})}replyWithPlan(t,e){return L(this,null,function*(){let o=(yield Rt(this.staffService.getAllStaff())).filter(w=>w.isActive&&w.role==="tatuatore"),c={},p=new Date;for(let w of o){let B=[];for(let k=0;k<3;k++){let ve=no(Ti(p,k),"yyyy-MM-dd"),Xt=yield this.bookingService.getFreeSlotsInDay(w.id,ve);Xt.length&&B.push(`${ve}: ${Xt.slice(0,3).map(ro=>ro.time).join(", ")}`)}B.length&&(c[w.name]=B)}let h=this.authService.userSig(),I=h?`Utente loggato: ${h.name} - Email: ${h.email}`:"Utente non loggato. Chiedi nome e contatto.";try{let w=yield Rt(this.http.post(this.chatPlanUrl,{chatId:t,history:e,artists:o,availability:c,userInfo:I}));if(w?.message)return{message:w.message,chips:(w.chips??[]).slice(0,3),action:w.action}}catch(w){console.warn("[ChatService] chat proxy unavailable, fallback locale.",w?.message??w)}return this.localFallbackPlan(o,c,e)})}localFallbackPlan(t,e,i){let o=[...i].reverse().find(c=>c.from==="user")?.text?.toLowerCase()??"";if(!t.length)return{message:"Al momento non trovo artisti disponibili. Riprova tra poco o contattaci direttamente.",chips:[]};if(o.includes("orari")||o.includes("disponibil")||o.includes("quando")){let c=Object.entries(e).slice(0,2).map(([p,h])=>`${p}: ${h.slice(0,2).join(" | ")}`).join(" - ");return{message:c?`Ti mostro alcune disponibilita: ${c}. Dimmi artista, giorno e orario preferiti.`:"Posso aiutarti a prenotare: indicami artista e giorno preferito.",chips:t.slice(0,3).map(p=>p.name||"Artista").filter(Boolean)}}return{message:"Perfetto, iniziamo dalla scelta artista. Poi ti propongo giorno e orario disponibili.",chips:t.slice(0,3).map(c=>c.name||"Artista").filter(Boolean)}}static \u0275fac=function(e){return new(e||n)(J(Xe),J(vn),J(ct),J(mt),J(X))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var va=["scrollContainer"],Ca=["bottomAnchor"];function ya(n,t){if(n&1){let e=T();a(0,"mat-chip",20),_("click",function(){let o=y(e).$implicit,c=f(3);return M(c.onChipClick(o))})("keydown.enter",function(){let o=y(e).$implicit,c=f(3);return M(c.onChipClick(o))}),s(1),r()}if(n&2){let e=t.$implicit;l(),S(" ",e," ")}}function Ma(n,t){if(n&1&&(a(0,"div",17)(1,"mat-chip-set",18),d(2,ya,2,1,"mat-chip",19),r()()),n&2){let e=f().$implicit;l(2),m("ngForOf",e.chips)}}function Sa(n,t){if(n&1&&(W(0),a(1,"div",14)(2,"mat-card",15),s(3),r(),d(4,Ma,3,1,"div",16),r(),j()),n&2){let e=t.$implicit,i=t.index,o=f();l(),m("ngClass",e.from),l(),m("ngClass",e.from),l(),S(" ",e.text," "),l(),m("ngIf",e.from==="bot"&&i===o.messages.length-1&&(e.chips==null?null:e.chips.length))}}function Pa(n,t){n&1&&(a(0,"mat-card",21),s(1," \u{1F916} sta scrivendo... "),r())}function wa(n,t){if(n&1){let e=T();a(0,"button",22),_("click",function(){y(e);let o=f();return M(o.scrollToBottom())}),a(1,"mat-icon"),s(2,"arrow_downward"),r()()}}var Nt=class n{constructor(t,e,i,o){this.chatService=t;this.auth=e;this.router=i;this.bookingService=o;this.startConversation()}messages=[];inputText="";typing=!1;isUserAtBottom=!0;chatId=null;userId=null;userName;scrollContainer;bottomAnchor;ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){this.bottomAnchor?.nativeElement?.scrollIntoView({behavior:"smooth"})}onScroll(){let t=this.scrollContainer.nativeElement,e=150;this.isUserAtBottom=t.scrollTop+t.clientHeight>=t.scrollHeight-e}trackByIndex=t=>t;addUserMessage(t){this.messages.push({text:t,from:"user"}),this.saveMessage("user",t)}addBotMessage(t,e){this.messages.push({text:t,from:"bot",chips:e?.length?e:null}),this.saveMessage("bot",t,e||void 0)}saveMessage(t,e,i){if(!this.chatId||!this.userId)return;let o={from:t,text:e,timestamp:new Date().toISOString(),chips:i??null};this.chatService.addMessage(this.chatId,o).catch(c=>console.error("saveMessage ERROR",c))}listenToChat(t){this.chatService.getMessages(t).subscribe(e=>{this.messages=e.map(i=>({text:i.text,from:i.from,chips:i.chips||null})),this.scrollToBottom(),this.messages.length===0&&this.addBotMessage("\u{1F7E2} Posso aiutarti con assistenza o guidarti nella prenotazione. Vuoi iniziare?",["Prenotazione guidata","Apri booking","\u2139\uFE0F Info"])})}startConversation(){let t=this.auth.userSig();if(t){this.userId=t.uid,this.userName=t.name||void 0;let e=t.email||t.uid;this.chatService.createOrReuseChatByEmail(e).then(i=>{this.chatId=i,this.listenToChat(i)})}else{let e=prompt("Inserisci la tua email per iniziare la conversazione:");if(!e)return;this.userId=null,this.userName=void 0,this.chatService.createOrReuseChatByEmail(e).then(i=>{this.chatId=i,this.listenToChat(i)})}}sendMessage(){return L(this,null,function*(){let t=this.inputText.trim();if(!t||!this.chatId)return;this.addUserMessage(t),this.inputText="",this.typing=!0;let e=this.messages.map(o=>({from:o.from,text:o.text,timestamp:new Date().toISOString(),chips:o.chips||void 0})),i=yield this.chatService.replyWithPlan(this.chatId,e);if(this.typing=!1,this.addBotMessage(i.message,i.chips),i.action?.type==="booking-draft"){let o=i.action.draft,c=this.auth.userSig();if(!(c?.email||prompt("Inserisci un'email per confermare la prenotazione:"))||!o?.date||!o?.time||!o?.artistId){this.addBotMessage("\u274C Impossibile completare la prenotazione. Dati insufficienti.");return}try{let h=c?.uid||`anonimo-${this.chatId}`;yield this.bookingService.addDraftFromChat(o,{idClient:h,clientName:this.userName??"Utente Chat"}),this.addBotMessage("\u2705 Prenotazione registrata con successo! Puoi vedere i dettagli nella tua area personale.",["Vai al profilo"])}catch(h){console.error("Errore durante la prenotazione:",h),this.addBotMessage("\u274C Errore durante la prenotazione. Riprova pi\xF9 tardi.")}}})}onChipClick(t){if(t==="Accedi"||t==="Registrati"){this.router.navigate(["/login"]);return}if(t==="Prenotazione guidata"){this.inputText="prenota una consulenza",this.sendMessage();return}if(t==="Apri booking"){this.router.navigate(["/bookings"]);return}if(t==="Vai al profilo"){this.router.navigate(["/account"]);return}this.inputText=t,this.sendMessage()}static \u0275fac=function(e){return new(e||n)(F(At),F(X),F(te),F(mt))};static \u0275cmp=x({type:n,selectors:[["app-chat-bot"]],viewQuery:function(e,i){if(e&1&&(Re(va,5),Re(Ca,5)),e&2){let o;Ve(o=We())&&(i.scrollContainer=o.first),Ve(o=We())&&(i.bottomAnchor=o.first)}},standalone:!0,features:[b],decls:21,vars:6,consts:[["scrollContainer",""],["bottomAnchor",""],[1,"chat-wrapper","mat-elevation-z4"],[1,"chat-header"],["color","primary","aria-hidden","true"],[1,"chat-title"],["role","log","aria-live","polite","aria-label","Conversazione con l\u2019assistente",1,"chat-messages",3,"scroll"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","typing","role","status","aria-live","polite",4,"ngIf"],[1,"chat-input",3,"submit"],["appearance","outline",1,"input-field"],["matInput","","name","message","placeholder","Scrivi un messaggio\u2026","aria-label","Scrivi un messaggio","autocomplete","off",3,"ngModelChange","ngModel"],["mat-icon-button","","color","primary","type","submit","aria-label","Invia messaggio",3,"disabled"],["mat-fab","","class","scroll-fab","aria-label","Vai all\u2019ultimo messaggio",3,"click",4,"ngIf"],[3,"ngClass"],[1,"message-card",3,"ngClass"],["class","chips",4,"ngIf"],[1,"chips"],["aria-label","Azioni rapide","role","listbox"],["clickable","","role","option","tabindex","0","matTooltip","Seleziona",3,"click","keydown.enter",4,"ngFor","ngForOf"],["clickable","","role","option","tabindex","0","matTooltip","Seleziona",3,"click","keydown.enter"],["role","status","aria-live","polite",1,"typing"],["mat-fab","","aria-label","Vai all\u2019ultimo messaggio",1,"scroll-fab",3,"click"]],template:function(e,i){if(e&1){let o=T();a(0,"div",2)(1,"div",3)(2,"mat-icon",4),s(3,"smart_toy"),r(),a(4,"span",5),s(5,"Assistente Rebis"),r()(),u(6,"mat-divider"),a(7,"div",6,0),_("scroll",function(){return y(o),M(i.onScroll())}),d(9,Sa,5,4,"ng-container",7)(10,Pa,2,0,"mat-card",8),u(11,"div",null,1),r(),u(13,"mat-divider"),a(14,"form",9),_("submit",function(p){return y(o),i.sendMessage(),M(p.preventDefault())}),a(15,"mat-form-field",10)(16,"input",11),Ge("ngModelChange",function(p){return y(o),He(i.inputText,p)||(i.inputText=p),M(p)}),r()(),a(17,"button",12)(18,"mat-icon"),s(19,"send"),r()()(),d(20,wa,3,0,"button",13),r()}e&2&&(l(9),m("ngForOf",i.messages)("ngForTrackBy",i.trackByIndex),l(),m("ngIf",i.typing),l(6),qe("ngModel",i.inputText),l(),m("disabled",!i.inputText.trim()),l(3),m("ngIf",!i.isUserAtBottom))},dependencies:[v,xn,me,R,nt,we,Me,Se,Pe,Un,jn,P,A,ke,ot,pe,De,Te,N,st,lt,at],styles:[".chat-wrapper[_ngcontent-%COMP%]{position:relative;min-width:100%;max-width:640px;background:#ffffffbd;color:#eaeaea;border-radius:16px;overflow:hidden}.chat-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 8px;color:#000}.chat-header[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.2px}.chat-messages[_ngcontent-%COMP%]{height:60vh;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:10px;background-color:#000}.chat-messages[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]{max-width:80%;white-space:pre-wrap;line-height:1.35;padding:10px 12px}.chat-messages[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]{margin-left:auto;background:#1f2937;color:#e5e7eb}.chat-messages[_ngcontent-%COMP%]   .bot[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]{margin-right:auto;background:#0b3b2e;color:#e6fff6}.chat-messages[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{display:flex;gap:4px;flex-wrap:wrap;margin:4px 0 0}.chat-messages[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{cursor:pointer;background:#1f2937;color:#e5e7eb}.chat-messages[_ngcontent-%COMP%]   .typing[_ngcontent-%COMP%]{width:fit-content;background:#0b3b2e;color:#e6fff6;padding:3px 5px;border-radius:10px;margin:2px 0 0}.chat-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:4px 6px}.chat-input[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{flex:1}.scroll-fab[_ngcontent-%COMP%]{position:absolute;right:16px;bottom:86px}"]})};function Oa(n,t){n&1&&(a(0,"div",3),u(1,"app-chat-bot"),r())}var Bt=class n{isOpen=!1;toggleChat(){this.isOpen=!this.isOpen}closeChat(){this.isOpen=!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-chat-bot-popup"]],standalone:!0,features:[b],decls:5,vars:2,consts:[[1,"chat-popup"],["mat-fab","","color","primary",1,"chat-toggle",3,"click"],["class","chat-box",4,"ngIf"],[1,"chat-box"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"button",1),_("click",function(){return i.toggleChat()}),a(2,"mat-icon"),s(3),r()(),d(4,Oa,2,0,"div",2),r()),e&2&&(l(3),g(i.isOpen?"close":"chat"),l(),m("ngIf",i.isOpen))},dependencies:[v,R,Nt,P,A,ot],styles:[".chat-popup[_ngcontent-%COMP%]{position:fixed;bottom:16px;right:16px;z-index:1000}.chat-popup[_ngcontent-%COMP%]   .chat-toggle[_ngcontent-%COMP%]{position:relative;z-index:1001}.chat-popup[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]{position:absolute;bottom:70px;right:0;width:90vw;min-height:60vh;max-width:400px;background:#fff;box-shadow:0 4px 12px #00000040;border-radius:12px;overflow:hidden;display:flex;flex-direction:column}"]})};var Lt=class n{publicMenu=[{label:"Home",route:"/home"},{label:"Servizi",route:"/servizi"},{label:"Progetti",route:"/progetti"},{label:"Fast Booking",route:"/fast-booking"},{label:"Chi Siamo",route:"/chi-siamo"},{label:"Contatti",route:"/contatti"}];dashboardMenu={label:"Dashboard",route:"/dashboard",roles:["client","staff","admin"],children:[{label:"Profilo",route:"/dashboard"},{label:"Storico Booking",route:"/dashboard/booking-history"},{label:"Buoni",route:"/dashboard/buoni"},{label:"Recensioni",route:"/dashboard/reviews"},{label:"Chat",route:"/dashboard/chat"}]};staffDashboardMenu={label:"Dashboard",route:"/staff",roles:["staff"]};adminMenu={label:"Admin",route:"/admin",roles:["admin"],children:[{label:"Dashboard",route:"/admin"},{label:"Calendario",route:"/admin/calendar"},{label:"Clienti",route:"/admin/clients"},{label:"Permessi",route:"/admin/permissions"},{label:"Billing",route:"/admin/billing"},{label:"Documenti",route:"/admin/documents"},{label:"Waitlist",route:"/admin/waitlist"},{label:"Messaggi",route:"/admin/messaging"},{label:"Portfolio",route:"/admin/portfolio"},{label:"Servizi",route:"/admin/servizi"},{label:"Staff",route:"/admin/staff"},{label:"Bonus",route:"/admin/bonus"},{label:"Analytics",route:"/admin/analytics"},{label:"Audit Logs",route:"/admin/audit-logs"},{label:"Impostazioni",route:"/admin/settings"},{label:"Recensioni",route:"/admin/review-list"}]};getMenuByRole(t){switch(t){case"client":return G(this.cloneMenu(this.buildClientMenu()));case"staff":return G(this.cloneMenu(this.buildStaffMenu(!1)));case"admin":return G(this.cloneMenu(this.buildAdminMenu()));case"public":default:return G(this.cloneMenu(this.buildPublicMenu()))}}getMenuByUser(t){if(!t)return this.getMenuByRole("public");let e=this.normalizeRole(t.role);if(e==="public")return this.getMenuByRole("public");if(e==="client")return this.getMenuByRole("client");if(e==="admin")return G(this.cloneMenu(this.buildAdminMenu()));let i=t.permissions?.canManageRoles===!0;return G(this.cloneMenu(this.buildStaffMenu(i)))}buildPublicMenu(){return[...this.publicMenu]}buildClientMenu(){return[...this.publicMenu,this.dashboardMenu]}buildAdminMenu(){return[...this.publicMenu,this.dashboardMenu,this.adminMenu]}buildStaffMenu(t){return[...this.publicMenu,this.staffDashboardMenu,this.buildStaffAdminMenu(t)]}buildStaffAdminMenu(t){let e=[{label:"Dashboard",route:"/staff"},{label:"Calendario",route:"/staff/calendar"},{label:"Progetti",route:"/staff/portfolio"}];return t&&e.push({label:"Clienti",route:"/staff/clients"}),{label:"Staff",route:"/staff",roles:["staff"],children:e}}normalizeRole(t){let e=String(t??"public").trim().toLowerCase();return e==="user"?"client":e==="admin"||e==="client"||e==="staff"||e==="public"?e:"public"}cloneMenu(t){return t.map(e=>se(K({},e),{roles:e.roles?[...e.roles]:void 0,children:e.children?this.cloneMenu(e.children):void 0}))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var ka=["sidenav"];function Ia(n,t){if(n&1&&(a(0,"a",29),s(1),r()),n&2){let e=t.$implicit;m("routerLink",e.route),l(),S(" ",e.label," ")}}function Ta(n,t){if(n&1&&(W(0),a(1,"div",25)(2,"button",26),s(3),a(4,"mat-icon"),s(5,"expand_more"),r()(),a(6,"div",27),d(7,Ia,2,2,"a",28),r()(),j()),n&2){let e=f().$implicit;l(3),S(" ",e.label," "),l(4),m("ngForOf",e.children)}}function Da(n,t){if(n&1&&(a(0,"a",30),s(1),r()),n&2){let e=f().$implicit;m("routerLink",e.route),l(),g(e.label)}}function Fa(n,t){if(n&1&&(W(0),d(1,Ta,8,2,"ng-container",22)(2,Da,2,2,"ng-template",null,4,Z),j()),n&2){let e=t.$implicit,i=Q(3);l(),m("ngIf",e.children==null?null:e.children.length)("ngIfElse",i)}}function Aa(n,t){if(n&1&&(W(0),a(1,"nav",23),d(2,Fa,4,2,"ng-container",24),r(),j()),n&2){let e=t.ngIf;l(2),m("ngForOf",e)}}function Na(n,t){if(n&1&&(a(0,"span",31),s(1),r()),n&2){let e=t.ngIf;ge("hidden",e===0),l(),S(" ",e," ")}}function Ba(n,t){if(n&1){let e=T();a(0,"button",33),_("click",function(){y(e);let o=f(2);return M(o.markAllNotificationsAsRead())}),a(1,"mat-icon"),s(2,"done_all"),r(),a(3,"span"),s(4,"Segna tutte come lette"),r()()}}function La(n,t){if(n&1){let e=T();a(0,"button",33),_("click",function(){let o=y(e).$implicit,c=f(3);return M(c.openNotification(o))}),a(1,"mat-icon"),s(2),r(),a(3,"div",35)(4,"p",36),s(5),r(),a(6,"small",37),s(7),r(),a(8,"small",37),s(9),le(10,"date"),r()()()}if(n&2){let e=t.$implicit;l(2),S(" ",e.type==="chat"?"chat":e.type==="booking"?"event":e.type==="payment"?"payments":"notifications"," "),l(3),g(e.title||e.message),l(2),g(e.message),l(2),g(dn(10,4,e.createdAt,"short"))}}function za(n,t){if(n&1&&(W(0),d(1,La,11,7,"button",34),j()),n&2){let e=f().ngIf;l(),m("ngForOf",e)}}function Ra(n,t){if(n&1&&(W(0),d(1,Ba,5,0,"button",32)(2,za,2,1,"ng-container",22),j()),n&2){let e=t.ngIf;f();let i=Q(22);l(),m("ngIf",e.length>0),l(),m("ngIf",e.length>0)("ngIfElse",i)}}function Va(n,t){n&1&&(a(0,"button",38)(1,"mat-icon"),s(2,"notifications_off"),r(),a(3,"span"),s(4,"Nessuna notifica"),r()())}function Wa(n,t){if(n&1){let e=T();W(0),a(1,"a",39),_("click",function(){y(e);let o=f(4);return M(o.closeMenu())}),s(2),r(),j()}if(n&2){let e=t.$implicit;l(),m("routerLink",e.route),l(),S(" ",e.label," ")}}function ja(n,t){if(n&1&&(W(0),a(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),s(4),r()(),d(5,Wa,3,2,"ng-container",24),r(),j()),n&2){let e=f().$implicit;l(4),g(e.label),l(),m("ngForOf",e.children)}}function Ua(n,t){if(n&1){let e=T();a(0,"a",39),_("click",function(){y(e);let o=f(3);return M(o.closeMenu())}),s(1),r()}if(n&2){let e=f().$implicit;m("routerLink",e.route),l(),S(" ",e.label," ")}}function Ya(n,t){if(n&1&&(W(0),d(1,ja,6,2,"ng-container",22)(2,Ua,2,2,"ng-template",null,5,Z),j()),n&2){let e=t.$implicit,i=Q(3);l(),m("ngIf",e.children==null?null:e.children.length)("ngIfElse",i)}}function $a(n,t){if(n&1&&(W(0),d(1,Ya,4,2,"ng-container",24),j()),n&2){let e=t.ngIf;l(),m("ngForOf",e)}}function qa(n,t){if(n&1){let e=T();W(0),a(1,"button",40),_("click",function(){y(e);let o=f();return M(o.logout())}),a(2,"mat-icon"),s(3,"logout"),r(),s(4," Logout "),r(),j()}}function Ha(n,t){n&1&&(a(0,"button",41)(1,"mat-icon"),s(2,"login"),r(),s(3," Login "),r())}var zt=class n{constructor(t,e,i,o){this.menuService=t;this.auth=e;this.notificationService=i;this.router=o}sidenav;modeSidenav="over";isMenuOpen=!1;userRole="public";navItem$;isLoggedIn=!1;notifications$=G([]);unreadCount$=G(0);userEffect=gn(()=>{let t=this.auth.userSig();if(this.isLoggedIn=!!t,t){this.loadMenuForUser(t),this.bindNotifications(t.uid);return}this.loadMenuForUser(null),this.notifications$=G([]),this.unreadCount$=G(0)});ngOnInit(){this.loadMenuForUser(null)}loadMenuForUser(t){let e=this.toMenuRole(t?.role);this.userRole=e,this.navItem$=this.menuService.getMenuByUser(t)}toMenuRole(t){return t==="admin"||t==="client"||t==="staff"||t==="public"?t:"public"}bindNotifications(t){this.notifications$=this.notificationService.getUserNotifications(t),this.unreadCount$=this.notificationService.getUnreadCount(t)}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}closeMenu(){this.isMenuOpen=!1}logout(){this.auth.logout()}openNotification(t){return L(this,null,function*(){let e=this.auth.userSig();if(!e)return;t.readAt||(yield this.notificationService.markAsRead(e.uid,t.id));let i=this.toMenuRole(e.role),o=this.notificationService.resolveNotificationLink(t,i);yield this.router.navigateByUrl(o)})}markAllNotificationsAsRead(){return L(this,null,function*(){let t=this.auth.userSig();t&&(yield this.notificationService.markAllAsRead(t.uid))})}static \u0275fac=function(e){return new(e||n)(F(Lt),F(X),F(fi),F(te))};static \u0275cmp=x({type:n,selectors:[["app-root"]],viewQuery:function(e,i){if(e&1&&Re(ka,5),e&2){let o;Ve(o=We())&&(i.sidenav=o.first)}},standalone:!0,features:[b],decls:39,vars:17,consts:[["notifMenu","matMenu"],["noNotif",""],["sidenav",""],["loginBtnMobile",""],["noChildren",""],["singleLink",""],[2,"background-color","black"],[1,"main-toolbar","elevation-z4"],[1,"toolbar-container"],["mat-icon-button","",1,"burger-button",3,"click"],["routerLink","/home",1,"logo-link"],["src","/loghi/logo-white.jpg","alt","REBIS TATTOO",1,"logo-img"],[4,"ngIf"],[1,"toolbar-actions"],["matTooltip","Notifiche recenti",1,"notifications-wrapper",3,"matMenuTriggerFor"],["mat-icon-button",""],["class","badge",3,"hidden",4,"ngIf"],[1,"notif-menu"],["mat-icon-button","","color","warn","matTooltip","Logout",3,"click"],[1,"sidenav-container"],[1,"mobile-sidenav",3,"openedChange","closed","mode","opened"],[1,"auth-section"],[4,"ngIf","ngIfElse"],[1,"desktop-nav"],[4,"ngFor","ngForOf"],[1,"dropdown"],["mat-button","",1,"dropdown-toggle"],[1,"dropdown-menu"],["mat-menu-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-menu-item","",3,"routerLink"],["mat-button","",3,"routerLink"],[1,"badge"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"notif-text"],[1,"primary"],[1,"secondary"],["mat-menu-item","","disabled",""],["mat-list-item","",2,"color","whitesmoke !important",3,"click","routerLink"],["mat-stroked-button","","color","warn",1,"logout-btn",3,"click"],["mat-stroked-button","","color","primary","routerLink","/login",1,"login-btn"]],template:function(e,i){if(e&1){let o=T();a(0,"main",6)(1,"mat-toolbar",7)(2,"div",8)(3,"button",9),_("click",function(){return y(o),M(i.toggleMenu())}),a(4,"mat-icon"),s(5,"menu"),r()(),a(6,"a",10),u(7,"img",11),r(),d(8,Aa,3,1,"ng-container",12),le(9,"async"),a(10,"div",13)(11,"div",14)(12,"button",15)(13,"mat-icon"),s(14,"notifications"),r()(),d(15,Na,2,3,"span",16),le(16,"async"),r(),a(17,"mat-menu",17,0),d(19,Ra,3,3,"ng-container",12),le(20,"async"),d(21,Va,5,0,"ng-template",null,1,Z),r(),a(23,"button",18),_("click",function(){return y(o),M(i.logout())}),a(24,"mat-icon"),s(25,"logout"),r()()()()(),a(26,"mat-sidenav-container",19)(27,"mat-sidenav",20,2),Ge("openedChange",function(p){return y(o),He(i.isMenuOpen,p)||(i.isMenuOpen=p),M(p)}),_("closed",function(){return y(o),M(i.closeMenu())}),a(29,"mat-nav-list"),d(30,$a,2,1,"ng-container",12),le(31,"async"),a(32,"div",21),d(33,qa,5,0,"ng-container",22)(34,Ha,4,0,"ng-template",null,3,Z),r()()(),a(36,"mat-sidenav-content"),u(37,"app-chat-bot-popup")(38,"router-outlet"),r()()()}if(e&2){let o=Q(18),c=Q(35);l(8),m("ngIf",he(9,9,i.navItem$)),l(3),m("matMenuTriggerFor",o),l(4),m("ngIf",he(16,11,i.unreadCount$)),l(4),m("ngIf",he(20,13,i.notifications$)),l(8),m("mode",i.modeSidenav),qe("opened",i.isMenuOpen),l(3),m("ngIf",he(31,15,i.navItem$)),l(3),m("ngIf",i.isLoggedIn)("ngIfElse",c)}},dependencies:[v,me,R,Qe,bn,En,Pn,Ce,P,Yn,A,$n,H,ke,Hn,Gn,qn,Xn,Qn,ni,ti,ii,ri,ai,si,at,Bt],styles:[".notifications-wrapper[_ngcontent-%COMP%]{position:relative}.notifications-wrapper[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:red;color:#fff;border-radius:50%;font-size:10px;width:16px;height:16px;display:flex;align-items:center;justify-content:center}.notifications-wrapper[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}.notif-menu[_ngcontent-%COMP%]   .mat-menu-item[_ngcontent-%COMP%]{align-items:flex-start;white-space:normal}.notif-menu[_ngcontent-%COMP%]   .mat-menu-item[_ngcontent-%COMP%]   .notif-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:8px}.notif-menu[_ngcontent-%COMP%]   .mat-menu-item[_ngcontent-%COMP%]   .notif-text[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{font-weight:500}.notif-menu[_ngcontent-%COMP%]   .mat-menu-item[_ngcontent-%COMP%]   .notif-text[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{font-size:11px;color:gray}.main-toolbar[_ngcontent-%COMP%]{background-color:#121212!important;color:#f0f0f0;box-shadow:0 2px 10px #0009}.main-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;height:8vh;padding:0 1.5rem}.main-toolbar[_ngcontent-%COMP%]   .logo-link[_ngcontent-%COMP%]{display:flex;align-items:center}.main-toolbar[_ngcontent-%COMP%]   .logo-link[_ngcontent-%COMP%]   .logo-img[_ngcontent-%COMP%]{height:38px}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{color:#f0f0f0;font-weight:500;transition:color .2s ease}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:hover{color:#c4a62d}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{position:relative}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{z-index:9999;position:absolute;top:120%;left:0;display:flex;flex-direction:column;background-color:#1e1e1e;border:1px solid #333;padding:.4rem 0;min-width:180px;max-height:60vh;overflow-y:scroll;border-radius:6px;opacity:0;pointer-events:none;transform:translateY(10px);transition:all .25s ease}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f0f0f0;padding:.5rem 1.2rem;font-size:.92rem;white-space:nowrap;transition:background .2s}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#2c2c2c;color:#c4a62d}.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{opacity:1;pointer-events:auto;transform:translateY(0)}.main-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.main-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:500;transition:all .2s ease}.main-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{border-color:#c4a62d;color:#c4a62d}.main-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background-color:#c4a62d1a}@media (max-width: 1024px){.main-toolbar[_ngcontent-%COMP%]   .desktop-nav[_ngcontent-%COMP%], .main-toolbar[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]{display:none}.main-toolbar[_ngcontent-%COMP%]   .burger-button[_ngcontent-%COMP%]{display:inline-flex;color:#fff}}.sidenav-container[_ngcontent-%COMP%]{height:92vh;overflow-y:hidden}.mobile-sidenav[_ngcontent-%COMP%]{background-color:#a3a3a3;color:#f1f1f1;width:270px;padding-top:1rem;border-radius:0 0 50% 0%}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]{padding:0}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:.8rem 1.2rem;font-weight:500;font-size:.95rem;color:#f0f0f0!important;transition:background .2s ease}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff0f;color:#c4a62d!important}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{background-color:transparent;box-shadow:none;color:#f0f0f0}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header{padding:0 1rem;font-weight:600;font-size:.95rem;color:#fff!important;background-color:transparent!important}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.5rem 2rem;font-size:.9rem;color:#d4d4d4!important}.mobile-sidenav[_ngcontent-%COMP%]   mat-nav-list[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#c4a62d!important}.mobile-sidenav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%], .mobile-sidenav[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{width:calc(100% - 2rem);margin:1rem auto 0;border-color:#000;color:#000;font-weight:600}.mobile-sidenav[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover, .mobile-sidenav[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background-color:#f7d0381a}main[_ngcontent-%COMP%]{background-color:#000;min-height:100vh}"]})};function Ga(n){let t=n,e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1&&i===0?1:o===0&&e!==0&&e%1e6===0&&i===0||!(o>=0&&o<=5)?4:5}var io=["it",[["m.","p."],["AM","PM"],void 0],void 0,[["D","L","M","M","G","V","S"],["dom","lun","mar","mer","gio","ven","sab"],["domenica","luned\xEC","marted\xEC","mercoled\xEC","gioved\xEC","venerd\xEC","sabato"],["dom","lun","mar","mer","gio","ven","sab"]],void 0,[["G","F","M","A","M","G","L","A","S","O","N","D"],["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]],void 0,[["aC","dC"],["a.C.","d.C."],["avanti Cristo","dopo Cristo"]],1,[6,0],["dd/MM/yy","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} {0}",void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{BRL:[void 0,"R$"],BYN:[void 0,"Br"],EGP:[void 0,"\xA3E"],HKD:[void 0,"$"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NOK:[void 0,"NKr"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VND:[void 0,"\u20AB"]},"ltr",Ga];function Qa(n){try{let t=new URL(n);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}}function oo(n){let t=[],e=[];if((!n.paymentApiBaseUrl||!Qa(n.paymentApiBaseUrl))&&t.push("paymentApiBaseUrl must be a valid absolute URL."),n.environmentName!=="development"){let c=n.paymentApiBaseUrl.toLowerCase();(c.includes("localhost")||c.startsWith("http://"))&&t.push("Non-development builds must not target localhost or non-HTTPS payment endpoints.")}(!n.stripePublishableKey||!n.stripePublishableKey.startsWith("pk_"))&&t.push("stripePublishableKey is missing or invalid."),n.environmentName==="production"&&n.stripePublishableKey.startsWith("pk_test_")&&e.push("Production is using a Stripe test publishable key (pk_test_).");let i=n.firebaseConfig,o=["apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId"];for(let c of o)(!i[c]||String(i[c]).trim()==="")&&t.push(`firebaseConfig.${c} is required.`);if(e.length>0&&console.warn("[env] configuration warnings:",e),t.length>0)throw new Error(`[env] invalid configuration: ${t.join(" ")}`)}_n(io);oo(ye);Mn(zt,Ei).catch(n=>console.error(n));
